var UxCanvasViewer=function(){"use strict";var Dp={exports:{}},ho={},wu={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function v1(){if(Pp)return Ae;Pp=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function y(C){return C===null||typeof C!="object"?null:(C=m&&C[m]||C["@@iterator"],typeof C=="function"?C:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,x={};function b(C,O,B){this.props=C,this.context=O,this.refs=x,this.updater=B||w}b.prototype.isReactComponent={},b.prototype.setState=function(C,O){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,O,"setState")},b.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function E(){}E.prototype=b.prototype;function T(C,O,B){this.props=C,this.context=O,this.refs=x,this.updater=B||w}var M=T.prototype=new E;M.constructor=T,k(M,b.prototype),M.isPureReactComponent=!0;var _=Array.isArray,F=Object.prototype.hasOwnProperty,z={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function j(C,O,B){var X,ne={},we=null,Q=null;if(O!=null)for(X in O.ref!==void 0&&(Q=O.ref),O.key!==void 0&&(we=""+O.key),O)F.call(O,X)&&!Y.hasOwnProperty(X)&&(ne[X]=O[X]);var ke=arguments.length-2;if(ke===1)ne.children=B;else if(1<ke){for(var me=Array(ke),Ee=0;Ee<ke;Ee++)me[Ee]=arguments[Ee+2];ne.children=me}if(C&&C.defaultProps)for(X in ke=C.defaultProps,ke)ne[X]===void 0&&(ne[X]=ke[X]);return{$$typeof:n,type:C,key:we,ref:Q,props:ne,_owner:z.current}}function ve(C,O){return{$$typeof:n,type:C.type,key:O,ref:C.ref,props:C.props,_owner:C._owner}}function pe(C){return typeof C=="object"&&C!==null&&C.$$typeof===n}function Ie(C){var O={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(B){return O[B]})}var ce=/\/+/g;function fe(C,O){return typeof C=="object"&&C!==null&&C.key!=null?Ie(""+C.key):O.toString(36)}function re(C,O,B,X,ne){var we=typeof C;(we==="undefined"||we==="boolean")&&(C=null);var Q=!1;if(C===null)Q=!0;else switch(we){case"string":case"number":Q=!0;break;case"object":switch(C.$$typeof){case n:case e:Q=!0}}if(Q)return Q=C,ne=ne(Q),C=X===""?"."+fe(Q,0):X,_(ne)?(B="",C!=null&&(B=C.replace(ce,"$&/")+"/"),re(ne,O,B,"",function(Ee){return Ee})):ne!=null&&(pe(ne)&&(ne=ve(ne,B+(!ne.key||Q&&Q.key===ne.key?"":(""+ne.key).replace(ce,"$&/")+"/")+C)),O.push(ne)),1;if(Q=0,X=X===""?".":X+":",_(C))for(var ke=0;ke<C.length;ke++){we=C[ke];var me=X+fe(we,ke);Q+=re(we,O,B,me,ne)}else if(me=y(C),typeof me=="function")for(C=me.call(C),ke=0;!(we=C.next()).done;)we=we.value,me=X+fe(we,ke++),Q+=re(we,O,B,me,ne);else if(we==="object")throw O=String(C),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return Q}function te(C,O,B){if(C==null)return C;var X=[],ne=0;return re(C,X,"","",function(we){return O.call(B,we,ne++)}),X}function se(C){if(C._status===-1){var O=C._result;O=O(),O.then(function(B){(C._status===0||C._status===-1)&&(C._status=1,C._result=B)},function(B){(C._status===0||C._status===-1)&&(C._status=2,C._result=B)}),C._status===-1&&(C._status=0,C._result=O)}if(C._status===1)return C._result.default;throw C._result}var Z={current:null},W={transition:null},P={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:W,ReactCurrentOwner:z};return Ae.Children={map:te,forEach:function(C,O,B){te(C,function(){O.apply(this,arguments)},B)},count:function(C){var O=0;return te(C,function(){O++}),O},toArray:function(C){return te(C,function(O){return O})||[]},only:function(C){if(!pe(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ae.Component=b,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=T,Ae.StrictMode=r,Ae.Suspense=d,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,Ae.cloneElement=function(C,O,B){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var X=k({},C.props),ne=C.key,we=C.ref,Q=C._owner;if(O!=null){if(O.ref!==void 0&&(we=O.ref,Q=z.current),O.key!==void 0&&(ne=""+O.key),C.type&&C.type.defaultProps)var ke=C.type.defaultProps;for(me in O)F.call(O,me)&&!Y.hasOwnProperty(me)&&(X[me]=O[me]===void 0&&ke!==void 0?ke[me]:O[me])}var me=arguments.length-2;if(me===1)X.children=B;else if(1<me){ke=Array(me);for(var Ee=0;Ee<me;Ee++)ke[Ee]=arguments[Ee+2];X.children=ke}return{$$typeof:n,type:C.type,key:ne,ref:we,props:X,_owner:Q}},Ae.createContext=function(C){return C={$$typeof:a,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:l,_context:C},C.Consumer=C},Ae.createElement=j,Ae.createFactory=function(C){var O=j.bind(null,C);return O.type=C,O},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(C){return{$$typeof:u,render:C}},Ae.isValidElement=pe,Ae.lazy=function(C){return{$$typeof:h,_payload:{_status:-1,_result:C},_init:se}},Ae.memo=function(C,O){return{$$typeof:f,type:C,compare:O===void 0?null:O}},Ae.startTransition=function(C){var O=W.transition;W.transition={};try{C()}finally{W.transition=O}},Ae.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ae.useCallback=function(C,O){return Z.current.useCallback(C,O)},Ae.useContext=function(C){return Z.current.useContext(C)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(C){return Z.current.useDeferredValue(C)},Ae.useEffect=function(C,O){return Z.current.useEffect(C,O)},Ae.useId=function(){return Z.current.useId()},Ae.useImperativeHandle=function(C,O,B){return Z.current.useImperativeHandle(C,O,B)},Ae.useInsertionEffect=function(C,O){return Z.current.useInsertionEffect(C,O)},Ae.useLayoutEffect=function(C,O){return Z.current.useLayoutEffect(C,O)},Ae.useMemo=function(C,O){return Z.current.useMemo(C,O)},Ae.useReducer=function(C,O,B){return Z.current.useReducer(C,O,B)},Ae.useRef=function(C){return Z.current.useRef(C)},Ae.useState=function(C){return Z.current.useState(C)},Ae.useSyncExternalStore=function(C,O,B){return Z.current.useSyncExternalStore(C,O,B)},Ae.useTransition=function(){return Z.current.useTransition()},Ae.version="18.2.0",Ae}var _p;function ku(){return _p||(_p=1,wu.exports=v1()),wu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp;function w1(){if(Fp)return ho;Fp=1;var n=ku(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,f){var h,m={},y=null,w=null;f!==void 0&&(y=""+f),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(w=d.ref);for(h in d)r.call(d,h)&&!l.hasOwnProperty(h)&&(m[h]=d[h]);if(u&&u.defaultProps)for(h in d=u.defaultProps,d)m[h]===void 0&&(m[h]=d[h]);return{$$typeof:e,type:u,key:y,ref:w,props:m,_owner:o.current}}return ho.Fragment=t,ho.jsx=a,ho.jsxs=a,ho}Dp.exports=w1();var V=Dp.exports,zp={exports:{}},Bt={},Su={exports:{}},xu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp;function k1(){return Bp||(Bp=1,function(n){function e(W,P){var C=W.length;W.push(P);e:for(;0<C;){var O=C-1>>>1,B=W[O];if(0<o(B,P))W[O]=P,W[C]=B,C=O;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var P=W[0],C=W.pop();if(C!==P){W[0]=C;e:for(var O=0,B=W.length,X=B>>>1;O<X;){var ne=2*(O+1)-1,we=W[ne],Q=ne+1,ke=W[Q];if(0>o(we,C))Q<B&&0>o(ke,we)?(W[O]=ke,W[Q]=C,O=Q):(W[O]=we,W[ne]=C,O=ne);else if(Q<B&&0>o(ke,C))W[O]=ke,W[Q]=C,O=Q;else break e}}return P}function o(W,P){var C=W.sortIndex-P.sortIndex;return C!==0?C:W.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],f=[],h=1,m=null,y=3,w=!1,k=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(W){for(var P=t(f);P!==null;){if(P.callback===null)r(f);else if(P.startTime<=W)r(f),P.sortIndex=P.expirationTime,e(d,P);else break;P=t(f)}}function _(W){if(x=!1,M(W),!k)if(t(d)!==null)k=!0,se(F);else{var P=t(f);P!==null&&Z(_,P.startTime-W)}}function F(W,P){k=!1,x&&(x=!1,E(j),j=-1),w=!0;var C=y;try{for(M(P),m=t(d);m!==null&&(!(m.expirationTime>P)||W&&!Ie());){var O=m.callback;if(typeof O=="function"){m.callback=null,y=m.priorityLevel;var B=O(m.expirationTime<=P);P=n.unstable_now(),typeof B=="function"?m.callback=B:m===t(d)&&r(d),M(P)}else r(d);m=t(d)}if(m!==null)var X=!0;else{var ne=t(f);ne!==null&&Z(_,ne.startTime-P),X=!1}return X}finally{m=null,y=C,w=!1}}var z=!1,Y=null,j=-1,ve=5,pe=-1;function Ie(){return!(n.unstable_now()-pe<ve)}function ce(){if(Y!==null){var W=n.unstable_now();pe=W;var P=!0;try{P=Y(!0,W)}finally{P?fe():(z=!1,Y=null)}}else z=!1}var fe;if(typeof T=="function")fe=function(){T(ce)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,te=re.port2;re.port1.onmessage=ce,fe=function(){te.postMessage(null)}}else fe=function(){b(ce,0)};function se(W){Y=W,z||(z=!0,fe())}function Z(W,P){j=b(function(){W(n.unstable_now())},P)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){k||w||(k=!0,se(F))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(W){switch(y){case 1:case 2:case 3:var P=3;break;default:P=y}var C=y;y=P;try{return W()}finally{y=C}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,P){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var C=y;y=W;try{return P()}finally{y=C}},n.unstable_scheduleCallback=function(W,P,C){var O=n.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?O+C:O):C=O,W){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=C+B,W={id:h++,callback:P,priorityLevel:W,startTime:C,expirationTime:B,sortIndex:-1},C>O?(W.sortIndex=C,e(f,W),t(d)===null&&W===t(f)&&(x?(E(j),j=-1):x=!0,Z(_,C-O))):(W.sortIndex=B,e(d,W),k||w||(k=!0,se(F))),W},n.unstable_shouldYield=Ie,n.unstable_wrapCallback=function(W){var P=y;return function(){var C=y;y=P;try{return W.apply(this,arguments)}finally{y=C}}}}(xu)),xu}var jp;function S1(){return jp||(jp=1,Su.exports=k1()),Su.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up;function x1(){if(Up)return Bt;Up=1;var n=ku(),e=S1();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(i,s){a(i,s),a(i+"Capture",s)}function a(i,s){for(o[i]=s,i=0;i<s.length;i++)r.add(s[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function y(i){return d.call(m,i)?!0:d.call(h,i)?!1:f.test(i)?m[i]=!0:(h[i]=!0,!1)}function w(i,s,c,p){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,s,c,p){if(s===null||typeof s>"u"||w(i,s,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function x(i,s,c,p,g,v,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=s,this.sanitizeURL=v,this.removeEmptyString=S}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];b[s]=new x(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function T(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(E,T);b[s]=new x(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(E,T);b[s]=new x(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(E,T);b[s]=new x(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function M(i,s,c,p){var g=b.hasOwnProperty(s)?b[s]:null;(g!==null?g.type!==0:p||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(k(s,c,g,p)&&(c=null),p||g===null?y(s)&&(c===null?i.removeAttribute(s):i.setAttribute(s,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(s=g.attributeName,p=g.attributeNamespace,c===null?i.removeAttribute(s):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,p?i.setAttributeNS(p,s,c):i.setAttribute(s,c))))}var _=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),z=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),ve=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),W=Symbol.iterator;function P(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var C=Object.assign,O;function B(i){if(O===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+i}var X=!1;function ne(i,s){if(!i||X)return"";X=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(D){var p=D}Reflect.construct(i,[],s)}else{try{s.call()}catch(D){p=D}i.call(s.prototype)}else{try{throw Error()}catch(D){p=D}i()}}catch(D){if(D&&p&&typeof D.stack=="string"){for(var g=D.stack.split(`
`),v=p.stack.split(`
`),S=g.length-1,I=v.length-1;1<=S&&0<=I&&g[S]!==v[I];)I--;for(;1<=S&&0<=I;S--,I--)if(g[S]!==v[I]){if(S!==1||I!==1)do if(S--,I--,0>I||g[S]!==v[I]){var A=`
`+g[S].replace(" at new "," at ");return i.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",i.displayName)),A}while(1<=S&&0<=I);break}}}finally{X=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?B(i):""}function we(i){switch(i.tag){case 5:return B(i.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return i=ne(i.type,!1),i;case 11:return i=ne(i.type.render,!1),i;case 1:return i=ne(i.type,!0),i;default:return""}}function Q(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Y:return"Fragment";case z:return"Portal";case ve:return"Profiler";case j:return"StrictMode";case fe:return"Suspense";case re:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ie:return(i.displayName||"Context")+".Consumer";case pe:return(i._context.displayName||"Context")+".Provider";case ce:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case te:return s=i.displayName||null,s!==null?s:Q(i.type)||"Memo";case se:s=i._payload,i=i._init;try{return Q(i(s))}catch{}}return null}function ke(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(s);case 8:return s===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function me(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ee(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vt(i){var s=Ee(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),p=""+i[s];if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,v=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){p=""+S,v.call(this,S)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Te(i){i._valueTracker||(i._valueTracker=vt(i))}function st(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var c=s.getValue(),p="";return i&&(p=Ee(i)?i.checked?"true":"false":i.value),i=p,i!==c?(s.setValue(i),!0):!1}function Mn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ge(i,s){var c=s.checked;return C({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function Ui(i,s){var c=s.defaultValue==null?"":s.defaultValue,p=s.checked!=null?s.checked:s.defaultChecked;c=me(s.value!=null?s.value:c),i._wrapperState={initialChecked:p,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function w0(i,s){s=s.checked,s!=null&&M(i,"checked",s,!1)}function Bd(i,s){w0(i,s);var c=me(s.value),p=s.type;if(c!=null)p==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?jd(i,s.type,c):s.hasOwnProperty("defaultValue")&&jd(i,s.type,me(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function k0(i,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var p=s.type;if(!(p!=="submit"&&p!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,c||s===i.value||(i.value=s),i.defaultValue=s}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function jd(i,s,c){(s!=="number"||Mn(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var ts=Array.isArray;function Wi(i,s,c,p){if(i=i.options,s){s={};for(var g=0;g<c.length;g++)s["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=s.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&p&&(i[c].defaultSelected=!0)}else{for(c=""+me(c),s=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,p&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function Ud(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return C({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function S0(i,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(t(92));if(ts(c)){if(1<c.length)throw Error(t(93));c=c[0]}s=c}s==null&&(s=""),c=s}i._wrapperState={initialValue:me(c)}}function x0(i,s){var c=me(s.value),p=me(s.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),s.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),p!=null&&(i.defaultValue=""+p)}function C0(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function b0(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wd(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?b0(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var da,E0=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,p,g){MSApp.execUnsafeLocalFunction(function(){return i(s,c,p,g)})}:i}(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(da=da||document.createElement("div"),da.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=da.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function ns(i,s){if(s){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=s;return}}i.textContent=s}var rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$A=["Webkit","ms","Moz","O"];Object.keys(rs).forEach(function(i){$A.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),rs[s]=rs[i]})});function I0(i,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||rs.hasOwnProperty(i)&&rs[i]?(""+s).trim():s+"px"}function T0(i,s){i=i.style;for(var c in s)if(s.hasOwnProperty(c)){var p=c.indexOf("--")===0,g=I0(c,s[c],p);c==="float"&&(c="cssFloat"),p?i.setProperty(c,g):i[c]=g}}var GA=C({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hd(i,s){if(s){if(GA[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Vd(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $d=null;function Gd(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Kd=null,Hi=null,Vi=null;function A0(i){if(i=Is(i)){if(typeof Kd!="function")throw Error(t(280));var s=i.stateNode;s&&(s=Da(s),Kd(i.stateNode,i.type,s))}}function N0(i){Hi?Vi?Vi.push(i):Vi=[i]:Hi=i}function M0(){if(Hi){var i=Hi,s=Vi;if(Vi=Hi=null,A0(i),s)for(i=0;i<s.length;i++)A0(s[i])}}function R0(i,s){return i(s)}function O0(){}var Jd=!1;function L0(i,s,c){if(Jd)return i(s,c);Jd=!0;try{return R0(i,s,c)}finally{Jd=!1,(Hi!==null||Vi!==null)&&(O0(),M0())}}function is(i,s){var c=i.stateNode;if(c===null)return null;var p=Da(c);if(p===null)return null;c=p[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,s,typeof c));return c}var Yd=!1;if(u)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){Yd=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{Yd=!1}function KA(i,s,c,p,g,v,S,I,A){var D=Array.prototype.slice.call(arguments,3);try{s.apply(c,D)}catch(H){this.onError(H)}}var ls=!1,fa=null,pa=!1,Qd=null,JA={onError:function(i){ls=!0,fa=i}};function YA(i,s,c,p,g,v,S,I,A){ls=!1,fa=null,KA.apply(JA,arguments)}function QA(i,s,c,p,g,v,S,I,A){if(YA.apply(this,arguments),ls){if(ls){var D=fa;ls=!1,fa=null}else throw Error(t(198));pa||(pa=!0,Qd=D)}}function ti(i){var s=i,c=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,s.flags&4098&&(c=s.return),i=s.return;while(i)}return s.tag===3?c:null}function D0(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function P0(i){if(ti(i)!==i)throw Error(t(188))}function ZA(i){var s=i.alternate;if(!s){if(s=ti(i),s===null)throw Error(t(188));return s!==i?null:i}for(var c=i,p=s;;){var g=c.return;if(g===null)break;var v=g.alternate;if(v===null){if(p=g.return,p!==null){c=p;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===c)return P0(g),i;if(v===p)return P0(g),s;v=v.sibling}throw Error(t(188))}if(c.return!==p.return)c=g,p=v;else{for(var S=!1,I=g.child;I;){if(I===c){S=!0,c=g,p=v;break}if(I===p){S=!0,p=g,c=v;break}I=I.sibling}if(!S){for(I=v.child;I;){if(I===c){S=!0,c=v,p=g;break}if(I===p){S=!0,p=v,c=g;break}I=I.sibling}if(!S)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:s}function _0(i){return i=ZA(i),i!==null?F0(i):null}function F0(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=F0(i);if(s!==null)return s;i=i.sibling}return null}var z0=e.unstable_scheduleCallback,B0=e.unstable_cancelCallback,qA=e.unstable_shouldYield,XA=e.unstable_requestPaint,tt=e.unstable_now,eN=e.unstable_getCurrentPriorityLevel,Zd=e.unstable_ImmediatePriority,j0=e.unstable_UserBlockingPriority,ha=e.unstable_NormalPriority,tN=e.unstable_LowPriority,U0=e.unstable_IdlePriority,ma=null,Rn=null;function nN(i){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(ma,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:oN,rN=Math.log,iN=Math.LN2;function oN(i){return i>>>=0,i===0?32:31-(rN(i)/iN|0)|0}var ga=64,ya=4194304;function as(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function va(i,s){var c=i.pendingLanes;if(c===0)return 0;var p=0,g=i.suspendedLanes,v=i.pingedLanes,S=c&268435455;if(S!==0){var I=S&~g;I!==0?p=as(I):(v&=S,v!==0&&(p=as(v)))}else S=c&~g,S!==0?p=as(S):v!==0&&(p=as(v));if(p===0)return 0;if(s!==0&&s!==p&&!(s&g)&&(g=p&-p,v=s&-s,g>=v||g===16&&(v&4194240)!==0))return s;if(p&4&&(p|=c&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=p;0<s;)c=31-yn(s),g=1<<c,p|=i[c],s&=~g;return p}function sN(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lN(i,s){for(var c=i.suspendedLanes,p=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes;0<v;){var S=31-yn(v),I=1<<S,A=g[S];A===-1?(!(I&c)||I&p)&&(g[S]=sN(I,s)):A<=s&&(i.expiredLanes|=I),v&=~I}}function qd(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function W0(){var i=ga;return ga<<=1,!(ga&4194240)&&(ga=64),i}function Xd(i){for(var s=[],c=0;31>c;c++)s.push(i);return s}function us(i,s,c){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-yn(s),i[s]=c}function aN(i,s){var c=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-yn(c),v=1<<g;s[g]=0,p[g]=-1,i[g]=-1,c&=~v}}function ef(i,s){var c=i.entangledLanes|=s;for(i=i.entanglements;c;){var p=31-yn(c),g=1<<p;g&s|i[p]&s&&(i[p]|=s),c&=~g}}var _e=0;function H0(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var V0,tf,$0,G0,K0,nf=!1,wa=[],vr=null,wr=null,kr=null,cs=new Map,ds=new Map,Sr=[],uN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function J0(i,s){switch(i){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":cs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(s.pointerId)}}function fs(i,s,c,p,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:s,domEventName:c,eventSystemFlags:p,nativeEvent:v,targetContainers:[g]},s!==null&&(s=Is(s),s!==null&&tf(s)),i):(i.eventSystemFlags|=p,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function cN(i,s,c,p,g){switch(s){case"focusin":return vr=fs(vr,i,s,c,p,g),!0;case"dragenter":return wr=fs(wr,i,s,c,p,g),!0;case"mouseover":return kr=fs(kr,i,s,c,p,g),!0;case"pointerover":var v=g.pointerId;return cs.set(v,fs(cs.get(v)||null,i,s,c,p,g)),!0;case"gotpointercapture":return v=g.pointerId,ds.set(v,fs(ds.get(v)||null,i,s,c,p,g)),!0}return!1}function Y0(i){var s=ni(i.target);if(s!==null){var c=ti(s);if(c!==null){if(s=c.tag,s===13){if(s=D0(c),s!==null){i.blockedOn=s,K0(i.priority,function(){$0(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ka(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var c=of(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var p=new c.constructor(c.type,c);$d=p,c.target.dispatchEvent(p),$d=null}else return s=Is(c),s!==null&&tf(s),i.blockedOn=c,!1;s.shift()}return!0}function Q0(i,s,c){ka(i)&&c.delete(s)}function dN(){nf=!1,vr!==null&&ka(vr)&&(vr=null),wr!==null&&ka(wr)&&(wr=null),kr!==null&&ka(kr)&&(kr=null),cs.forEach(Q0),ds.forEach(Q0)}function ps(i,s){i.blockedOn===s&&(i.blockedOn=null,nf||(nf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dN)))}function hs(i){function s(g){return ps(g,i)}if(0<wa.length){ps(wa[0],i);for(var c=1;c<wa.length;c++){var p=wa[c];p.blockedOn===i&&(p.blockedOn=null)}}for(vr!==null&&ps(vr,i),wr!==null&&ps(wr,i),kr!==null&&ps(kr,i),cs.forEach(s),ds.forEach(s),c=0;c<Sr.length;c++)p=Sr[c],p.blockedOn===i&&(p.blockedOn=null);for(;0<Sr.length&&(c=Sr[0],c.blockedOn===null);)Y0(c),c.blockedOn===null&&Sr.shift()}var $i=_.ReactCurrentBatchConfig,Sa=!0;function fN(i,s,c,p){var g=_e,v=$i.transition;$i.transition=null;try{_e=1,rf(i,s,c,p)}finally{_e=g,$i.transition=v}}function pN(i,s,c,p){var g=_e,v=$i.transition;$i.transition=null;try{_e=4,rf(i,s,c,p)}finally{_e=g,$i.transition=v}}function rf(i,s,c,p){if(Sa){var g=of(i,s,c,p);if(g===null)xf(i,s,p,xa,c),J0(i,p);else if(cN(g,i,s,c,p))p.stopPropagation();else if(J0(i,p),s&4&&-1<uN.indexOf(i)){for(;g!==null;){var v=Is(g);if(v!==null&&V0(v),v=of(i,s,c,p),v===null&&xf(i,s,p,xa,c),v===g)break;g=v}g!==null&&p.stopPropagation()}else xf(i,s,p,null,c)}}var xa=null;function of(i,s,c,p){if(xa=null,i=Gd(p),i=ni(i),i!==null)if(s=ti(i),s===null)i=null;else if(c=s.tag,c===13){if(i=D0(s),i!==null)return i;i=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return xa=i,null}function Z0(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eN()){case Zd:return 1;case j0:return 4;case ha:case tN:return 16;case U0:return 536870912;default:return 16}default:return 16}}var xr=null,sf=null,Ca=null;function q0(){if(Ca)return Ca;var i,s=sf,c=s.length,p,g="value"in xr?xr.value:xr.textContent,v=g.length;for(i=0;i<c&&s[i]===g[i];i++);var S=c-i;for(p=1;p<=S&&s[c-p]===g[v-p];p++);return Ca=g.slice(i,1<p?1-p:void 0)}function ba(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Ea(){return!0}function X0(){return!1}function Zt(i){function s(c,p,g,v,S){this._reactName=c,this._targetInst=g,this.type=p,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(c=i[I],this[I]=c?c(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ea:X0,this.isPropagationStopped=X0,this}return C(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),s}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lf=Zt(Gi),ms=C({},Gi,{view:0,detail:0}),hN=Zt(ms),af,uf,gs,Ia=C({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:df,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==gs&&(gs&&i.type==="mousemove"?(af=i.screenX-gs.screenX,uf=i.screenY-gs.screenY):uf=af=0,gs=i),af)},movementY:function(i){return"movementY"in i?i.movementY:uf}}),ev=Zt(Ia),mN=C({},Ia,{dataTransfer:0}),gN=Zt(mN),yN=C({},ms,{relatedTarget:0}),cf=Zt(yN),vN=C({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),wN=Zt(vN),kN=C({},Gi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),SN=Zt(kN),xN=C({},Gi,{data:0}),tv=Zt(xN),CN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IN(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=EN[i])?!!s[i]:!1}function df(){return IN}var TN=C({},ms,{key:function(i){if(i.key){var s=CN[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ba(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?bN[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:df,charCode:function(i){return i.type==="keypress"?ba(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ba(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),AN=Zt(TN),NN=C({},Ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nv=Zt(NN),MN=C({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:df}),RN=Zt(MN),ON=C({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),LN=Zt(ON),DN=C({},Ia,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),PN=Zt(DN),_N=[9,13,27,32],ff=u&&"CompositionEvent"in window,ys=null;u&&"documentMode"in document&&(ys=document.documentMode);var FN=u&&"TextEvent"in window&&!ys,rv=u&&(!ff||ys&&8<ys&&11>=ys),iv=" ",ov=!1;function sv(i,s){switch(i){case"keyup":return _N.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ki=!1;function zN(i,s){switch(i){case"compositionend":return lv(s);case"keypress":return s.which!==32?null:(ov=!0,iv);case"textInput":return i=s.data,i===iv&&ov?null:i;default:return null}}function BN(i,s){if(Ki)return i==="compositionend"||!ff&&sv(i,s)?(i=q0(),Ca=sf=xr=null,Ki=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return rv&&s.locale!=="ko"?null:s.data;default:return null}}var jN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function av(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!jN[i.type]:s==="textarea"}function uv(i,s,c,p){N0(p),s=Ra(s,"onChange"),0<s.length&&(c=new lf("onChange","change",null,c,p),i.push({event:c,listeners:s}))}var vs=null,ws=null;function UN(i){Tv(i,0)}function Ta(i){var s=qi(i);if(st(s))return i}function WN(i,s){if(i==="change")return s}var cv=!1;if(u){var pf;if(u){var hf="oninput"in document;if(!hf){var dv=document.createElement("div");dv.setAttribute("oninput","return;"),hf=typeof dv.oninput=="function"}pf=hf}else pf=!1;cv=pf&&(!document.documentMode||9<document.documentMode)}function fv(){vs&&(vs.detachEvent("onpropertychange",pv),ws=vs=null)}function pv(i){if(i.propertyName==="value"&&Ta(ws)){var s=[];uv(s,ws,i,Gd(i)),L0(UN,s)}}function HN(i,s,c){i==="focusin"?(fv(),vs=s,ws=c,vs.attachEvent("onpropertychange",pv)):i==="focusout"&&fv()}function VN(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ta(ws)}function $N(i,s){if(i==="click")return Ta(s)}function GN(i,s){if(i==="input"||i==="change")return Ta(s)}function KN(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var vn=typeof Object.is=="function"?Object.is:KN;function ks(i,s){if(vn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var c=Object.keys(i),p=Object.keys(s);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var g=c[p];if(!d.call(s,g)||!vn(i[g],s[g]))return!1}return!0}function hv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function mv(i,s){var c=hv(i);i=0;for(var p;c;){if(c.nodeType===3){if(p=i+c.textContent.length,i<=s&&p>=s)return{node:c,offset:s-i};i=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=hv(c)}}function gv(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?gv(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function yv(){for(var i=window,s=Mn();s instanceof i.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)i=s.contentWindow;else break;s=Mn(i.document)}return s}function mf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function JN(i){var s=yv(),c=i.focusedElem,p=i.selectionRange;if(s!==c&&c&&c.ownerDocument&&gv(c.ownerDocument.documentElement,c)){if(p!==null&&mf(c)){if(s=p.start,i=p.end,i===void 0&&(i=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(i,c.value.length);else if(i=(s=c.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,v=Math.min(p.start,g);p=p.end===void 0?v:Math.min(p.end,g),!i.extend&&v>p&&(g=p,p=v,v=g),g=mv(c,v);var S=mv(c,p);g&&S&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),i.removeAllRanges(),v>p?(i.addRange(s),i.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),i.addRange(s)))}}for(s=[],i=c;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)i=s[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var YN=u&&"documentMode"in document&&11>=document.documentMode,Ji=null,gf=null,Ss=null,yf=!1;function vv(i,s,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;yf||Ji==null||Ji!==Mn(p)||(p=Ji,"selectionStart"in p&&mf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Ss&&ks(Ss,p)||(Ss=p,p=Ra(gf,"onSelect"),0<p.length&&(s=new lf("onSelect","select",null,s,c),i.push({event:s,listeners:p}),s.target=Ji)))}function Aa(i,s){var c={};return c[i.toLowerCase()]=s.toLowerCase(),c["Webkit"+i]="webkit"+s,c["Moz"+i]="moz"+s,c}var Yi={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionend:Aa("Transition","TransitionEnd")},vf={},wv={};u&&(wv=document.createElement("div").style,"AnimationEvent"in window||(delete Yi.animationend.animation,delete Yi.animationiteration.animation,delete Yi.animationstart.animation),"TransitionEvent"in window||delete Yi.transitionend.transition);function Na(i){if(vf[i])return vf[i];if(!Yi[i])return i;var s=Yi[i],c;for(c in s)if(s.hasOwnProperty(c)&&c in wv)return vf[i]=s[c];return i}var kv=Na("animationend"),Sv=Na("animationiteration"),xv=Na("animationstart"),Cv=Na("transitionend"),bv=new Map,Ev="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(i,s){bv.set(i,s),l(s,[i])}for(var wf=0;wf<Ev.length;wf++){var kf=Ev[wf],QN=kf.toLowerCase(),ZN=kf[0].toUpperCase()+kf.slice(1);Cr(QN,"on"+ZN)}Cr(kv,"onAnimationEnd"),Cr(Sv,"onAnimationIteration"),Cr(xv,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(Cv,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qN=new Set("cancel close invalid load scroll toggle".split(" ").concat(xs));function Iv(i,s,c){var p=i.type||"unknown-event";i.currentTarget=c,QA(p,s,void 0,i),i.currentTarget=null}function Tv(i,s){s=(s&4)!==0;for(var c=0;c<i.length;c++){var p=i[c],g=p.event;p=p.listeners;e:{var v=void 0;if(s)for(var S=p.length-1;0<=S;S--){var I=p[S],A=I.instance,D=I.currentTarget;if(I=I.listener,A!==v&&g.isPropagationStopped())break e;Iv(g,I,D),v=A}else for(S=0;S<p.length;S++){if(I=p[S],A=I.instance,D=I.currentTarget,I=I.listener,A!==v&&g.isPropagationStopped())break e;Iv(g,I,D),v=A}}}if(pa)throw i=Qd,pa=!1,Qd=null,i}function We(i,s){var c=s[Af];c===void 0&&(c=s[Af]=new Set);var p=i+"__bubble";c.has(p)||(Av(s,i,2,!1),c.add(p))}function Sf(i,s,c){var p=0;s&&(p|=4),Av(c,i,p,s)}var Ma="_reactListening"+Math.random().toString(36).slice(2);function Cs(i){if(!i[Ma]){i[Ma]=!0,r.forEach(function(c){c!=="selectionchange"&&(qN.has(c)||Sf(c,!1,i),Sf(c,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Ma]||(s[Ma]=!0,Sf("selectionchange",!1,s))}}function Av(i,s,c,p){switch(Z0(s)){case 1:var g=fN;break;case 4:g=pN;break;default:g=rf}c=g.bind(null,s,c,i),g=void 0,!Yd||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),p?g!==void 0?i.addEventListener(s,c,{capture:!0,passive:g}):i.addEventListener(s,c,!0):g!==void 0?i.addEventListener(s,c,{passive:g}):i.addEventListener(s,c,!1)}function xf(i,s,c,p,g){var v=p;if(!(s&1)&&!(s&2)&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var I=p.stateNode.containerInfo;if(I===g||I.nodeType===8&&I.parentNode===g)break;if(S===4)for(S=p.return;S!==null;){var A=S.tag;if((A===3||A===4)&&(A=S.stateNode.containerInfo,A===g||A.nodeType===8&&A.parentNode===g))return;S=S.return}for(;I!==null;){if(S=ni(I),S===null)return;if(A=S.tag,A===5||A===6){p=v=S;continue e}I=I.parentNode}}p=p.return}L0(function(){var D=v,H=Gd(c),G=[];e:{var U=bv.get(i);if(U!==void 0){var ee=lf,le=i;switch(i){case"keypress":if(ba(c)===0)break e;case"keydown":case"keyup":ee=AN;break;case"focusin":le="focus",ee=cf;break;case"focusout":le="blur",ee=cf;break;case"beforeblur":case"afterblur":ee=cf;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ev;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=gN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=RN;break;case kv:case Sv:case xv:ee=wN;break;case Cv:ee=LN;break;case"scroll":ee=hN;break;case"wheel":ee=PN;break;case"copy":case"cut":case"paste":ee=SN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=nv}var ae=(s&4)!==0,nt=!ae&&i==="scroll",R=ae?U!==null?U+"Capture":null:U;ae=[];for(var N=D,L;N!==null;){L=N;var J=L.stateNode;if(L.tag===5&&J!==null&&(L=J,R!==null&&(J=is(N,R),J!=null&&ae.push(bs(N,J,L)))),nt)break;N=N.return}0<ae.length&&(U=new ee(U,le,null,c,H),G.push({event:U,listeners:ae}))}}if(!(s&7)){e:{if(U=i==="mouseover"||i==="pointerover",ee=i==="mouseout"||i==="pointerout",U&&c!==$d&&(le=c.relatedTarget||c.fromElement)&&(ni(le)||le[Hn]))break e;if((ee||U)&&(U=H.window===H?H:(U=H.ownerDocument)?U.defaultView||U.parentWindow:window,ee?(le=c.relatedTarget||c.toElement,ee=D,le=le?ni(le):null,le!==null&&(nt=ti(le),le!==nt||le.tag!==5&&le.tag!==6)&&(le=null)):(ee=null,le=D),ee!==le)){if(ae=ev,J="onMouseLeave",R="onMouseEnter",N="mouse",(i==="pointerout"||i==="pointerover")&&(ae=nv,J="onPointerLeave",R="onPointerEnter",N="pointer"),nt=ee==null?U:qi(ee),L=le==null?U:qi(le),U=new ae(J,N+"leave",ee,c,H),U.target=nt,U.relatedTarget=L,J=null,ni(H)===D&&(ae=new ae(R,N+"enter",le,c,H),ae.target=L,ae.relatedTarget=nt,J=ae),nt=J,ee&&le)t:{for(ae=ee,R=le,N=0,L=ae;L;L=Qi(L))N++;for(L=0,J=R;J;J=Qi(J))L++;for(;0<N-L;)ae=Qi(ae),N--;for(;0<L-N;)R=Qi(R),L--;for(;N--;){if(ae===R||R!==null&&ae===R.alternate)break t;ae=Qi(ae),R=Qi(R)}ae=null}else ae=null;ee!==null&&Nv(G,U,ee,ae,!1),le!==null&&nt!==null&&Nv(G,nt,le,ae,!0)}}e:{if(U=D?qi(D):window,ee=U.nodeName&&U.nodeName.toLowerCase(),ee==="select"||ee==="input"&&U.type==="file")var ue=WN;else if(av(U))if(cv)ue=GN;else{ue=VN;var ge=HN}else(ee=U.nodeName)&&ee.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(ue=$N);if(ue&&(ue=ue(i,D))){uv(G,ue,c,H);break e}ge&&ge(i,U,D),i==="focusout"&&(ge=U._wrapperState)&&ge.controlled&&U.type==="number"&&jd(U,"number",U.value)}switch(ge=D?qi(D):window,i){case"focusin":(av(ge)||ge.contentEditable==="true")&&(Ji=ge,gf=D,Ss=null);break;case"focusout":Ss=gf=Ji=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,vv(G,c,H);break;case"selectionchange":if(YN)break;case"keydown":case"keyup":vv(G,c,H)}var ye;if(ff)e:{switch(i){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Ki?sv(i,c)&&(Se="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Se="onCompositionStart");Se&&(rv&&c.locale!=="ko"&&(Ki||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Ki&&(ye=q0()):(xr=H,sf="value"in xr?xr.value:xr.textContent,Ki=!0)),ge=Ra(D,Se),0<ge.length&&(Se=new tv(Se,i,null,c,H),G.push({event:Se,listeners:ge}),ye?Se.data=ye:(ye=lv(c),ye!==null&&(Se.data=ye)))),(ye=FN?zN(i,c):BN(i,c))&&(D=Ra(D,"onBeforeInput"),0<D.length&&(H=new tv("onBeforeInput","beforeinput",null,c,H),G.push({event:H,listeners:D}),H.data=ye))}Tv(G,s)})}function bs(i,s,c){return{instance:i,listener:s,currentTarget:c}}function Ra(i,s){for(var c=s+"Capture",p=[];i!==null;){var g=i,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=is(i,c),v!=null&&p.unshift(bs(i,v,g)),v=is(i,s),v!=null&&p.push(bs(i,v,g))),i=i.return}return p}function Qi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Nv(i,s,c,p,g){for(var v=s._reactName,S=[];c!==null&&c!==p;){var I=c,A=I.alternate,D=I.stateNode;if(A!==null&&A===p)break;I.tag===5&&D!==null&&(I=D,g?(A=is(c,v),A!=null&&S.unshift(bs(c,A,I))):g||(A=is(c,v),A!=null&&S.push(bs(c,A,I)))),c=c.return}S.length!==0&&i.push({event:s,listeners:S})}var XN=/\r\n?/g,eM=/\u0000|\uFFFD/g;function Mv(i){return(typeof i=="string"?i:""+i).replace(XN,`
`).replace(eM,"")}function Oa(i,s,c){if(s=Mv(s),Mv(i)!==s&&c)throw Error(t(425))}function La(){}var Cf=null,bf=null;function Ef(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var If=typeof setTimeout=="function"?setTimeout:void 0,tM=typeof clearTimeout=="function"?clearTimeout:void 0,Rv=typeof Promise=="function"?Promise:void 0,nM=typeof queueMicrotask=="function"?queueMicrotask:typeof Rv<"u"?function(i){return Rv.resolve(null).then(i).catch(rM)}:If;function rM(i){setTimeout(function(){throw i})}function Tf(i,s){var c=s,p=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(p===0){i.removeChild(g),hs(s);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=g}while(c);hs(s)}function br(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function Ov(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return i;s--}else c==="/$"&&s++}i=i.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),On="__reactFiber$"+Zi,Es="__reactProps$"+Zi,Hn="__reactContainer$"+Zi,Af="__reactEvents$"+Zi,iM="__reactListeners$"+Zi,oM="__reactHandles$"+Zi;function ni(i){var s=i[On];if(s)return s;for(var c=i.parentNode;c;){if(s=c[Hn]||c[On]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(i=Ov(i);i!==null;){if(c=i[On])return c;i=Ov(i)}return s}i=c,c=i.parentNode}return null}function Is(i){return i=i[On]||i[Hn],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function qi(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Da(i){return i[Es]||null}var Nf=[],Xi=-1;function Er(i){return{current:i}}function He(i){0>Xi||(i.current=Nf[Xi],Nf[Xi]=null,Xi--)}function Be(i,s){Xi++,Nf[Xi]=i.current,i.current=s}var Ir={},Rt=Er(Ir),Ut=Er(!1),ri=Ir;function eo(i,s){var c=i.type.contextTypes;if(!c)return Ir;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===s)return p.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in c)g[v]=s[v];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=g),g}function Wt(i){return i=i.childContextTypes,i!=null}function Pa(){He(Ut),He(Rt)}function Lv(i,s,c){if(Rt.current!==Ir)throw Error(t(168));Be(Rt,s),Be(Ut,c)}function Dv(i,s,c){var p=i.stateNode;if(s=s.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var g in p)if(!(g in s))throw Error(t(108,ke(i)||"Unknown",g));return C({},c,p)}function _a(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ir,ri=Rt.current,Be(Rt,i),Be(Ut,Ut.current),!0}function Pv(i,s,c){var p=i.stateNode;if(!p)throw Error(t(169));c?(i=Dv(i,s,ri),p.__reactInternalMemoizedMergedChildContext=i,He(Ut),He(Rt),Be(Rt,i)):He(Ut),Be(Ut,c)}var Vn=null,Fa=!1,Mf=!1;function _v(i){Vn===null?Vn=[i]:Vn.push(i)}function sM(i){Fa=!0,_v(i)}function Tr(){if(!Mf&&Vn!==null){Mf=!0;var i=0,s=_e;try{var c=Vn;for(_e=1;i<c.length;i++){var p=c[i];do p=p(!0);while(p!==null)}Vn=null,Fa=!1}catch(g){throw Vn!==null&&(Vn=Vn.slice(i+1)),z0(Zd,Tr),g}finally{_e=s,Mf=!1}}return null}var to=[],no=0,za=null,Ba=0,on=[],sn=0,ii=null,$n=1,Gn="";function oi(i,s){to[no++]=Ba,to[no++]=za,za=i,Ba=s}function Fv(i,s,c){on[sn++]=$n,on[sn++]=Gn,on[sn++]=ii,ii=i;var p=$n;i=Gn;var g=32-yn(p)-1;p&=~(1<<g),c+=1;var v=32-yn(s)+g;if(30<v){var S=g-g%5;v=(p&(1<<S)-1).toString(32),p>>=S,g-=S,$n=1<<32-yn(s)+g|c<<g|p,Gn=v+i}else $n=1<<v|c<<g|p,Gn=i}function Rf(i){i.return!==null&&(oi(i,1),Fv(i,1,0))}function Of(i){for(;i===za;)za=to[--no],to[no]=null,Ba=to[--no],to[no]=null;for(;i===ii;)ii=on[--sn],on[sn]=null,Gn=on[--sn],on[sn]=null,$n=on[--sn],on[sn]=null}var qt=null,Xt=null,$e=!1,wn=null;function zv(i,s){var c=cn(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=i,s=i.deletions,s===null?(i.deletions=[c],i.flags|=16):s.push(c)}function Bv(i,s){switch(i.tag){case 5:var c=i.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,qt=i,Xt=br(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,qt=i,Xt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=ii!==null?{id:$n,overflow:Gn}:null,i.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=cn(18,null,null,0),c.stateNode=s,c.return=i,i.child=c,qt=i,Xt=null,!0):!1;default:return!1}}function Lf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Df(i){if($e){var s=Xt;if(s){var c=s;if(!Bv(i,s)){if(Lf(i))throw Error(t(418));s=br(c.nextSibling);var p=qt;s&&Bv(i,s)?zv(p,c):(i.flags=i.flags&-4097|2,$e=!1,qt=i)}}else{if(Lf(i))throw Error(t(418));i.flags=i.flags&-4097|2,$e=!1,qt=i}}}function jv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;qt=i}function ja(i){if(i!==qt)return!1;if(!$e)return jv(i),$e=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Ef(i.type,i.memoizedProps)),s&&(s=Xt)){if(Lf(i))throw Uv(),Error(t(418));for(;s;)zv(i,s),s=br(s.nextSibling)}if(jv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(s===0){Xt=br(i.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}i=i.nextSibling}Xt=null}}else Xt=qt?br(i.stateNode.nextSibling):null;return!0}function Uv(){for(var i=Xt;i;)i=br(i.nextSibling)}function ro(){Xt=qt=null,$e=!1}function Pf(i){wn===null?wn=[i]:wn.push(i)}var lM=_.ReactCurrentBatchConfig;function kn(i,s){if(i&&i.defaultProps){s=C({},s),i=i.defaultProps;for(var c in i)s[c]===void 0&&(s[c]=i[c]);return s}return s}var Ua=Er(null),Wa=null,io=null,_f=null;function Ff(){_f=io=Wa=null}function zf(i){var s=Ua.current;He(Ua),i._currentValue=s}function Bf(i,s,c){for(;i!==null;){var p=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),i===c)break;i=i.return}}function oo(i,s){Wa=i,_f=io=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&s&&(Ht=!0),i.firstContext=null)}function ln(i){var s=i._currentValue;if(_f!==i)if(i={context:i,memoizedValue:s,next:null},io===null){if(Wa===null)throw Error(t(308));io=i,Wa.dependencies={lanes:0,firstContext:i}}else io=io.next=i;return s}var si=null;function jf(i){si===null?si=[i]:si.push(i)}function Wv(i,s,c,p){var g=s.interleaved;return g===null?(c.next=c,jf(s)):(c.next=g.next,g.next=c),s.interleaved=c,Kn(i,p)}function Kn(i,s){i.lanes|=s;var c=i.alternate;for(c!==null&&(c.lanes|=s),c=i,i=i.return;i!==null;)i.childLanes|=s,c=i.alternate,c!==null&&(c.childLanes|=s),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Ar=!1;function Uf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hv(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Jn(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function Nr(i,s,c){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,Le&2){var g=p.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),p.pending=s,Kn(i,c)}return g=p.interleaved,g===null?(s.next=s,jf(p)):(s.next=g.next,g.next=s),p.interleaved=s,Kn(i,c)}function Ha(i,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var p=s.lanes;p&=i.pendingLanes,c|=p,s.lanes=c,ef(i,c)}}function Vv(i,s){var c=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var g=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var S={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};v===null?g=v=S:v=v.next=S,c=c.next}while(c!==null);v===null?g=v=s:v=v.next=s}else g=v=s;c={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:p.shared,effects:p.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=s}function Va(i,s,c,p){var g=i.updateQueue;Ar=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var A=I,D=A.next;A.next=null,S===null?v=D:S.next=D,S=A;var H=i.alternate;H!==null&&(H=H.updateQueue,I=H.lastBaseUpdate,I!==S&&(I===null?H.firstBaseUpdate=D:I.next=D,H.lastBaseUpdate=A))}if(v!==null){var G=g.baseState;S=0,H=D=A=null,I=v;do{var U=I.lane,ee=I.eventTime;if((p&U)===U){H!==null&&(H=H.next={eventTime:ee,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var le=i,ae=I;switch(U=s,ee=c,ae.tag){case 1:if(le=ae.payload,typeof le=="function"){G=le.call(ee,G,U);break e}G=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ae.payload,U=typeof le=="function"?le.call(ee,G,U):le,U==null)break e;G=C({},G,U);break e;case 2:Ar=!0}}I.callback!==null&&I.lane!==0&&(i.flags|=64,U=g.effects,U===null?g.effects=[I]:U.push(I))}else ee={eventTime:ee,lane:U,tag:I.tag,payload:I.payload,callback:I.callback,next:null},H===null?(D=H=ee,A=G):H=H.next=ee,S|=U;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;U=I,I=U.next,U.next=null,g.lastBaseUpdate=U,g.shared.pending=null}}while(!0);if(H===null&&(A=G),g.baseState=A,g.firstBaseUpdate=D,g.lastBaseUpdate=H,s=g.shared.interleaved,s!==null){g=s;do S|=g.lane,g=g.next;while(g!==s)}else v===null&&(g.shared.lanes=0);ui|=S,i.lanes=S,i.memoizedState=G}}function $v(i,s,c){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var p=i[s],g=p.callback;if(g!==null){if(p.callback=null,p=c,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var Gv=new n.Component().refs;function Wf(i,s,c,p){s=i.memoizedState,c=c(p,s),c=c==null?s:C({},s,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var $a={isMounted:function(i){return(i=i._reactInternals)?ti(i)===i:!1},enqueueSetState:function(i,s,c){i=i._reactInternals;var p=zt(),g=Lr(i),v=Jn(p,g);v.payload=s,c!=null&&(v.callback=c),s=Nr(i,v,g),s!==null&&(Cn(s,i,g,p),Ha(s,i,g))},enqueueReplaceState:function(i,s,c){i=i._reactInternals;var p=zt(),g=Lr(i),v=Jn(p,g);v.tag=1,v.payload=s,c!=null&&(v.callback=c),s=Nr(i,v,g),s!==null&&(Cn(s,i,g,p),Ha(s,i,g))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var c=zt(),p=Lr(i),g=Jn(c,p);g.tag=2,s!=null&&(g.callback=s),s=Nr(i,g,p),s!==null&&(Cn(s,i,p,c),Ha(s,i,p))}};function Kv(i,s,c,p,g,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,v,S):s.prototype&&s.prototype.isPureReactComponent?!ks(c,p)||!ks(g,v):!0}function Jv(i,s,c){var p=!1,g=Ir,v=s.contextType;return typeof v=="object"&&v!==null?v=ln(v):(g=Wt(s)?ri:Rt.current,p=s.contextTypes,v=(p=p!=null)?eo(i,g):Ir),s=new s(c,v),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=$a,i.stateNode=s,s._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=v),s}function Yv(i,s,c,p){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,p),s.state!==i&&$a.enqueueReplaceState(s,s.state,null)}function Hf(i,s,c,p){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs=Gv,Uf(i);var v=s.contextType;typeof v=="object"&&v!==null?g.context=ln(v):(v=Wt(s)?ri:Rt.current,g.context=eo(i,v)),g.state=i.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Wf(i,s,v,c),g.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&$a.enqueueReplaceState(g,g.state,null),Va(i,c,g,p),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function Ts(i,s,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,i));var g=p,v=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(S){var I=g.refs;I===Gv&&(I=g.refs={}),S===null?delete I[v]:I[v]=S},s._stringRef=v,s)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function Ga(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function Qv(i){var s=i._init;return s(i._payload)}function Zv(i){function s(R,N){if(i){var L=R.deletions;L===null?(R.deletions=[N],R.flags|=16):L.push(N)}}function c(R,N){if(!i)return null;for(;N!==null;)s(R,N),N=N.sibling;return null}function p(R,N){for(R=new Map;N!==null;)N.key!==null?R.set(N.key,N):R.set(N.index,N),N=N.sibling;return R}function g(R,N){return R=Pr(R,N),R.index=0,R.sibling=null,R}function v(R,N,L){return R.index=L,i?(L=R.alternate,L!==null?(L=L.index,L<N?(R.flags|=2,N):L):(R.flags|=2,N)):(R.flags|=1048576,N)}function S(R){return i&&R.alternate===null&&(R.flags|=2),R}function I(R,N,L,J){return N===null||N.tag!==6?(N=Ip(L,R.mode,J),N.return=R,N):(N=g(N,L),N.return=R,N)}function A(R,N,L,J){var ue=L.type;return ue===Y?H(R,N,L.props.children,J,L.key):N!==null&&(N.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===se&&Qv(ue)===N.type)?(J=g(N,L.props),J.ref=Ts(R,N,L),J.return=R,J):(J=du(L.type,L.key,L.props,null,R.mode,J),J.ref=Ts(R,N,L),J.return=R,J)}function D(R,N,L,J){return N===null||N.tag!==4||N.stateNode.containerInfo!==L.containerInfo||N.stateNode.implementation!==L.implementation?(N=Tp(L,R.mode,J),N.return=R,N):(N=g(N,L.children||[]),N.return=R,N)}function H(R,N,L,J,ue){return N===null||N.tag!==7?(N=pi(L,R.mode,J,ue),N.return=R,N):(N=g(N,L),N.return=R,N)}function G(R,N,L){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Ip(""+N,R.mode,L),N.return=R,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case F:return L=du(N.type,N.key,N.props,null,R.mode,L),L.ref=Ts(R,null,N),L.return=R,L;case z:return N=Tp(N,R.mode,L),N.return=R,N;case se:var J=N._init;return G(R,J(N._payload),L)}if(ts(N)||P(N))return N=pi(N,R.mode,L,null),N.return=R,N;Ga(R,N)}return null}function U(R,N,L,J){var ue=N!==null?N.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return ue!==null?null:I(R,N,""+L,J);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case F:return L.key===ue?A(R,N,L,J):null;case z:return L.key===ue?D(R,N,L,J):null;case se:return ue=L._init,U(R,N,ue(L._payload),J)}if(ts(L)||P(L))return ue!==null?null:H(R,N,L,J,null);Ga(R,L)}return null}function ee(R,N,L,J,ue){if(typeof J=="string"&&J!==""||typeof J=="number")return R=R.get(L)||null,I(N,R,""+J,ue);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case F:return R=R.get(J.key===null?L:J.key)||null,A(N,R,J,ue);case z:return R=R.get(J.key===null?L:J.key)||null,D(N,R,J,ue);case se:var ge=J._init;return ee(R,N,L,ge(J._payload),ue)}if(ts(J)||P(J))return R=R.get(L)||null,H(N,R,J,ue,null);Ga(N,J)}return null}function le(R,N,L,J){for(var ue=null,ge=null,ye=N,Se=N=0,St=null;ye!==null&&Se<L.length;Se++){ye.index>Se?(St=ye,ye=null):St=ye.sibling;var De=U(R,ye,L[Se],J);if(De===null){ye===null&&(ye=St);break}i&&ye&&De.alternate===null&&s(R,ye),N=v(De,N,Se),ge===null?ue=De:ge.sibling=De,ge=De,ye=St}if(Se===L.length)return c(R,ye),$e&&oi(R,Se),ue;if(ye===null){for(;Se<L.length;Se++)ye=G(R,L[Se],J),ye!==null&&(N=v(ye,N,Se),ge===null?ue=ye:ge.sibling=ye,ge=ye);return $e&&oi(R,Se),ue}for(ye=p(R,ye);Se<L.length;Se++)St=ee(ye,R,Se,L[Se],J),St!==null&&(i&&St.alternate!==null&&ye.delete(St.key===null?Se:St.key),N=v(St,N,Se),ge===null?ue=St:ge.sibling=St,ge=St);return i&&ye.forEach(function(_r){return s(R,_r)}),$e&&oi(R,Se),ue}function ae(R,N,L,J){var ue=P(L);if(typeof ue!="function")throw Error(t(150));if(L=ue.call(L),L==null)throw Error(t(151));for(var ge=ue=null,ye=N,Se=N=0,St=null,De=L.next();ye!==null&&!De.done;Se++,De=L.next()){ye.index>Se?(St=ye,ye=null):St=ye.sibling;var _r=U(R,ye,De.value,J);if(_r===null){ye===null&&(ye=St);break}i&&ye&&_r.alternate===null&&s(R,ye),N=v(_r,N,Se),ge===null?ue=_r:ge.sibling=_r,ge=_r,ye=St}if(De.done)return c(R,ye),$e&&oi(R,Se),ue;if(ye===null){for(;!De.done;Se++,De=L.next())De=G(R,De.value,J),De!==null&&(N=v(De,N,Se),ge===null?ue=De:ge.sibling=De,ge=De);return $e&&oi(R,Se),ue}for(ye=p(R,ye);!De.done;Se++,De=L.next())De=ee(ye,R,Se,De.value,J),De!==null&&(i&&De.alternate!==null&&ye.delete(De.key===null?Se:De.key),N=v(De,N,Se),ge===null?ue=De:ge.sibling=De,ge=De);return i&&ye.forEach(function(jM){return s(R,jM)}),$e&&oi(R,Se),ue}function nt(R,N,L,J){if(typeof L=="object"&&L!==null&&L.type===Y&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case F:e:{for(var ue=L.key,ge=N;ge!==null;){if(ge.key===ue){if(ue=L.type,ue===Y){if(ge.tag===7){c(R,ge.sibling),N=g(ge,L.props.children),N.return=R,R=N;break e}}else if(ge.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===se&&Qv(ue)===ge.type){c(R,ge.sibling),N=g(ge,L.props),N.ref=Ts(R,ge,L),N.return=R,R=N;break e}c(R,ge);break}else s(R,ge);ge=ge.sibling}L.type===Y?(N=pi(L.props.children,R.mode,J,L.key),N.return=R,R=N):(J=du(L.type,L.key,L.props,null,R.mode,J),J.ref=Ts(R,N,L),J.return=R,R=J)}return S(R);case z:e:{for(ge=L.key;N!==null;){if(N.key===ge)if(N.tag===4&&N.stateNode.containerInfo===L.containerInfo&&N.stateNode.implementation===L.implementation){c(R,N.sibling),N=g(N,L.children||[]),N.return=R,R=N;break e}else{c(R,N);break}else s(R,N);N=N.sibling}N=Tp(L,R.mode,J),N.return=R,R=N}return S(R);case se:return ge=L._init,nt(R,N,ge(L._payload),J)}if(ts(L))return le(R,N,L,J);if(P(L))return ae(R,N,L,J);Ga(R,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,N!==null&&N.tag===6?(c(R,N.sibling),N=g(N,L),N.return=R,R=N):(c(R,N),N=Ip(L,R.mode,J),N.return=R,R=N),S(R)):c(R,N)}return nt}var so=Zv(!0),qv=Zv(!1),As={},Ln=Er(As),Ns=Er(As),Ms=Er(As);function li(i){if(i===As)throw Error(t(174));return i}function Vf(i,s){switch(Be(Ms,s),Be(Ns,i),Be(Ln,As),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Wd(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=Wd(s,i)}He(Ln),Be(Ln,s)}function lo(){He(Ln),He(Ns),He(Ms)}function Xv(i){li(Ms.current);var s=li(Ln.current),c=Wd(s,i.type);s!==c&&(Be(Ns,i),Be(Ln,c))}function $f(i){Ns.current===i&&(He(Ln),He(Ns))}var Ke=Er(0);function Ka(i){for(var s=i;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Gf=[];function Kf(){for(var i=0;i<Gf.length;i++)Gf[i]._workInProgressVersionPrimary=null;Gf.length=0}var Ja=_.ReactCurrentDispatcher,Jf=_.ReactCurrentBatchConfig,ai=0,Je=null,dt=null,wt=null,Ya=!1,Rs=!1,Os=0,aM=0;function Ot(){throw Error(t(321))}function Yf(i,s){if(s===null)return!1;for(var c=0;c<s.length&&c<i.length;c++)if(!vn(i[c],s[c]))return!1;return!0}function Qf(i,s,c,p,g,v){if(ai=v,Je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ja.current=i===null||i.memoizedState===null?fM:pM,i=c(p,g),Rs){v=0;do{if(Rs=!1,Os=0,25<=v)throw Error(t(301));v+=1,wt=dt=null,s.updateQueue=null,Ja.current=hM,i=c(p,g)}while(Rs)}if(Ja.current=qa,s=dt!==null&&dt.next!==null,ai=0,wt=dt=Je=null,Ya=!1,s)throw Error(t(300));return i}function Zf(){var i=Os!==0;return Os=0,i}function Dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Je.memoizedState=wt=i:wt=wt.next=i,wt}function an(){if(dt===null){var i=Je.alternate;i=i!==null?i.memoizedState:null}else i=dt.next;var s=wt===null?Je.memoizedState:wt.next;if(s!==null)wt=s,dt=i;else{if(i===null)throw Error(t(310));dt=i,i={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},wt===null?Je.memoizedState=wt=i:wt=wt.next=i}return wt}function Ls(i,s){return typeof s=="function"?s(i):s}function qf(i){var s=an(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var p=dt,g=p.baseQueue,v=c.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}p.baseQueue=g=v,c.pending=null}if(g!==null){v=g.next,p=p.baseState;var I=S=null,A=null,D=v;do{var H=D.lane;if((ai&H)===H)A!==null&&(A=A.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),p=D.hasEagerState?D.eagerState:i(p,D.action);else{var G={lane:H,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};A===null?(I=A=G,S=p):A=A.next=G,Je.lanes|=H,ui|=H}D=D.next}while(D!==null&&D!==v);A===null?S=p:A.next=I,vn(p,s.memoizedState)||(Ht=!0),s.memoizedState=p,s.baseState=S,s.baseQueue=A,c.lastRenderedState=p}if(i=c.interleaved,i!==null){g=i;do v=g.lane,Je.lanes|=v,ui|=v,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function Xf(i){var s=an(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var p=c.dispatch,g=c.pending,v=s.memoizedState;if(g!==null){c.pending=null;var S=g=g.next;do v=i(v,S.action),S=S.next;while(S!==g);vn(v,s.memoizedState)||(Ht=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),c.lastRenderedState=v}return[v,p]}function ew(){}function tw(i,s){var c=Je,p=an(),g=s(),v=!vn(p.memoizedState,g);if(v&&(p.memoizedState=g,Ht=!0),p=p.queue,ep(iw.bind(null,c,p,i),[i]),p.getSnapshot!==s||v||wt!==null&&wt.memoizedState.tag&1){if(c.flags|=2048,Ds(9,rw.bind(null,c,p,g,s),void 0,null),kt===null)throw Error(t(349));ai&30||nw(c,s,g)}return g}function nw(i,s,c){i.flags|=16384,i={getSnapshot:s,value:c},s=Je.updateQueue,s===null?(s={lastEffect:null,stores:null},Je.updateQueue=s,s.stores=[i]):(c=s.stores,c===null?s.stores=[i]:c.push(i))}function rw(i,s,c,p){s.value=c,s.getSnapshot=p,ow(s)&&sw(i)}function iw(i,s,c){return c(function(){ow(s)&&sw(i)})}function ow(i){var s=i.getSnapshot;i=i.value;try{var c=s();return!vn(i,c)}catch{return!0}}function sw(i){var s=Kn(i,1);s!==null&&Cn(s,i,1,-1)}function lw(i){var s=Dn();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:i},s.queue=i,i=i.dispatch=dM.bind(null,Je,i),[s.memoizedState,i]}function Ds(i,s,c,p){return i={tag:i,create:s,destroy:c,deps:p,next:null},s=Je.updateQueue,s===null?(s={lastEffect:null,stores:null},Je.updateQueue=s,s.lastEffect=i.next=i):(c=s.lastEffect,c===null?s.lastEffect=i.next=i:(p=c.next,c.next=i,i.next=p,s.lastEffect=i)),i}function aw(){return an().memoizedState}function Qa(i,s,c,p){var g=Dn();Je.flags|=i,g.memoizedState=Ds(1|s,c,void 0,p===void 0?null:p)}function Za(i,s,c,p){var g=an();p=p===void 0?null:p;var v=void 0;if(dt!==null){var S=dt.memoizedState;if(v=S.destroy,p!==null&&Yf(p,S.deps)){g.memoizedState=Ds(s,c,v,p);return}}Je.flags|=i,g.memoizedState=Ds(1|s,c,v,p)}function uw(i,s){return Qa(8390656,8,i,s)}function ep(i,s){return Za(2048,8,i,s)}function cw(i,s){return Za(4,2,i,s)}function dw(i,s){return Za(4,4,i,s)}function fw(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function pw(i,s,c){return c=c!=null?c.concat([i]):null,Za(4,4,fw.bind(null,s,i),c)}function tp(){}function hw(i,s){var c=an();s=s===void 0?null:s;var p=c.memoizedState;return p!==null&&s!==null&&Yf(s,p[1])?p[0]:(c.memoizedState=[i,s],i)}function mw(i,s){var c=an();s=s===void 0?null:s;var p=c.memoizedState;return p!==null&&s!==null&&Yf(s,p[1])?p[0]:(i=i(),c.memoizedState=[i,s],i)}function gw(i,s,c){return ai&21?(vn(c,s)||(c=W0(),Je.lanes|=c,ui|=c,i.baseState=!0),s):(i.baseState&&(i.baseState=!1,Ht=!0),i.memoizedState=c)}function uM(i,s){var c=_e;_e=c!==0&&4>c?c:4,i(!0);var p=Jf.transition;Jf.transition={};try{i(!1),s()}finally{_e=c,Jf.transition=p}}function yw(){return an().memoizedState}function cM(i,s,c){var p=Lr(i);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},vw(i))ww(s,c);else if(c=Wv(i,s,c,p),c!==null){var g=zt();Cn(c,i,p,g),kw(c,s,p)}}function dM(i,s,c){var p=Lr(i),g={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(vw(i))ww(s,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,I=v(S,c);if(g.hasEagerState=!0,g.eagerState=I,vn(I,S)){var A=s.interleaved;A===null?(g.next=g,jf(s)):(g.next=A.next,A.next=g),s.interleaved=g;return}}catch{}finally{}c=Wv(i,s,g,p),c!==null&&(g=zt(),Cn(c,i,p,g),kw(c,s,p))}}function vw(i){var s=i.alternate;return i===Je||s!==null&&s===Je}function ww(i,s){Rs=Ya=!0;var c=i.pending;c===null?s.next=s:(s.next=c.next,c.next=s),i.pending=s}function kw(i,s,c){if(c&4194240){var p=s.lanes;p&=i.pendingLanes,c|=p,s.lanes=c,ef(i,c)}}var qa={readContext:ln,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},fM={readContext:ln,useCallback:function(i,s){return Dn().memoizedState=[i,s===void 0?null:s],i},useContext:ln,useEffect:uw,useImperativeHandle:function(i,s,c){return c=c!=null?c.concat([i]):null,Qa(4194308,4,fw.bind(null,s,i),c)},useLayoutEffect:function(i,s){return Qa(4194308,4,i,s)},useInsertionEffect:function(i,s){return Qa(4,2,i,s)},useMemo:function(i,s){var c=Dn();return s=s===void 0?null:s,i=i(),c.memoizedState=[i,s],i},useReducer:function(i,s,c){var p=Dn();return s=c!==void 0?c(s):s,p.memoizedState=p.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},p.queue=i,i=i.dispatch=cM.bind(null,Je,i),[p.memoizedState,i]},useRef:function(i){var s=Dn();return i={current:i},s.memoizedState=i},useState:lw,useDebugValue:tp,useDeferredValue:function(i){return Dn().memoizedState=i},useTransition:function(){var i=lw(!1),s=i[0];return i=uM.bind(null,i[1]),Dn().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,c){var p=Je,g=Dn();if($e){if(c===void 0)throw Error(t(407));c=c()}else{if(c=s(),kt===null)throw Error(t(349));ai&30||nw(p,s,c)}g.memoizedState=c;var v={value:c,getSnapshot:s};return g.queue=v,uw(iw.bind(null,p,v,i),[i]),p.flags|=2048,Ds(9,rw.bind(null,p,v,c,s),void 0,null),c},useId:function(){var i=Dn(),s=kt.identifierPrefix;if($e){var c=Gn,p=$n;c=(p&~(1<<32-yn(p)-1)).toString(32)+c,s=":"+s+"R"+c,c=Os++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=aM++,s=":"+s+"r"+c.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},pM={readContext:ln,useCallback:hw,useContext:ln,useEffect:ep,useImperativeHandle:pw,useInsertionEffect:cw,useLayoutEffect:dw,useMemo:mw,useReducer:qf,useRef:aw,useState:function(){return qf(Ls)},useDebugValue:tp,useDeferredValue:function(i){var s=an();return gw(s,dt.memoizedState,i)},useTransition:function(){var i=qf(Ls)[0],s=an().memoizedState;return[i,s]},useMutableSource:ew,useSyncExternalStore:tw,useId:yw,unstable_isNewReconciler:!1},hM={readContext:ln,useCallback:hw,useContext:ln,useEffect:ep,useImperativeHandle:pw,useInsertionEffect:cw,useLayoutEffect:dw,useMemo:mw,useReducer:Xf,useRef:aw,useState:function(){return Xf(Ls)},useDebugValue:tp,useDeferredValue:function(i){var s=an();return dt===null?s.memoizedState=i:gw(s,dt.memoizedState,i)},useTransition:function(){var i=Xf(Ls)[0],s=an().memoizedState;return[i,s]},useMutableSource:ew,useSyncExternalStore:tw,useId:yw,unstable_isNewReconciler:!1};function ao(i,s){try{var c="",p=s;do c+=we(p),p=p.return;while(p);var g=c}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:s,stack:g,digest:null}}function np(i,s,c){return{value:i,source:null,stack:c??null,digest:s??null}}function rp(i,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var mM=typeof WeakMap=="function"?WeakMap:Map;function Sw(i,s,c){c=Jn(-1,c),c.tag=3,c.payload={element:null};var p=s.value;return c.callback=function(){ou||(ou=!0,vp=p),rp(i,s)},c}function xw(i,s,c){c=Jn(-1,c),c.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var g=s.value;c.payload=function(){return p(g)},c.callback=function(){rp(i,s)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(c.callback=function(){rp(i,s),typeof p!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),c}function Cw(i,s,c){var p=i.pingCache;if(p===null){p=i.pingCache=new mM;var g=new Set;p.set(s,g)}else g=p.get(s),g===void 0&&(g=new Set,p.set(s,g));g.has(c)||(g.add(c),i=NM.bind(null,i,s,c),s.then(i,i))}function bw(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function Ew(i,s,c,p,g){return i.mode&1?(i.flags|=65536,i.lanes=g,i):(i===s?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=Jn(-1,1),s.tag=2,Nr(c,s,1))),c.lanes|=1),i)}var gM=_.ReactCurrentOwner,Ht=!1;function Ft(i,s,c,p){s.child=i===null?qv(s,null,c,p):so(s,i.child,c,p)}function Iw(i,s,c,p,g){c=c.render;var v=s.ref;return oo(s,g),p=Qf(i,s,c,p,v,g),c=Zf(),i!==null&&!Ht?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~g,Yn(i,s,g)):($e&&c&&Rf(s),s.flags|=1,Ft(i,s,p,g),s.child)}function Tw(i,s,c,p,g){if(i===null){var v=c.type;return typeof v=="function"&&!Ep(v)&&v.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=v,Aw(i,s,v,p,g)):(i=du(c.type,null,p,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(v=i.child,!(i.lanes&g)){var S=v.memoizedProps;if(c=c.compare,c=c!==null?c:ks,c(S,p)&&i.ref===s.ref)return Yn(i,s,g)}return s.flags|=1,i=Pr(v,p),i.ref=s.ref,i.return=s,s.child=i}function Aw(i,s,c,p,g){if(i!==null){var v=i.memoizedProps;if(ks(v,p)&&i.ref===s.ref)if(Ht=!1,s.pendingProps=p=v,(i.lanes&g)!==0)i.flags&131072&&(Ht=!0);else return s.lanes=i.lanes,Yn(i,s,g)}return ip(i,s,c,p,g)}function Nw(i,s,c){var p=s.pendingProps,g=p.children,v=i!==null?i.memoizedState:null;if(p.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(co,en),en|=c;else{if(!(c&1073741824))return i=v!==null?v.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,Be(co,en),en|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:c,Be(co,en),en|=p}else v!==null?(p=v.baseLanes|c,s.memoizedState=null):p=c,Be(co,en),en|=p;return Ft(i,s,g,c),s.child}function Mw(i,s){var c=s.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function ip(i,s,c,p,g){var v=Wt(c)?ri:Rt.current;return v=eo(s,v),oo(s,g),c=Qf(i,s,c,p,v,g),p=Zf(),i!==null&&!Ht?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~g,Yn(i,s,g)):($e&&p&&Rf(s),s.flags|=1,Ft(i,s,c,g),s.child)}function Rw(i,s,c,p,g){if(Wt(c)){var v=!0;_a(s)}else v=!1;if(oo(s,g),s.stateNode===null)eu(i,s),Jv(s,c,p),Hf(s,c,p,g),p=!0;else if(i===null){var S=s.stateNode,I=s.memoizedProps;S.props=I;var A=S.context,D=c.contextType;typeof D=="object"&&D!==null?D=ln(D):(D=Wt(c)?ri:Rt.current,D=eo(s,D));var H=c.getDerivedStateFromProps,G=typeof H=="function"||typeof S.getSnapshotBeforeUpdate=="function";G||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(I!==p||A!==D)&&Yv(s,S,p,D),Ar=!1;var U=s.memoizedState;S.state=U,Va(s,p,S,g),A=s.memoizedState,I!==p||U!==A||Ut.current||Ar?(typeof H=="function"&&(Wf(s,c,H,p),A=s.memoizedState),(I=Ar||Kv(s,c,I,p,U,A,D))?(G||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=A),S.props=p,S.state=A,S.context=D,p=I):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{S=s.stateNode,Hv(i,s),I=s.memoizedProps,D=s.type===s.elementType?I:kn(s.type,I),S.props=D,G=s.pendingProps,U=S.context,A=c.contextType,typeof A=="object"&&A!==null?A=ln(A):(A=Wt(c)?ri:Rt.current,A=eo(s,A));var ee=c.getDerivedStateFromProps;(H=typeof ee=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(I!==G||U!==A)&&Yv(s,S,p,A),Ar=!1,U=s.memoizedState,S.state=U,Va(s,p,S,g);var le=s.memoizedState;I!==G||U!==le||Ut.current||Ar?(typeof ee=="function"&&(Wf(s,c,ee,p),le=s.memoizedState),(D=Ar||Kv(s,c,D,p,U,le,A)||!1)?(H||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,le,A),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,le,A)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||I===i.memoizedProps&&U===i.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||I===i.memoizedProps&&U===i.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=le),S.props=p,S.state=le,S.context=A,p=D):(typeof S.componentDidUpdate!="function"||I===i.memoizedProps&&U===i.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||I===i.memoizedProps&&U===i.memoizedState||(s.flags|=1024),p=!1)}return op(i,s,c,p,v,g)}function op(i,s,c,p,g,v){Mw(i,s);var S=(s.flags&128)!==0;if(!p&&!S)return g&&Pv(s,c,!1),Yn(i,s,v);p=s.stateNode,gM.current=s;var I=S&&typeof c.getDerivedStateFromError!="function"?null:p.render();return s.flags|=1,i!==null&&S?(s.child=so(s,i.child,null,v),s.child=so(s,null,I,v)):Ft(i,s,I,v),s.memoizedState=p.state,g&&Pv(s,c,!0),s.child}function Ow(i){var s=i.stateNode;s.pendingContext?Lv(i,s.pendingContext,s.pendingContext!==s.context):s.context&&Lv(i,s.context,!1),Vf(i,s.containerInfo)}function Lw(i,s,c,p,g){return ro(),Pf(g),s.flags|=256,Ft(i,s,c,p),s.child}var sp={dehydrated:null,treeContext:null,retryLane:0};function lp(i){return{baseLanes:i,cachePool:null,transitions:null}}function Dw(i,s,c){var p=s.pendingProps,g=Ke.current,v=!1,S=(s.flags&128)!==0,I;if((I=S)||(I=i!==null&&i.memoizedState===null?!1:(g&2)!==0),I?(v=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Be(Ke,g&1),i===null)return Df(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(s.mode&1?i.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(S=p.children,i=p.fallback,v?(p=s.mode,v=s.child,S={mode:"hidden",children:S},!(p&1)&&v!==null?(v.childLanes=0,v.pendingProps=S):v=fu(S,p,0,null),i=pi(i,p,c,null),v.return=s,i.return=s,v.sibling=i,s.child=v,s.child.memoizedState=lp(c),s.memoizedState=sp,i):ap(s,S));if(g=i.memoizedState,g!==null&&(I=g.dehydrated,I!==null))return yM(i,s,S,p,I,g,c);if(v){v=p.fallback,S=s.mode,g=i.child,I=g.sibling;var A={mode:"hidden",children:p.children};return!(S&1)&&s.child!==g?(p=s.child,p.childLanes=0,p.pendingProps=A,s.deletions=null):(p=Pr(g,A),p.subtreeFlags=g.subtreeFlags&14680064),I!==null?v=Pr(I,v):(v=pi(v,S,c,null),v.flags|=2),v.return=s,p.return=s,p.sibling=v,s.child=p,p=v,v=s.child,S=i.child.memoizedState,S=S===null?lp(c):{baseLanes:S.baseLanes|c,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=i.childLanes&~c,s.memoizedState=sp,p}return v=i.child,i=v.sibling,p=Pr(v,{mode:"visible",children:p.children}),!(s.mode&1)&&(p.lanes=c),p.return=s,p.sibling=null,i!==null&&(c=s.deletions,c===null?(s.deletions=[i],s.flags|=16):c.push(i)),s.child=p,s.memoizedState=null,p}function ap(i,s){return s=fu({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function Xa(i,s,c,p){return p!==null&&Pf(p),so(s,i.child,null,c),i=ap(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function yM(i,s,c,p,g,v,S){if(c)return s.flags&256?(s.flags&=-257,p=np(Error(t(422))),Xa(i,s,S,p)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(v=p.fallback,g=s.mode,p=fu({mode:"visible",children:p.children},g,0,null),v=pi(v,g,S,null),v.flags|=2,p.return=s,v.return=s,p.sibling=v,s.child=p,s.mode&1&&so(s,i.child,null,S),s.child.memoizedState=lp(S),s.memoizedState=sp,v);if(!(s.mode&1))return Xa(i,s,S,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var I=p.dgst;return p=I,v=Error(t(419)),p=np(v,p,void 0),Xa(i,s,S,p)}if(I=(S&i.childLanes)!==0,Ht||I){if(p=kt,p!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(p.suspendedLanes|S)?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,Kn(i,g),Cn(p,i,g,-1))}return bp(),p=np(Error(t(421))),Xa(i,s,S,p)}return g.data==="$?"?(s.flags|=128,s.child=i.child,s=MM.bind(null,i),g._reactRetry=s,null):(i=v.treeContext,Xt=br(g.nextSibling),qt=s,$e=!0,wn=null,i!==null&&(on[sn++]=$n,on[sn++]=Gn,on[sn++]=ii,$n=i.id,Gn=i.overflow,ii=s),s=ap(s,p.children),s.flags|=4096,s)}function Pw(i,s,c){i.lanes|=s;var p=i.alternate;p!==null&&(p.lanes|=s),Bf(i.return,s,c)}function up(i,s,c,p,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=c,v.tailMode=g)}function _w(i,s,c){var p=s.pendingProps,g=p.revealOrder,v=p.tail;if(Ft(i,s,p.children,c),p=Ke.current,p&2)p=p&1|2,s.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Pw(i,c,s);else if(i.tag===19)Pw(i,c,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Be(Ke,p),!(s.mode&1))s.memoizedState=null;else switch(g){case"forwards":for(c=s.child,g=null;c!==null;)i=c.alternate,i!==null&&Ka(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=s.child,s.child=null):(g=c.sibling,c.sibling=null),up(s,!1,g,c,v);break;case"backwards":for(c=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&Ka(i)===null){s.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}up(s,!0,c,null,v);break;case"together":up(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function eu(i,s){!(s.mode&1)&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function Yn(i,s,c){if(i!==null&&(s.dependencies=i.dependencies),ui|=s.lanes,!(c&s.childLanes))return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,c=Pr(i,i.pendingProps),s.child=c,c.return=s;i.sibling!==null;)i=i.sibling,c=c.sibling=Pr(i,i.pendingProps),c.return=s;c.sibling=null}return s.child}function vM(i,s,c){switch(s.tag){case 3:Ow(s),ro();break;case 5:Xv(s);break;case 1:Wt(s.type)&&_a(s);break;case 4:Vf(s,s.stateNode.containerInfo);break;case 10:var p=s.type._context,g=s.memoizedProps.value;Be(Ua,p._currentValue),p._currentValue=g;break;case 13:if(p=s.memoizedState,p!==null)return p.dehydrated!==null?(Be(Ke,Ke.current&1),s.flags|=128,null):c&s.child.childLanes?Dw(i,s,c):(Be(Ke,Ke.current&1),i=Yn(i,s,c),i!==null?i.sibling:null);Be(Ke,Ke.current&1);break;case 19:if(p=(c&s.childLanes)!==0,i.flags&128){if(p)return _w(i,s,c);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Be(Ke,Ke.current),p)break;return null;case 22:case 23:return s.lanes=0,Nw(i,s,c)}return Yn(i,s,c)}var Fw,cp,zw,Bw;Fw=function(i,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},cp=function(){},zw=function(i,s,c,p){var g=i.memoizedProps;if(g!==p){i=s.stateNode,li(Ln.current);var v=null;switch(c){case"input":g=Ge(i,g),p=Ge(i,p),v=[];break;case"select":g=C({},g,{value:void 0}),p=C({},p,{value:void 0}),v=[];break;case"textarea":g=Ud(i,g),p=Ud(i,p),v=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=La)}Hd(c,p);var S;c=null;for(D in g)if(!p.hasOwnProperty(D)&&g.hasOwnProperty(D)&&g[D]!=null)if(D==="style"){var I=g[D];for(S in I)I.hasOwnProperty(S)&&(c||(c={}),c[S]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(o.hasOwnProperty(D)?v||(v=[]):(v=v||[]).push(D,null));for(D in p){var A=p[D];if(I=g!=null?g[D]:void 0,p.hasOwnProperty(D)&&A!==I&&(A!=null||I!=null))if(D==="style")if(I){for(S in I)!I.hasOwnProperty(S)||A&&A.hasOwnProperty(S)||(c||(c={}),c[S]="");for(S in A)A.hasOwnProperty(S)&&I[S]!==A[S]&&(c||(c={}),c[S]=A[S])}else c||(v||(v=[]),v.push(D,c)),c=A;else D==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,I=I?I.__html:void 0,A!=null&&I!==A&&(v=v||[]).push(D,A)):D==="children"?typeof A!="string"&&typeof A!="number"||(v=v||[]).push(D,""+A):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(o.hasOwnProperty(D)?(A!=null&&D==="onScroll"&&We("scroll",i),v||I===A||(v=[])):(v=v||[]).push(D,A))}c&&(v=v||[]).push("style",c);var D=v;(s.updateQueue=D)&&(s.flags|=4)}},Bw=function(i,s,c,p){c!==p&&(s.flags|=4)};function Ps(i,s){if(!$e)switch(i.tailMode){case"hidden":s=i.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Lt(i){var s=i.alternate!==null&&i.alternate.child===i.child,c=0,p=0;if(s)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=p,i.childLanes=c,s}function wM(i,s,c){var p=s.pendingProps;switch(Of(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(s),null;case 1:return Wt(s.type)&&Pa(),Lt(s),null;case 3:return p=s.stateNode,lo(),He(Ut),He(Rt),Kf(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(ja(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,wn!==null&&(Sp(wn),wn=null))),cp(i,s),Lt(s),null;case 5:$f(s);var g=li(Ms.current);if(c=s.type,i!==null&&s.stateNode!=null)zw(i,s,c,p,g),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!p){if(s.stateNode===null)throw Error(t(166));return Lt(s),null}if(i=li(Ln.current),ja(s)){p=s.stateNode,c=s.type;var v=s.memoizedProps;switch(p[On]=s,p[Es]=v,i=(s.mode&1)!==0,c){case"dialog":We("cancel",p),We("close",p);break;case"iframe":case"object":case"embed":We("load",p);break;case"video":case"audio":for(g=0;g<xs.length;g++)We(xs[g],p);break;case"source":We("error",p);break;case"img":case"image":case"link":We("error",p),We("load",p);break;case"details":We("toggle",p);break;case"input":Ui(p,v),We("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},We("invalid",p);break;case"textarea":S0(p,v),We("invalid",p)}Hd(c,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var I=v[S];S==="children"?typeof I=="string"?p.textContent!==I&&(v.suppressHydrationWarning!==!0&&Oa(p.textContent,I,i),g=["children",I]):typeof I=="number"&&p.textContent!==""+I&&(v.suppressHydrationWarning!==!0&&Oa(p.textContent,I,i),g=["children",""+I]):o.hasOwnProperty(S)&&I!=null&&S==="onScroll"&&We("scroll",p)}switch(c){case"input":Te(p),k0(p,v,!0);break;case"textarea":Te(p),C0(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=La)}p=g,s.updateQueue=p,p!==null&&(s.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=b0(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=S.createElement(c,{is:p.is}):(i=S.createElement(c),c==="select"&&(S=i,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):i=S.createElementNS(i,c),i[On]=s,i[Es]=p,Fw(i,s,!1,!1),s.stateNode=i;e:{switch(S=Vd(c,p),c){case"dialog":We("cancel",i),We("close",i),g=p;break;case"iframe":case"object":case"embed":We("load",i),g=p;break;case"video":case"audio":for(g=0;g<xs.length;g++)We(xs[g],i);g=p;break;case"source":We("error",i),g=p;break;case"img":case"image":case"link":We("error",i),We("load",i),g=p;break;case"details":We("toggle",i),g=p;break;case"input":Ui(i,p),g=Ge(i,p),We("invalid",i);break;case"option":g=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},g=C({},p,{value:void 0}),We("invalid",i);break;case"textarea":S0(i,p),g=Ud(i,p),We("invalid",i);break;default:g=p}Hd(c,g),I=g;for(v in I)if(I.hasOwnProperty(v)){var A=I[v];v==="style"?T0(i,A):v==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&E0(i,A)):v==="children"?typeof A=="string"?(c!=="textarea"||A!=="")&&ns(i,A):typeof A=="number"&&ns(i,""+A):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?A!=null&&v==="onScroll"&&We("scroll",i):A!=null&&M(i,v,A,S))}switch(c){case"input":Te(i),k0(i,p,!1);break;case"textarea":Te(i),C0(i);break;case"option":p.value!=null&&i.setAttribute("value",""+me(p.value));break;case"select":i.multiple=!!p.multiple,v=p.value,v!=null?Wi(i,!!p.multiple,v,!1):p.defaultValue!=null&&Wi(i,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=La)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Lt(s),null;case 6:if(i&&s.stateNode!=null)Bw(i,s,i.memoizedProps,p);else{if(typeof p!="string"&&s.stateNode===null)throw Error(t(166));if(c=li(Ms.current),li(Ln.current),ja(s)){if(p=s.stateNode,c=s.memoizedProps,p[On]=s,(v=p.nodeValue!==c)&&(i=qt,i!==null))switch(i.tag){case 3:Oa(p.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Oa(p.nodeValue,c,(i.mode&1)!==0)}v&&(s.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[On]=s,s.stateNode=p}return Lt(s),null;case 13:if(He(Ke),p=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if($e&&Xt!==null&&s.mode&1&&!(s.flags&128))Uv(),ro(),s.flags|=98560,v=!1;else if(v=ja(s),p!==null&&p.dehydrated!==null){if(i===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[On]=s}else ro(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Lt(s),v=!1}else wn!==null&&(Sp(wn),wn=null),v=!0;if(!v)return s.flags&65536?s:null}return s.flags&128?(s.lanes=c,s):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(s.child.flags|=8192,s.mode&1&&(i===null||Ke.current&1?ft===0&&(ft=3):bp())),s.updateQueue!==null&&(s.flags|=4),Lt(s),null);case 4:return lo(),cp(i,s),i===null&&Cs(s.stateNode.containerInfo),Lt(s),null;case 10:return zf(s.type._context),Lt(s),null;case 17:return Wt(s.type)&&Pa(),Lt(s),null;case 19:if(He(Ke),v=s.memoizedState,v===null)return Lt(s),null;if(p=(s.flags&128)!==0,S=v.rendering,S===null)if(p)Ps(v,!1);else{if(ft!==0||i!==null&&i.flags&128)for(i=s.child;i!==null;){if(S=Ka(i),S!==null){for(s.flags|=128,Ps(v,!1),p=S.updateQueue,p!==null&&(s.updateQueue=p,s.flags|=4),s.subtreeFlags=0,p=c,c=s.child;c!==null;)v=c,i=p,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,i=S.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return Be(Ke,Ke.current&1|2),s.child}i=i.sibling}v.tail!==null&&tt()>fo&&(s.flags|=128,p=!0,Ps(v,!1),s.lanes=4194304)}else{if(!p)if(i=Ka(S),i!==null){if(s.flags|=128,p=!0,c=i.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),Ps(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!$e)return Lt(s),null}else 2*tt()-v.renderingStartTime>fo&&c!==1073741824&&(s.flags|=128,p=!0,Ps(v,!1),s.lanes=4194304);v.isBackwards?(S.sibling=s.child,s.child=S):(c=v.last,c!==null?c.sibling=S:s.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=tt(),s.sibling=null,c=Ke.current,Be(Ke,p?c&1|2:c&1),s):(Lt(s),null);case 22:case 23:return Cp(),p=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(s.flags|=8192),p&&s.mode&1?en&1073741824&&(Lt(s),s.subtreeFlags&6&&(s.flags|=8192)):Lt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function kM(i,s){switch(Of(s),s.tag){case 1:return Wt(s.type)&&Pa(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return lo(),He(Ut),He(Rt),Kf(),i=s.flags,i&65536&&!(i&128)?(s.flags=i&-65537|128,s):null;case 5:return $f(s),null;case 13:if(He(Ke),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ro()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return He(Ke),null;case 4:return lo(),null;case 10:return zf(s.type._context),null;case 22:case 23:return Cp(),null;case 24:return null;default:return null}}var tu=!1,Dt=!1,SM=typeof WeakSet=="function"?WeakSet:Set,ie=null;function uo(i,s){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){Xe(i,s,p)}else c.current=null}function dp(i,s,c){try{c()}catch(p){Xe(i,s,p)}}var jw=!1;function xM(i,s){if(Cf=Sa,i=yv(),mf(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var g=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var S=0,I=-1,A=-1,D=0,H=0,G=i,U=null;t:for(;;){for(var ee;G!==c||g!==0&&G.nodeType!==3||(I=S+g),G!==v||p!==0&&G.nodeType!==3||(A=S+p),G.nodeType===3&&(S+=G.nodeValue.length),(ee=G.firstChild)!==null;)U=G,G=ee;for(;;){if(G===i)break t;if(U===c&&++D===g&&(I=S),U===v&&++H===p&&(A=S),(ee=G.nextSibling)!==null)break;G=U,U=G.parentNode}G=ee}c=I===-1||A===-1?null:{start:I,end:A}}else c=null}c=c||{start:0,end:0}}else c=null;for(bf={focusedElem:i,selectionRange:c},Sa=!1,ie=s;ie!==null;)if(s=ie,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,ie=i;else for(;ie!==null;){s=ie;try{var le=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ae=le.memoizedProps,nt=le.memoizedState,R=s.stateNode,N=R.getSnapshotBeforeUpdate(s.elementType===s.type?ae:kn(s.type,ae),nt);R.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var L=s.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){Xe(s,s.return,J)}if(i=s.sibling,i!==null){i.return=s.return,ie=i;break}ie=s.return}return le=jw,jw=!1,le}function _s(i,s,c){var p=s.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&i)===i){var v=g.destroy;g.destroy=void 0,v!==void 0&&dp(s,c,v)}g=g.next}while(g!==p)}}function nu(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&i)===i){var p=c.create;c.destroy=p()}c=c.next}while(c!==s)}}function fp(i){var s=i.ref;if(s!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof s=="function"?s(i):s.current=i}}function Uw(i){var s=i.alternate;s!==null&&(i.alternate=null,Uw(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[On],delete s[Es],delete s[Af],delete s[iM],delete s[oM])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Ww(i){return i.tag===5||i.tag===3||i.tag===4}function Hw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ww(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function pp(i,s,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(i,s):c.insertBefore(i,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(i,c)):(s=c,s.appendChild(i)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=La));else if(p!==4&&(i=i.child,i!==null))for(pp(i,s,c),i=i.sibling;i!==null;)pp(i,s,c),i=i.sibling}function hp(i,s,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?c.insertBefore(i,s):c.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(hp(i,s,c),i=i.sibling;i!==null;)hp(i,s,c),i=i.sibling}var Et=null,Sn=!1;function Mr(i,s,c){for(c=c.child;c!==null;)Vw(i,s,c),c=c.sibling}function Vw(i,s,c){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(ma,c)}catch{}switch(c.tag){case 5:Dt||uo(c,s);case 6:var p=Et,g=Sn;Et=null,Mr(i,s,c),Et=p,Sn=g,Et!==null&&(Sn?(i=Et,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):Et.removeChild(c.stateNode));break;case 18:Et!==null&&(Sn?(i=Et,c=c.stateNode,i.nodeType===8?Tf(i.parentNode,c):i.nodeType===1&&Tf(i,c),hs(i)):Tf(Et,c.stateNode));break;case 4:p=Et,g=Sn,Et=c.stateNode.containerInfo,Sn=!0,Mr(i,s,c),Et=p,Sn=g;break;case 0:case 11:case 14:case 15:if(!Dt&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&(v&2||v&4)&&dp(c,s,S),g=g.next}while(g!==p)}Mr(i,s,c);break;case 1:if(!Dt&&(uo(c,s),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(I){Xe(c,s,I)}Mr(i,s,c);break;case 21:Mr(i,s,c);break;case 22:c.mode&1?(Dt=(p=Dt)||c.memoizedState!==null,Mr(i,s,c),Dt=p):Mr(i,s,c);break;default:Mr(i,s,c)}}function $w(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new SM),s.forEach(function(p){var g=RM.bind(null,i,p);c.has(p)||(c.add(p),p.then(g,g))})}}function xn(i,s){var c=s.deletions;if(c!==null)for(var p=0;p<c.length;p++){var g=c[p];try{var v=i,S=s,I=S;e:for(;I!==null;){switch(I.tag){case 5:Et=I.stateNode,Sn=!1;break e;case 3:Et=I.stateNode.containerInfo,Sn=!0;break e;case 4:Et=I.stateNode.containerInfo,Sn=!0;break e}I=I.return}if(Et===null)throw Error(t(160));Vw(v,S,g),Et=null,Sn=!1;var A=g.alternate;A!==null&&(A.return=null),g.return=null}catch(D){Xe(g,s,D)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Gw(s,i),s=s.sibling}function Gw(i,s){var c=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(xn(s,i),Pn(i),p&4){try{_s(3,i,i.return),nu(3,i)}catch(ae){Xe(i,i.return,ae)}try{_s(5,i,i.return)}catch(ae){Xe(i,i.return,ae)}}break;case 1:xn(s,i),Pn(i),p&512&&c!==null&&uo(c,c.return);break;case 5:if(xn(s,i),Pn(i),p&512&&c!==null&&uo(c,c.return),i.flags&32){var g=i.stateNode;try{ns(g,"")}catch(ae){Xe(i,i.return,ae)}}if(p&4&&(g=i.stateNode,g!=null)){var v=i.memoizedProps,S=c!==null?c.memoizedProps:v,I=i.type,A=i.updateQueue;if(i.updateQueue=null,A!==null)try{I==="input"&&v.type==="radio"&&v.name!=null&&w0(g,v),Vd(I,S);var D=Vd(I,v);for(S=0;S<A.length;S+=2){var H=A[S],G=A[S+1];H==="style"?T0(g,G):H==="dangerouslySetInnerHTML"?E0(g,G):H==="children"?ns(g,G):M(g,H,G,D)}switch(I){case"input":Bd(g,v);break;case"textarea":x0(g,v);break;case"select":var U=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var ee=v.value;ee!=null?Wi(g,!!v.multiple,ee,!1):U!==!!v.multiple&&(v.defaultValue!=null?Wi(g,!!v.multiple,v.defaultValue,!0):Wi(g,!!v.multiple,v.multiple?[]:"",!1))}g[Es]=v}catch(ae){Xe(i,i.return,ae)}}break;case 6:if(xn(s,i),Pn(i),p&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,v=i.memoizedProps;try{g.nodeValue=v}catch(ae){Xe(i,i.return,ae)}}break;case 3:if(xn(s,i),Pn(i),p&4&&c!==null&&c.memoizedState.isDehydrated)try{hs(s.containerInfo)}catch(ae){Xe(i,i.return,ae)}break;case 4:xn(s,i),Pn(i);break;case 13:xn(s,i),Pn(i),g=i.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(yp=tt())),p&4&&$w(i);break;case 22:if(H=c!==null&&c.memoizedState!==null,i.mode&1?(Dt=(D=Dt)||H,xn(s,i),Dt=D):xn(s,i),Pn(i),p&8192){if(D=i.memoizedState!==null,(i.stateNode.isHidden=D)&&!H&&i.mode&1)for(ie=i,H=i.child;H!==null;){for(G=ie=H;ie!==null;){switch(U=ie,ee=U.child,U.tag){case 0:case 11:case 14:case 15:_s(4,U,U.return);break;case 1:uo(U,U.return);var le=U.stateNode;if(typeof le.componentWillUnmount=="function"){p=U,c=U.return;try{s=p,le.props=s.memoizedProps,le.state=s.memoizedState,le.componentWillUnmount()}catch(ae){Xe(p,c,ae)}}break;case 5:uo(U,U.return);break;case 22:if(U.memoizedState!==null){Yw(G);continue}}ee!==null?(ee.return=U,ie=ee):Yw(G)}H=H.sibling}e:for(H=null,G=i;;){if(G.tag===5){if(H===null){H=G;try{g=G.stateNode,D?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(I=G.stateNode,A=G.memoizedProps.style,S=A!=null&&A.hasOwnProperty("display")?A.display:null,I.style.display=I0("display",S))}catch(ae){Xe(i,i.return,ae)}}}else if(G.tag===6){if(H===null)try{G.stateNode.nodeValue=D?"":G.memoizedProps}catch(ae){Xe(i,i.return,ae)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===i)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===i)break e;for(;G.sibling===null;){if(G.return===null||G.return===i)break e;H===G&&(H=null),G=G.return}H===G&&(H=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:xn(s,i),Pn(i),p&4&&$w(i);break;case 21:break;default:xn(s,i),Pn(i)}}function Pn(i){var s=i.flags;if(s&2){try{e:{for(var c=i.return;c!==null;){if(Ww(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(ns(g,""),p.flags&=-33);var v=Hw(i);hp(i,v,g);break;case 3:case 4:var S=p.stateNode.containerInfo,I=Hw(i);pp(i,I,S);break;default:throw Error(t(161))}}catch(A){Xe(i,i.return,A)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function CM(i,s,c){ie=i,Kw(i)}function Kw(i,s,c){for(var p=(i.mode&1)!==0;ie!==null;){var g=ie,v=g.child;if(g.tag===22&&p){var S=g.memoizedState!==null||tu;if(!S){var I=g.alternate,A=I!==null&&I.memoizedState!==null||Dt;I=tu;var D=Dt;if(tu=S,(Dt=A)&&!D)for(ie=g;ie!==null;)S=ie,A=S.child,S.tag===22&&S.memoizedState!==null?Qw(g):A!==null?(A.return=S,ie=A):Qw(g);for(;v!==null;)ie=v,Kw(v),v=v.sibling;ie=g,tu=I,Dt=D}Jw(i)}else g.subtreeFlags&8772&&v!==null?(v.return=g,ie=v):Jw(i)}}function Jw(i){for(;ie!==null;){var s=ie;if(s.flags&8772){var c=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Dt||nu(5,s);break;case 1:var p=s.stateNode;if(s.flags&4&&!Dt)if(c===null)p.componentDidMount();else{var g=s.elementType===s.type?c.memoizedProps:kn(s.type,c.memoizedProps);p.componentDidUpdate(g,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&$v(s,v,p);break;case 3:var S=s.updateQueue;if(S!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}$v(s,S,c)}break;case 5:var I=s.stateNode;if(c===null&&s.flags&4){c=I;var A=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&c.focus();break;case"img":A.src&&(c.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var D=s.alternate;if(D!==null){var H=D.memoizedState;if(H!==null){var G=H.dehydrated;G!==null&&hs(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Dt||s.flags&512&&fp(s)}catch(U){Xe(s,s.return,U)}}if(s===i){ie=null;break}if(c=s.sibling,c!==null){c.return=s.return,ie=c;break}ie=s.return}}function Yw(i){for(;ie!==null;){var s=ie;if(s===i){ie=null;break}var c=s.sibling;if(c!==null){c.return=s.return,ie=c;break}ie=s.return}}function Qw(i){for(;ie!==null;){var s=ie;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{nu(4,s)}catch(A){Xe(s,c,A)}break;case 1:var p=s.stateNode;if(typeof p.componentDidMount=="function"){var g=s.return;try{p.componentDidMount()}catch(A){Xe(s,g,A)}}var v=s.return;try{fp(s)}catch(A){Xe(s,v,A)}break;case 5:var S=s.return;try{fp(s)}catch(A){Xe(s,S,A)}}}catch(A){Xe(s,s.return,A)}if(s===i){ie=null;break}var I=s.sibling;if(I!==null){I.return=s.return,ie=I;break}ie=s.return}}var bM=Math.ceil,ru=_.ReactCurrentDispatcher,mp=_.ReactCurrentOwner,un=_.ReactCurrentBatchConfig,Le=0,kt=null,lt=null,It=0,en=0,co=Er(0),ft=0,Fs=null,ui=0,iu=0,gp=0,zs=null,Vt=null,yp=0,fo=1/0,Qn=null,ou=!1,vp=null,Rr=null,su=!1,Or=null,lu=0,Bs=0,wp=null,au=-1,uu=0;function zt(){return Le&6?tt():au!==-1?au:au=tt()}function Lr(i){return i.mode&1?Le&2&&It!==0?It&-It:lM.transition!==null?(uu===0&&(uu=W0()),uu):(i=_e,i!==0||(i=window.event,i=i===void 0?16:Z0(i.type)),i):1}function Cn(i,s,c,p){if(50<Bs)throw Bs=0,wp=null,Error(t(185));us(i,c,p),(!(Le&2)||i!==kt)&&(i===kt&&(!(Le&2)&&(iu|=c),ft===4&&Dr(i,It)),$t(i,p),c===1&&Le===0&&!(s.mode&1)&&(fo=tt()+500,Fa&&Tr()))}function $t(i,s){var c=i.callbackNode;lN(i,s);var p=va(i,i===kt?It:0);if(p===0)c!==null&&B0(c),i.callbackNode=null,i.callbackPriority=0;else if(s=p&-p,i.callbackPriority!==s){if(c!=null&&B0(c),s===1)i.tag===0?sM(qw.bind(null,i)):_v(qw.bind(null,i)),nM(function(){!(Le&6)&&Tr()}),c=null;else{switch(H0(p)){case 1:c=Zd;break;case 4:c=j0;break;case 16:c=ha;break;case 536870912:c=U0;break;default:c=ha}c=s1(c,Zw.bind(null,i))}i.callbackPriority=s,i.callbackNode=c}}function Zw(i,s){if(au=-1,uu=0,Le&6)throw Error(t(327));var c=i.callbackNode;if(po()&&i.callbackNode!==c)return null;var p=va(i,i===kt?It:0);if(p===0)return null;if(p&30||p&i.expiredLanes||s)s=cu(i,p);else{s=p;var g=Le;Le|=2;var v=e1();(kt!==i||It!==s)&&(Qn=null,fo=tt()+500,di(i,s));do try{TM();break}catch(I){Xw(i,I)}while(!0);Ff(),ru.current=v,Le=g,lt!==null?s=0:(kt=null,It=0,s=ft)}if(s!==0){if(s===2&&(g=qd(i),g!==0&&(p=g,s=kp(i,g))),s===1)throw c=Fs,di(i,0),Dr(i,p),$t(i,tt()),c;if(s===6)Dr(i,p);else{if(g=i.current.alternate,!(p&30)&&!EM(g)&&(s=cu(i,p),s===2&&(v=qd(i),v!==0&&(p=v,s=kp(i,v))),s===1))throw c=Fs,di(i,0),Dr(i,p),$t(i,tt()),c;switch(i.finishedWork=g,i.finishedLanes=p,s){case 0:case 1:throw Error(t(345));case 2:fi(i,Vt,Qn);break;case 3:if(Dr(i,p),(p&130023424)===p&&(s=yp+500-tt(),10<s)){if(va(i,0)!==0)break;if(g=i.suspendedLanes,(g&p)!==p){zt(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=If(fi.bind(null,i,Vt,Qn),s);break}fi(i,Vt,Qn);break;case 4:if(Dr(i,p),(p&4194240)===p)break;for(s=i.eventTimes,g=-1;0<p;){var S=31-yn(p);v=1<<S,S=s[S],S>g&&(g=S),p&=~v}if(p=g,p=tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*bM(p/1960))-p,10<p){i.timeoutHandle=If(fi.bind(null,i,Vt,Qn),p);break}fi(i,Vt,Qn);break;case 5:fi(i,Vt,Qn);break;default:throw Error(t(329))}}}return $t(i,tt()),i.callbackNode===c?Zw.bind(null,i):null}function kp(i,s){var c=zs;return i.current.memoizedState.isDehydrated&&(di(i,s).flags|=256),i=cu(i,s),i!==2&&(s=Vt,Vt=c,s!==null&&Sp(s)),i}function Sp(i){Vt===null?Vt=i:Vt.push.apply(Vt,i)}function EM(i){for(var s=i;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var g=c[p],v=g.getSnapshot;g=g.value;try{if(!vn(v(),g))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Dr(i,s){for(s&=~gp,s&=~iu,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var c=31-yn(s),p=1<<c;i[c]=-1,s&=~p}}function qw(i){if(Le&6)throw Error(t(327));po();var s=va(i,0);if(!(s&1))return $t(i,tt()),null;var c=cu(i,s);if(i.tag!==0&&c===2){var p=qd(i);p!==0&&(s=p,c=kp(i,p))}if(c===1)throw c=Fs,di(i,0),Dr(i,s),$t(i,tt()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,fi(i,Vt,Qn),$t(i,tt()),null}function xp(i,s){var c=Le;Le|=1;try{return i(s)}finally{Le=c,Le===0&&(fo=tt()+500,Fa&&Tr())}}function ci(i){Or!==null&&Or.tag===0&&!(Le&6)&&po();var s=Le;Le|=1;var c=un.transition,p=_e;try{if(un.transition=null,_e=1,i)return i()}finally{_e=p,un.transition=c,Le=s,!(Le&6)&&Tr()}}function Cp(){en=co.current,He(co)}function di(i,s){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,tM(c)),lt!==null)for(c=lt.return;c!==null;){var p=c;switch(Of(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Pa();break;case 3:lo(),He(Ut),He(Rt),Kf();break;case 5:$f(p);break;case 4:lo();break;case 13:He(Ke);break;case 19:He(Ke);break;case 10:zf(p.type._context);break;case 22:case 23:Cp()}c=c.return}if(kt=i,lt=i=Pr(i.current,null),It=en=s,ft=0,Fs=null,gp=iu=ui=0,Vt=zs=null,si!==null){for(s=0;s<si.length;s++)if(c=si[s],p=c.interleaved,p!==null){c.interleaved=null;var g=p.next,v=c.pending;if(v!==null){var S=v.next;v.next=g,p.next=S}c.pending=p}si=null}return i}function Xw(i,s){do{var c=lt;try{if(Ff(),Ja.current=qa,Ya){for(var p=Je.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Ya=!1}if(ai=0,wt=dt=Je=null,Rs=!1,Os=0,mp.current=null,c===null||c.return===null){ft=1,Fs=s,lt=null;break}e:{var v=i,S=c.return,I=c,A=s;if(s=It,I.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var D=A,H=I,G=H.tag;if(!(H.mode&1)&&(G===0||G===11||G===15)){var U=H.alternate;U?(H.updateQueue=U.updateQueue,H.memoizedState=U.memoizedState,H.lanes=U.lanes):(H.updateQueue=null,H.memoizedState=null)}var ee=bw(S);if(ee!==null){ee.flags&=-257,Ew(ee,S,I,v,s),ee.mode&1&&Cw(v,D,s),s=ee,A=D;var le=s.updateQueue;if(le===null){var ae=new Set;ae.add(A),s.updateQueue=ae}else le.add(A);break e}else{if(!(s&1)){Cw(v,D,s),bp();break e}A=Error(t(426))}}else if($e&&I.mode&1){var nt=bw(S);if(nt!==null){!(nt.flags&65536)&&(nt.flags|=256),Ew(nt,S,I,v,s),Pf(ao(A,I));break e}}v=A=ao(A,I),ft!==4&&(ft=2),zs===null?zs=[v]:zs.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var R=Sw(v,A,s);Vv(v,R);break e;case 1:I=A;var N=v.type,L=v.stateNode;if(!(v.flags&128)&&(typeof N.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Rr===null||!Rr.has(L)))){v.flags|=65536,s&=-s,v.lanes|=s;var J=xw(v,I,s);Vv(v,J);break e}}v=v.return}while(v!==null)}n1(c)}catch(ue){s=ue,lt===c&&c!==null&&(lt=c=c.return);continue}break}while(!0)}function e1(){var i=ru.current;return ru.current=qa,i===null?qa:i}function bp(){(ft===0||ft===3||ft===2)&&(ft=4),kt===null||!(ui&268435455)&&!(iu&268435455)||Dr(kt,It)}function cu(i,s){var c=Le;Le|=2;var p=e1();(kt!==i||It!==s)&&(Qn=null,di(i,s));do try{IM();break}catch(g){Xw(i,g)}while(!0);if(Ff(),Le=c,ru.current=p,lt!==null)throw Error(t(261));return kt=null,It=0,ft}function IM(){for(;lt!==null;)t1(lt)}function TM(){for(;lt!==null&&!qA();)t1(lt)}function t1(i){var s=o1(i.alternate,i,en);i.memoizedProps=i.pendingProps,s===null?n1(i):lt=s,mp.current=null}function n1(i){var s=i;do{var c=s.alternate;if(i=s.return,s.flags&32768){if(c=kM(c,s),c!==null){c.flags&=32767,lt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ft=6,lt=null;return}}else if(c=wM(c,s,en),c!==null){lt=c;return}if(s=s.sibling,s!==null){lt=s;return}lt=s=i}while(s!==null);ft===0&&(ft=5)}function fi(i,s,c){var p=_e,g=un.transition;try{un.transition=null,_e=1,AM(i,s,c,p)}finally{un.transition=g,_e=p}return null}function AM(i,s,c,p){do po();while(Or!==null);if(Le&6)throw Error(t(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var v=c.lanes|c.childLanes;if(aN(i,v),i===kt&&(lt=kt=null,It=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||su||(su=!0,s1(ha,function(){return po(),null})),v=(c.flags&15990)!==0,c.subtreeFlags&15990||v){v=un.transition,un.transition=null;var S=_e;_e=1;var I=Le;Le|=4,mp.current=null,xM(i,c),Gw(c,i),JN(bf),Sa=!!Cf,bf=Cf=null,i.current=c,CM(c),XA(),Le=I,_e=S,un.transition=v}else i.current=c;if(su&&(su=!1,Or=i,lu=g),v=i.pendingLanes,v===0&&(Rr=null),nN(c.stateNode),$t(i,tt()),s!==null)for(p=i.onRecoverableError,c=0;c<s.length;c++)g=s[c],p(g.value,{componentStack:g.stack,digest:g.digest});if(ou)throw ou=!1,i=vp,vp=null,i;return lu&1&&i.tag!==0&&po(),v=i.pendingLanes,v&1?i===wp?Bs++:(Bs=0,wp=i):Bs=0,Tr(),null}function po(){if(Or!==null){var i=H0(lu),s=un.transition,c=_e;try{if(un.transition=null,_e=16>i?16:i,Or===null)var p=!1;else{if(i=Or,Or=null,lu=0,Le&6)throw Error(t(331));var g=Le;for(Le|=4,ie=i.current;ie!==null;){var v=ie,S=v.child;if(ie.flags&16){var I=v.deletions;if(I!==null){for(var A=0;A<I.length;A++){var D=I[A];for(ie=D;ie!==null;){var H=ie;switch(H.tag){case 0:case 11:case 15:_s(8,H,v)}var G=H.child;if(G!==null)G.return=H,ie=G;else for(;ie!==null;){H=ie;var U=H.sibling,ee=H.return;if(Uw(H),H===D){ie=null;break}if(U!==null){U.return=ee,ie=U;break}ie=ee}}}var le=v.alternate;if(le!==null){var ae=le.child;if(ae!==null){le.child=null;do{var nt=ae.sibling;ae.sibling=null,ae=nt}while(ae!==null)}}ie=v}}if(v.subtreeFlags&2064&&S!==null)S.return=v,ie=S;else e:for(;ie!==null;){if(v=ie,v.flags&2048)switch(v.tag){case 0:case 11:case 15:_s(9,v,v.return)}var R=v.sibling;if(R!==null){R.return=v.return,ie=R;break e}ie=v.return}}var N=i.current;for(ie=N;ie!==null;){S=ie;var L=S.child;if(S.subtreeFlags&2064&&L!==null)L.return=S,ie=L;else e:for(S=N;ie!==null;){if(I=ie,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:nu(9,I)}}catch(ue){Xe(I,I.return,ue)}if(I===S){ie=null;break e}var J=I.sibling;if(J!==null){J.return=I.return,ie=J;break e}ie=I.return}}if(Le=g,Tr(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(ma,i)}catch{}p=!0}return p}finally{_e=c,un.transition=s}}return!1}function r1(i,s,c){s=ao(c,s),s=Sw(i,s,1),i=Nr(i,s,1),s=zt(),i!==null&&(us(i,1,s),$t(i,s))}function Xe(i,s,c){if(i.tag===3)r1(i,i,c);else for(;s!==null;){if(s.tag===3){r1(s,i,c);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Rr===null||!Rr.has(p))){i=ao(c,i),i=xw(s,i,1),s=Nr(s,i,1),i=zt(),s!==null&&(us(s,1,i),$t(s,i));break}}s=s.return}}function NM(i,s,c){var p=i.pingCache;p!==null&&p.delete(s),s=zt(),i.pingedLanes|=i.suspendedLanes&c,kt===i&&(It&c)===c&&(ft===4||ft===3&&(It&130023424)===It&&500>tt()-yp?di(i,0):gp|=c),$t(i,s)}function i1(i,s){s===0&&(i.mode&1?(s=ya,ya<<=1,!(ya&130023424)&&(ya=4194304)):s=1);var c=zt();i=Kn(i,s),i!==null&&(us(i,s,c),$t(i,c))}function MM(i){var s=i.memoizedState,c=0;s!==null&&(c=s.retryLane),i1(i,c)}function RM(i,s){var c=0;switch(i.tag){case 13:var p=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(s),i1(i,c)}var o1;o1=function(i,s,c){if(i!==null)if(i.memoizedProps!==s.pendingProps||Ut.current)Ht=!0;else{if(!(i.lanes&c)&&!(s.flags&128))return Ht=!1,vM(i,s,c);Ht=!!(i.flags&131072)}else Ht=!1,$e&&s.flags&1048576&&Fv(s,Ba,s.index);switch(s.lanes=0,s.tag){case 2:var p=s.type;eu(i,s),i=s.pendingProps;var g=eo(s,Rt.current);oo(s,c),g=Qf(null,s,p,i,g,c);var v=Zf();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Wt(p)?(v=!0,_a(s)):v=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Uf(s),g.updater=$a,s.stateNode=g,g._reactInternals=s,Hf(s,p,i,c),s=op(null,s,p,!0,v,c)):(s.tag=0,$e&&v&&Rf(s),Ft(null,s,g,c),s=s.child),s;case 16:p=s.elementType;e:{switch(eu(i,s),i=s.pendingProps,g=p._init,p=g(p._payload),s.type=p,g=s.tag=LM(p),i=kn(p,i),g){case 0:s=ip(null,s,p,i,c);break e;case 1:s=Rw(null,s,p,i,c);break e;case 11:s=Iw(null,s,p,i,c);break e;case 14:s=Tw(null,s,p,kn(p.type,i),c);break e}throw Error(t(306,p,""))}return s;case 0:return p=s.type,g=s.pendingProps,g=s.elementType===p?g:kn(p,g),ip(i,s,p,g,c);case 1:return p=s.type,g=s.pendingProps,g=s.elementType===p?g:kn(p,g),Rw(i,s,p,g,c);case 3:e:{if(Ow(s),i===null)throw Error(t(387));p=s.pendingProps,v=s.memoizedState,g=v.element,Hv(i,s),Va(s,p,null,c);var S=s.memoizedState;if(p=S.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){g=ao(Error(t(423)),s),s=Lw(i,s,p,c,g);break e}else if(p!==g){g=ao(Error(t(424)),s),s=Lw(i,s,p,c,g);break e}else for(Xt=br(s.stateNode.containerInfo.firstChild),qt=s,$e=!0,wn=null,c=qv(s,null,p,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ro(),p===g){s=Yn(i,s,c);break e}Ft(i,s,p,c)}s=s.child}return s;case 5:return Xv(s),i===null&&Df(s),p=s.type,g=s.pendingProps,v=i!==null?i.memoizedProps:null,S=g.children,Ef(p,g)?S=null:v!==null&&Ef(p,v)&&(s.flags|=32),Mw(i,s),Ft(i,s,S,c),s.child;case 6:return i===null&&Df(s),null;case 13:return Dw(i,s,c);case 4:return Vf(s,s.stateNode.containerInfo),p=s.pendingProps,i===null?s.child=so(s,null,p,c):Ft(i,s,p,c),s.child;case 11:return p=s.type,g=s.pendingProps,g=s.elementType===p?g:kn(p,g),Iw(i,s,p,g,c);case 7:return Ft(i,s,s.pendingProps,c),s.child;case 8:return Ft(i,s,s.pendingProps.children,c),s.child;case 12:return Ft(i,s,s.pendingProps.children,c),s.child;case 10:e:{if(p=s.type._context,g=s.pendingProps,v=s.memoizedProps,S=g.value,Be(Ua,p._currentValue),p._currentValue=S,v!==null)if(vn(v.value,S)){if(v.children===g.children&&!Ut.current){s=Yn(i,s,c);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var I=v.dependencies;if(I!==null){S=v.child;for(var A=I.firstContext;A!==null;){if(A.context===p){if(v.tag===1){A=Jn(-1,c&-c),A.tag=2;var D=v.updateQueue;if(D!==null){D=D.shared;var H=D.pending;H===null?A.next=A:(A.next=H.next,H.next=A),D.pending=A}}v.lanes|=c,A=v.alternate,A!==null&&(A.lanes|=c),Bf(v.return,c,s),I.lanes|=c;break}A=A.next}}else if(v.tag===10)S=v.type===s.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=c,I=S.alternate,I!==null&&(I.lanes|=c),Bf(S,c,s),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===s){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Ft(i,s,g.children,c),s=s.child}return s;case 9:return g=s.type,p=s.pendingProps.children,oo(s,c),g=ln(g),p=p(g),s.flags|=1,Ft(i,s,p,c),s.child;case 14:return p=s.type,g=kn(p,s.pendingProps),g=kn(p.type,g),Tw(i,s,p,g,c);case 15:return Aw(i,s,s.type,s.pendingProps,c);case 17:return p=s.type,g=s.pendingProps,g=s.elementType===p?g:kn(p,g),eu(i,s),s.tag=1,Wt(p)?(i=!0,_a(s)):i=!1,oo(s,c),Jv(s,p,g),Hf(s,p,g,c),op(null,s,p,!0,i,c);case 19:return _w(i,s,c);case 22:return Nw(i,s,c)}throw Error(t(156,s.tag))};function s1(i,s){return z0(i,s)}function OM(i,s,c,p){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(i,s,c,p){return new OM(i,s,c,p)}function Ep(i){return i=i.prototype,!(!i||!i.isReactComponent)}function LM(i){if(typeof i=="function")return Ep(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ce)return 11;if(i===te)return 14}return 2}function Pr(i,s){var c=i.alternate;return c===null?(c=cn(i.tag,s,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=s,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,s=i.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function du(i,s,c,p,g,v){var S=2;if(p=i,typeof i=="function")Ep(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case Y:return pi(c.children,g,v,s);case j:S=8,g|=8;break;case ve:return i=cn(12,c,s,g|2),i.elementType=ve,i.lanes=v,i;case fe:return i=cn(13,c,s,g),i.elementType=fe,i.lanes=v,i;case re:return i=cn(19,c,s,g),i.elementType=re,i.lanes=v,i;case Z:return fu(c,g,v,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case pe:S=10;break e;case Ie:S=9;break e;case ce:S=11;break e;case te:S=14;break e;case se:S=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=cn(S,c,s,g),s.elementType=i,s.type=p,s.lanes=v,s}function pi(i,s,c,p){return i=cn(7,i,p,s),i.lanes=c,i}function fu(i,s,c,p){return i=cn(22,i,p,s),i.elementType=Z,i.lanes=c,i.stateNode={isHidden:!1},i}function Ip(i,s,c){return i=cn(6,i,null,s),i.lanes=c,i}function Tp(i,s,c){return s=cn(4,i.children!==null?i.children:[],i.key,s),s.lanes=c,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function DM(i,s,c,p,g){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xd(0),this.expirationTimes=Xd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xd(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Ap(i,s,c,p,g,v,S,I,A){return i=new DM(i,s,c,I,A),s===1?(s=1,v===!0&&(s|=8)):s=0,v=cn(3,null,null,s),i.current=v,v.stateNode=i,v.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uf(v),i}function PM(i,s,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:p==null?null:""+p,children:i,containerInfo:s,implementation:c}}function l1(i){if(!i)return Ir;i=i._reactInternals;e:{if(ti(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Wt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(Wt(c))return Dv(i,c,s)}return s}function a1(i,s,c,p,g,v,S,I,A){return i=Ap(c,p,!0,i,g,v,S,I,A),i.context=l1(null),c=i.current,p=zt(),g=Lr(c),v=Jn(p,g),v.callback=s??null,Nr(c,v,g),i.current.lanes=g,us(i,g,p),$t(i,p),i}function pu(i,s,c,p){var g=s.current,v=zt(),S=Lr(g);return c=l1(c),s.context===null?s.context=c:s.pendingContext=c,s=Jn(v,S),s.payload={element:i},p=p===void 0?null:p,p!==null&&(s.callback=p),i=Nr(g,s,S),i!==null&&(Cn(i,g,S,v),Ha(i,g,S)),S}function hu(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function u1(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<s?c:s}}function Np(i,s){u1(i,s),(i=i.alternate)&&u1(i,s)}function _M(){return null}var c1=typeof reportError=="function"?reportError:function(i){console.error(i)};function Mp(i){this._internalRoot=i}mu.prototype.render=Mp.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));pu(i,s,null,null)},mu.prototype.unmount=Mp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;ci(function(){pu(null,i,null,null)}),s[Hn]=null}};function mu(i){this._internalRoot=i}mu.prototype.unstable_scheduleHydration=function(i){if(i){var s=G0();i={blockedOn:null,target:i,priority:s};for(var c=0;c<Sr.length&&s!==0&&s<Sr[c].priority;c++);Sr.splice(c,0,i),c===0&&Y0(i)}};function Rp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function gu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function d1(){}function FM(i,s,c,p,g){if(g){if(typeof p=="function"){var v=p;p=function(){var D=hu(S);v.call(D)}}var S=a1(s,p,i,0,null,!1,!1,"",d1);return i._reactRootContainer=S,i[Hn]=S.current,Cs(i.nodeType===8?i.parentNode:i),ci(),S}for(;g=i.lastChild;)i.removeChild(g);if(typeof p=="function"){var I=p;p=function(){var D=hu(A);I.call(D)}}var A=Ap(i,0,!1,null,null,!1,!1,"",d1);return i._reactRootContainer=A,i[Hn]=A.current,Cs(i.nodeType===8?i.parentNode:i),ci(function(){pu(s,A,c,p)}),A}function yu(i,s,c,p,g){var v=c._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var I=g;g=function(){var A=hu(S);I.call(A)}}pu(s,S,i,g)}else S=FM(c,s,i,g,p);return hu(S)}V0=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var c=as(s.pendingLanes);c!==0&&(ef(s,c|1),$t(s,tt()),!(Le&6)&&(fo=tt()+500,Tr()))}break;case 13:ci(function(){var p=Kn(i,1);if(p!==null){var g=zt();Cn(p,i,1,g)}}),Np(i,1)}},tf=function(i){if(i.tag===13){var s=Kn(i,134217728);if(s!==null){var c=zt();Cn(s,i,134217728,c)}Np(i,134217728)}},$0=function(i){if(i.tag===13){var s=Lr(i),c=Kn(i,s);if(c!==null){var p=zt();Cn(c,i,s,p)}Np(i,s)}},G0=function(){return _e},K0=function(i,s){var c=_e;try{return _e=i,s()}finally{_e=c}},Kd=function(i,s,c){switch(s){case"input":if(Bd(i,c),s=c.name,c.type==="radio"&&s!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var p=c[s];if(p!==i&&p.form===i.form){var g=Da(p);if(!g)throw Error(t(90));st(p),Bd(p,g)}}}break;case"textarea":x0(i,c);break;case"select":s=c.value,s!=null&&Wi(i,!!c.multiple,s,!1)}},R0=xp,O0=ci;var zM={usingClientEntryPoint:!1,Events:[Is,qi,Da,N0,M0,xp]},js={findFiberByHostInstance:ni,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},BM={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=_0(i),i===null?null:i.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||_M,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vu.isDisabled&&vu.supportsFiber)try{ma=vu.inject(BM),Rn=vu}catch{}}return Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zM,Bt.createPortal=function(i,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rp(s))throw Error(t(200));return PM(i,s,null,c)},Bt.createRoot=function(i,s){if(!Rp(i))throw Error(t(299));var c=!1,p="",g=c1;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Ap(i,1,!1,null,null,c,!1,p,g),i[Hn]=s.current,Cs(i.nodeType===8?i.parentNode:i),new Mp(s)},Bt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=_0(s),i=i===null?null:i.stateNode,i},Bt.flushSync=function(i){return ci(i)},Bt.hydrate=function(i,s,c){if(!gu(s))throw Error(t(200));return yu(null,i,s,!0,c)},Bt.hydrateRoot=function(i,s,c){if(!Rp(i))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,g=!1,v="",S=c1;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),s=a1(s,null,i,1,c??null,g,!1,v,S),i[Hn]=s.current,Cs(i),p)for(i=0;i<p.length;i++)c=p[i],g=c._getVersion,g=g(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,g]:s.mutableSourceEagerHydrationData.push(c,g);return new mu(s)},Bt.render=function(i,s,c){if(!gu(s))throw Error(t(200));return yu(null,i,s,!1,c)},Bt.unmountComponentAtNode=function(i){if(!gu(i))throw Error(t(40));return i._reactRootContainer?(ci(function(){yu(null,null,i,!1,function(){i._reactRootContainer=null,i[Hn]=null})}),!0):!1},Bt.unstable_batchedUpdates=xp,Bt.unstable_renderSubtreeIntoContainer=function(i,s,c,p){if(!gu(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return yu(i,s,c,!1,p)},Bt.version="18.2.0-next-9e3b772b8-20220608",Bt}function Wp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wp)}catch(n){console.error(n)}}Wp(),zp.exports=x1();var C1=zp.exports,Hp,Vp=C1;Hp=Vp.createRoot,Vp.hydrateRoot;const b1='@import"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap";*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}body{font-size:14px;color:#4d463a;font-family:Noto Sans JP,sans-serif}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.-left-\\[117px\\]{left:-117px}.-left-\\[144px\\]{left:-144px}.-top-\\[60px\\]{top:-60px}.-top-\\[82px\\]{top:-82px}.bottom-0{bottom:0}.bottom-\\[46px\\]{bottom:46px}.bottom-full{bottom:100%}.left-0{left:0}.left-1\\/2{left:50%}.left-\\[46px\\]{left:46px}.right-0{right:0}.right-6{right:1.5rem}.right-\\[46px\\]{right:46px}.top-6{top:1.5rem}.top-\\[46px\\]{top:46px}.z-50{z-index:50}.z-\\[10000\\]{z-index:10000}.z-\\[10001\\]{z-index:10001}.z-\\[2147483646\\]{z-index:2147483646}.col-span-2{grid-column:span 2 / span 2}.col-span-6{grid-column:span 6 / span 6}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-16{margin-left:4rem}.ml-4{margin-left:1rem}.ml-8{margin-left:2rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-0{height:0px}.h-10{height:2.5rem}.h-16{height:4rem}.h-4{height:1rem}.h-6{height:1.5rem}.h-\\[120px\\]{height:120px}.h-\\[160px\\]{height:160px}.h-\\[180px\\]{height:180px}.h-\\[272px\\]{height:272px}.h-\\[314px\\]{height:314px}.h-\\[496px\\]{height:496px}.min-h-0{min-height:0px}.min-h-\\[146px\\]{min-height:146px}.min-h-\\[160px\\]{min-height:160px}.min-h-\\[180px\\]{min-height:180px}.w-0{width:0px}.w-10{width:2.5rem}.w-11{width:2.75rem}.w-4{width:1rem}.w-\\[260px\\]{width:260px}.w-\\[320px\\]{width:320px}.w-\\[400px\\]{width:400px}.w-\\[480px\\]{width:480px}.w-full{width:100%}.max-w-\\[1040px\\]{max-width:1040px}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-1{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-6{--tw-translate-x: 1.5rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize-none{resize:none}.resize{resize:both}.grid-cols-10{grid-template-columns:repeat(10,minmax(0,1fr))}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.whitespace-nowrap{white-space:nowrap}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-sm{border-radius:.125rem}.rounded-b{border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.rounded-t-sm{border-top-left-radius:.125rem;border-top-right-radius:.125rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-t-0{border-top-width:0px}.border-\\[\\#78909C\\]{--tw-border-opacity: 1;border-color:rgb(120 144 156 / var(--tw-border-opacity, 1))}.border-\\[\\#A5D6A7\\]{--tw-border-opacity: 1;border-color:rgb(165 214 167 / var(--tw-border-opacity, 1))}.border-\\[\\#CFD8DC\\]{--tw-border-opacity: 1;border-color:rgb(207 216 220 / var(--tw-border-opacity, 1))}.border-\\[\\#F2F2F2\\]{--tw-border-opacity: 1;border-color:rgb(242 242 242 / var(--tw-border-opacity, 1))}.border-\\[\\#FFCDD2\\]{--tw-border-opacity: 1;border-color:rgb(255 205 210 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-b-\\[\\#CFD8DC\\]{--tw-border-opacity: 1;border-bottom-color:rgb(207 216 220 / var(--tw-border-opacity, 1))}.bg-\\[\\#266CE3\\]{--tw-bg-opacity: 1;background-color:rgb(38 108 227 / var(--tw-bg-opacity, 1))}.bg-\\[\\#57E62C\\]{--tw-bg-opacity: 1;background-color:rgb(87 230 44 / var(--tw-bg-opacity, 1))}.bg-\\[\\#78909C\\]{--tw-bg-opacity: 1;background-color:rgb(120 144 156 / var(--tw-bg-opacity, 1))}.bg-\\[\\#E62C57\\]{--tw-bg-opacity: 1;background-color:rgb(230 44 87 / var(--tw-bg-opacity, 1))}.bg-\\[\\#E8F5E8\\]{--tw-bg-opacity: 1;background-color:rgb(232 245 232 / var(--tw-bg-opacity, 1))}.bg-\\[\\#ECEFF1\\]{--tw-bg-opacity: 1;background-color:rgb(236 239 241 / var(--tw-bg-opacity, 1))}.bg-\\[\\#F2F2F2\\]{--tw-bg-opacity: 1;background-color:rgb(242 242 242 / var(--tw-bg-opacity, 1))}.bg-\\[\\#F2F2F2\\]\\/70{background-color:#f2f2f2b3}.bg-\\[\\#F7F8FA\\]{--tw-bg-opacity: 1;background-color:rgb(247 248 250 / var(--tw-bg-opacity, 1))}.bg-\\[\\#FFEBEE\\]{--tw-bg-opacity: 1;background-color:rgb(255 235 238 / var(--tw-bg-opacity, 1))}.bg-\\[\\#fff\\]{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\\/20{background-color:#0003}.bg-black\\/70{background-color:#000000b3}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-opacity-20{--tw-bg-opacity: .2}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-\\[11px\\]{padding-top:11px;padding-bottom:11px}.pb-12{padding-bottom:3rem}.pb-2{padding-bottom:.5rem}.pb-4{padding-bottom:1rem}.pt-0{padding-top:0}.pt-1{padding-top:.25rem}.pt-2{padding-top:.5rem}.pt-4{padding-top:1rem}.pt-6{padding-top:1.5rem}.pt-8{padding-top:2rem}.text-center{text-align:center}.text-\\[9px\\]{font-size:9px}.text-base{font-size:1rem;line-height:1.5rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.leading-relaxed{line-height:1.625}.text-\\[\\#2E7D32\\]{--tw-text-opacity: 1;color:rgb(46 125 50 / var(--tw-text-opacity, 1))}.text-\\[\\#455A64\\]{--tw-text-opacity: 1;color:rgb(69 90 100 / var(--tw-text-opacity, 1))}.text-\\[\\#4D463A\\]{--tw-text-opacity: 1;color:rgb(77 70 58 / var(--tw-text-opacity, 1))}.text-\\[\\#78909C\\]{--tw-text-opacity: 1;color:rgb(120 144 156 / var(--tw-text-opacity, 1))}.text-\\[\\#C62828\\]{--tw-text-opacity: 1;color:rgb(198 40 40 / var(--tw-text-opacity, 1))}.text-\\[\\#F2F2F2\\]{--tw-text-opacity: 1;color:rgb(242 242 242 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.opacity-100{opacity:1}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}#plasmo-shadow-container{font-family:Noto Sans JP,sans-serif;font-size:14px;color:#4d463a}.last\\:border-b-0:last-child{border-bottom-width:0px}.hover\\:bg-\\[\\#1976D2\\]:hover{--tw-bg-opacity: 1;background-color:rgb(25 118 210 / var(--tw-bg-opacity, 1))}.hover\\:bg-\\[\\#2A3FBB\\]:hover{--tw-bg-opacity: 1;background-color:rgb(42 63 187 / var(--tw-bg-opacity, 1))}.hover\\:bg-\\[\\#ECEFF1\\]:hover{--tw-bg-opacity: 1;background-color:rgb(236 239 241 / var(--tw-bg-opacity, 1))}.hover\\:bg-\\[\\#F2F2F2\\]:hover{--tw-bg-opacity: 1;background-color:rgb(242 242 242 / var(--tw-bg-opacity, 1))}.hover\\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\\:text-\\[\\#424242\\]:hover{--tw-text-opacity: 1;color:rgb(66 66 66 / var(--tw-text-opacity, 1))}.hover\\:text-\\[\\#4D463A\\]:hover{--tw-text-opacity: 1;color:rgb(77 70 58 / var(--tw-text-opacity, 1))}.hover\\:text-\\[\\#F44336\\]:hover{--tw-text-opacity: 1;color:rgb(244 67 54 / var(--tw-text-opacity, 1))}.hover\\:text-blue-800:hover{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.hover\\:text-gray-300:hover{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.hover\\:opacity-80:hover{opacity:.8}.focus\\:border-\\[\\#266CE3\\]:focus{--tw-border-opacity: 1;border-color:rgb(38 108 227 / var(--tw-border-opacity, 1))}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-1:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-\\[\\#266CE3\\]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(38 108 227 / var(--tw-ring-opacity, 1))}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.group:hover .group-hover\\:block{display:block}';var xe=ku();const Us=()=>{const n=document.getElementById("ux-canvas-highlight-mask");n&&n.remove()},E1=n=>{Us();const e=n.getBoundingClientRect(),t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.id="ux-canvas-highlight-mask",t.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
    pointer-events: none;
  `,t.innerHTML=`
    <defs>
      <mask id="highlight-mask">
        <!--  =  =  -->
        <rect x="0" y="0" width="100%" height="100%" fill="white"/>
        <!--  =  =  -->
        <rect x="${e.left}" y="${e.top}" width="${e.width}" height="${e.height}" fill="black"/>
      </mask>
    </defs>
    <!--  -->
    <rect x="0" y="0" width="100%" height="100%" fill="rgba(0,0,0,0.2)" mask="url(#highlight-mask)"/>
  `,document.body.appendChild(t)},I1=n=>{const e=document.getElementById("ux-canvas-highlight-mask");if(e&&n){const t=n.getBoundingClientRect();e.innerHTML=`
      <defs>
        <mask id="highlight-mask">
          <!--  =  =  -->
          <rect x="0" y="0" width="100%" height="100%" fill="white"/>
          <!--  =  =  -->
          <rect x="${t.left}" y="${t.top}" width="${t.width}" height="${t.height}" fill="black"/>
        </mask>
      </defs>
      <!--  -->
      <rect x="0" y="0" width="100%" height="100%" fill="rgba(0,0,0,0.2)" mask="url(#highlight-mask)"/>
    `}},$p=(n,e="#d1d5db",t="white")=>{switch(n){case"left":return{outer:{borderTop:"8px solid transparent",borderBottom:"8px solid transparent",borderLeft:`16px solid ${e}`},inner:{borderTop:"7px solid transparent",borderBottom:"7px solid transparent",borderLeft:`15px solid ${t}`}};case"right":return{outer:{borderTop:"8px solid transparent",borderBottom:"8px solid transparent",borderRight:`16px solid ${e}`},inner:{borderTop:"7px solid transparent",borderBottom:"7px solid transparent",borderRight:`15px solid ${t}`}};case"top":return{outer:{borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:`16px solid ${e}`},inner:{borderLeft:"7px solid transparent",borderRight:"7px solid transparent",borderTop:`15px solid ${t}`}};case"bottom":return{outer:{borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:`16px solid ${e}`},inner:{borderLeft:"7px solid transparent",borderRight:"7px solid transparent",borderBottom:`15px solid ${t}`}};default:return{outer:{borderTop:"8px solid transparent",borderBottom:"8px solid transparent",borderRight:`16px solid ${e}`},inner:{borderTop:"7px solid transparent",borderBottom:"7px solid transparent",borderRight:`15px solid ${t}`}}}},T1=n=>n.offset||{x:n.offsetX||0,y:n.offsetY||0},A1=n=>({left:{outer:{right:"-16px",top:"82px"},inner:{right:"-15px",top:"83px"}},right:{outer:{left:"-16px",top:"82px"},inner:{left:"-15px",top:"83px"}},top:{outer:{bottom:"-16px",left:"144px"},inner:{bottom:"-15px",left:"145px"}},bottom:{outer:{top:"-16px",left:"144px"},inner:{top:"-15px",left:"145px"}}})[n],N1=({content:n})=>{const e=n.direction||n.position||"right",t=A1(e),r=$p(e);return V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"absolute w-0 h-0",style:{...t.outer,...r.outer}}),V.jsx("div",{className:"absolute w-0 h-0",style:{...t.inner,...r.inner}})]})},M1=(n,e,t)=>{const a=e.top+t.y,u=e.left+t.x;switch(n){case"top":return{top:a-180-20,left:u+e.width/2-320/2};case"bottom":return{top:a+e.height+20,left:u+e.width/2-320/2};case"left":return{top:a+e.height/2-180/2,left:u-320-20};case"right":default:return{top:a+e.height/2-180/2,left:u+e.width+20}}},R1=(n,e)=>{const t=n.getBoundingClientRect();let r;e.offset?r=e.offset:typeof e.offsetX=="number"||typeof e.offsetY=="number"?r={x:e.offsetX||0,y:e.offsetY||0}:r={x:0,y:0};const o=e.direction,l=M1(o,t,r);return{x:l.left,y:l.top}},O1=({currentStep:n,totalSteps:e,onNext:t,onPrevious:r,onFinish:o,onClose:l})=>{const a=n===0,u=n===e-1;return V.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 border-t border-gray-200 flex justify-between items-center text-xs bg-white rounded-b",children:[V.jsxs("button",{onClick:l,className:"flex items-center gap-1 px-2 py-1 text-gray-500 hover:bg-gray-100 rounded transition-colors",children:[V.jsx("span",{children:""}),V.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[V.jsx("path",{d:"m7 18 6-6-6-6"}),V.jsx("path",{d:"M17 6v12"})]})]}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsxs("span",{className:"text-gray-500 font-semibold mr-3",children:[n+1," / ",e]}),!a&&V.jsxs("button",{onClick:r,className:"flex items-center gap-1 px-3 py-1 border border-gray-300 bg-gray-50 text-gray-700 rounded hover:bg-gray-100 transition-colors",children:[V.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:V.jsx("path",{d:"m15 18-6-6 6-6"})}),V.jsx("span",{children:""})]}),V.jsxs("button",{onClick:u?o:t,className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:[V.jsx("span",{children:u?"":""}),!u&&V.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:V.jsx("path",{d:"m9 18 6-6-6-6"})})]})]})]})},L1=(n,e,t)=>{const[r,o]=xe.useState({x:0,y:0});return xe.useEffect(()=>{if(!n||!e)return;const l=()=>{const a=t();if(a&&a.type==="BALLOON"){const u=a.content,d={title:u.title||"",body:u.body||"",direction:u.position||"right",offsetX:u.offsetX||0,offsetY:u.offsetY||0},f=R1(n,d);o(f)}I1(n)};return l(),window.addEventListener("scroll",l,!0),window.addEventListener("resize",l),()=>{window.removeEventListener("scroll",l,!0),window.removeEventListener("resize",l)}},[n,e,t]),r},D1=n=>{try{const e=document.querySelector(n);if(!e)return{isValid:!1,errorType:"NOT_FOUND"};const t=e.getBoundingClientRect();return t.width===0&&t.height===0?{isValid:!1,errorType:"HIDDEN",element:e}:t.bottom<0||t.top>window.innerHeight||t.right<0||t.left>window.innerWidth?{isValid:!1,errorType:"OUT_OF_VIEWPORT",element:e}:{isValid:!0,element:e}}catch{return{isValid:!1,errorType:"SELECTOR_ERROR"}}},P1=n=>{const[e,t]=xe.useState(0),[r,o]=xe.useState(null),l=xe.useCallback(()=>{if(!n||e>=n.length)return null;const h=n[e];return{type:h.type,content:h.content}},[n,e]),a=xe.useCallback(()=>{if(!n||e>=n.length)return;const h=n[e];if(h.type==="CONFIRMATION_DIALOG"){Us(),o(null);return}const m=D1(h.selector);if(!m.isValid)if(m.errorType==="OUT_OF_VIEWPORT"&&m.element){m.element.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout(()=>{a()},800);return}else if(m.errorType==="HIDDEN"&&m.element){setTimeout(()=>{a()},1e3);return}else return;const y=m.element;Us(),E1(y),o(y)},[n,e]),u=xe.useCallback(()=>{n&&e<n.length-1&&t(e+1)},[n,e]),d=xe.useCallback(()=>{e>0&&t(e-1)},[e]),f=xe.useCallback(()=>{Us(),t(0),o(null)},[]);return{currentStep:e,currentElement:r,getCurrentStepContent:l,showCurrentStep:a,goToNextStep:u,goToPreviousStep:d,resetSteps:f}},_1=(n,e)=>{const[t,r]=xe.useState(!1);xe.useEffect(()=>(n&&n.length>0&&r(!0),()=>{e()}),[n,e]);const o=xe.useCallback(()=>{r(!1),e()},[e]);return{isVisible:t,hideNavigation:o}};function xt(n){this.content=n}xt.prototype={constructor:xt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,o=r.find(n),l=r.content.slice();return o==-1?l.push(t||n,e):(l[o+1]=e,t&&(l[o]=t)),new xt(l)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new xt(t)},addToStart:function(n,e){return new xt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new xt(t)},addBefore:function(n,e,t){var r=this.remove(e),o=r.content.slice(),l=r.find(n);return o.splice(l==-1?o.length:l,0,e,t),new xt(o)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=xt.from(n),n.size?new xt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=xt.from(n),n.size?new xt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=xt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}},xt.from=function(n){if(n instanceof xt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new xt(e)};function Gp(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let o=n.child(r),l=e.child(r);if(o==l){t+=o.nodeSize;continue}if(!o.sameMarkup(l))return t;if(o.isText&&o.text!=l.text){for(let a=0;o.text[a]==l.text[a];a++)t++;return t}if(o.content.size||l.content.size){let a=Gp(o.content,l.content,t+1);if(a!=null)return a}t+=o.nodeSize}}function Kp(n,e,t,r){for(let o=n.childCount,l=e.childCount;;){if(o==0||l==0)return o==l?null:{a:t,b:r};let a=n.child(--o),u=e.child(--l),d=a.nodeSize;if(a==u){t-=d,r-=d;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let f=0,h=Math.min(a.text.length,u.text.length);for(;f<h&&a.text[a.text.length-f-1]==u.text[u.text.length-f-1];)f++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let f=Kp(a.content,u.content,t-1,r-1);if(f)return f}t-=d,r-=d}}class ${constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,o=0,l){for(let a=0,u=0;u<t;a++){let d=this.content[a],f=u+d.nodeSize;if(f>e&&r(d,o+u,l||null,a)!==!1&&d.content.size){let h=u+1;d.nodesBetween(Math.max(0,e-h),Math.min(d.content.size,t-h),r,o+h)}u=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,o){let l="",a=!0;return this.nodesBetween(e,t,(u,d)=>{let f=u.isText?u.text.slice(Math.max(e,d)-d,t-d):u.isLeaf?o?typeof o=="function"?o(u):o:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&f||u.isTextblock)&&r&&(a?a=!1:l+=r),l+=f},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,o=this.content.slice(),l=0;for(t.isText&&t.sameMarkup(r)&&(o[o.length-1]=t.withText(t.text+r.text),l=1);l<e.content.length;l++)o.push(e.content[l]);return new $(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],o=0;if(t>e)for(let l=0,a=0;a<t;l++){let u=this.content[l],d=a+u.nodeSize;d>e&&((a<e||d>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),o+=u.nodeSize),a=d}return new $(r,o)}cutByIndex(e,t){return e==t?$.empty:e==0&&t==this.content.length?this:new $(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let o=this.content.slice(),l=this.size+t.nodeSize-r.nodeSize;return o[e]=t,new $(o,l)}addToStart(e){return new $([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new $(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let o=this.content[t];e(o,r,t),r+=o.nodeSize}}findDiffStart(e,t=0){return Gp(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Kp(this,e,t,r)}findIndex(e){if(e==0)return Ws(0,e);if(e==this.size)return Ws(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let o=this.child(t),l=r+o.nodeSize;if(l>=e)return l==e?Ws(t+1,l):Ws(t,r);r=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return $.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new $(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return $.empty;let t,r=0;for(let o=0;o<e.length;o++){let l=e[o];r+=l.nodeSize,o&&l.isText&&e[o-1].sameMarkup(l)?(t||(t=e.slice(0,o)),t[t.length-1]=l.withText(t[t.length-1].text+l.text)):t&&t.push(l)}return new $(t||e,r)}static from(e){if(!e)return $.empty;if(e instanceof $)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new $([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}$.empty=new $([],0);const Cu={index:0,offset:0};function Ws(n,e){return Cu.index=n,Cu.offset=e,Cu}function Hs(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Hs(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Hs(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Ve=class Op{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let o=0;o<e.length;o++){let l=e[o];if(this.eq(l))return e;if(this.type.excludes(l.type))t||(t=e.slice(0,o));else{if(l.type.excludes(this.type))return e;!r&&l.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),r=!0),t&&t.push(l)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Hs(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=r.create(t.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Op.none;if(e instanceof Op)return[e];let t=e.slice();return t.sort((r,o)=>r.type.rank-o.type.rank),t}};Ve.none=[];class Vs extends Error{}class q{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Yp(this.content,e+this.openStart,t);return r&&new q(r,this.openStart,this.openEnd)}removeBetween(e,t){return new q(Jp(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return q.empty;let r=t.openStart||0,o=t.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new q($.fromJSON(e,t.content),r,o)}static maxOpen(e,t=!0){let r=0,o=0;for(let l=e.firstChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.firstChild)r++;for(let l=e.lastChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.lastChild)o++;return new q(e,r,o)}}q.empty=new q($.empty,0,0);function Jp(n,e,t){let{index:r,offset:o}=n.findIndex(e),l=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(o==e||l.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,l.copy(Jp(l.content,e-o-1,t-o-1)))}function Yp(n,e,t,r){let{index:o,offset:l}=n.findIndex(e),a=n.maybeChild(o);if(l==e||a.isText)return r&&!r.canReplace(o,o,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=Yp(a.content,e-l-1,t,a);return u&&n.replaceChild(o,a.copy(u))}function F1(n,e,t){if(t.openStart>n.depth)throw new Vs("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Vs("Inconsistent open depths");return Qp(n,e,t,0)}function Qp(n,e,t,r){let o=n.index(r),l=n.node(r);if(o==e.index(r)&&r<n.depth-t.openStart){let a=Qp(n,e,t,r+1);return l.copy(l.content.replaceChild(o,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return zr(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=z1(t,n);return zr(l,qp(n,a,u,e,r))}else return zr(l,$s(n,e,r))}function Zp(n,e){if(!e.type.compatibleContent(n.type))throw new Vs("Cannot join "+e.type.name+" onto "+n.type.name)}function bu(n,e,t){let r=n.node(t);return Zp(r,e.node(t)),r}function Fr(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function mo(n,e,t,r){let o=(e||n).node(t),l=0,a=e?e.index(t):o.childCount;n&&(l=n.index(t),n.depth>t?l++:n.textOffset&&(Fr(n.nodeAfter,r),l++));for(let u=l;u<a;u++)Fr(o.child(u),r);e&&e.depth==t&&e.textOffset&&Fr(e.nodeBefore,r)}function zr(n,e){return n.type.checkContent(e),n.copy(e)}function qp(n,e,t,r,o){let l=n.depth>o&&bu(n,e,o+1),a=r.depth>o&&bu(t,r,o+1),u=[];return mo(null,n,o,u),l&&a&&e.index(o)==t.index(o)?(Zp(l,a),Fr(zr(l,qp(n,e,t,r,o+1)),u)):(l&&Fr(zr(l,$s(n,e,o+1)),u),mo(e,t,o,u),a&&Fr(zr(a,$s(t,r,o+1)),u)),mo(r,null,o,u),new $(u)}function $s(n,e,t){let r=[];if(mo(null,n,t,r),n.depth>t){let o=bu(n,e,t+1);Fr(zr(o,$s(n,e,t+1)),r)}return mo(e,null,t,r),new $(r)}function z1(n,e){let t=e.depth-n.openStart,o=e.node(t).copy(n.content);for(let l=t-1;l>=0;l--)o=e.node(l).copy($.from(o));return{start:o.resolveNoCache(n.openStart+t),end:o.resolveNoCache(o.content.size-n.openEnd-t)}}class go{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(t);return r?e.child(t).cut(r):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let l=0;l<e;l++)o+=r.child(l).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Ve.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),o=e.maybeChild(t);if(!r){let u=r;r=o,o=u}let l=r.marks;for(var a=0;a<l.length;a++)l[a].type.spec.inclusive===!1&&(!o||!l[a].isInSet(o.marks))&&(l=l[a--].removeFromSet(l));return l}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,o=e.parent.maybeChild(e.index());for(var l=0;l<r.length;l++)r[l].type.spec.inclusive===!1&&(!o||!r[l].isInSet(o.marks))&&(r=r[l--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Gs(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],o=0,l=t;for(let a=e;;){let{index:u,offset:d}=a.content.findIndex(l),f=l-d;if(r.push(a,u,o+d),!f||(a=a.child(u),a.isText))break;l=f-1,o+=d+1}return new go(t,r,l)}static resolveCached(e,t){let r=Xp.get(e);if(r)for(let l=0;l<r.elts.length;l++){let a=r.elts[l];if(a.pos==t)return a}else Xp.set(e,r=new B1);let o=r.elts[r.i]=go.resolve(e,t);return r.i=(r.i+1)%j1,o}}class B1{constructor(){this.elts=[],this.i=0}}const j1=12,Xp=new WeakMap;class Gs{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const U1=Object.create(null);let Zn=class Lp{constructor(e,t,r,o=Ve.none){this.type=e,this.attrs=t,this.marks=o,this.content=r||$.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,o=0){this.content.nodesBetween(e,t,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,o){return this.content.textBetween(e,t,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Hs(this.attrs,t||e.defaultAttrs||U1)&&Ve.sameSet(this.marks,r||Ve.none)}copy(e=null){return e==this.content?this:new Lp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Lp(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return q.empty;let o=this.resolve(e),l=this.resolve(t),a=r?0:o.sharedDepth(t),u=o.start(a),f=o.node(a).content.cut(o.pos-u,l.pos-u);return new q(f,o.depth-a,l.depth-a)}replace(e,t,r){return F1(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let o=this.content.child(t-1);return{node:o,index:t-1,offset:r-o.nodeSize}}resolve(e){return go.resolveCached(this,e)}resolveNoCache(e){return go.resolve(this,e)}rangeHasMark(e,t,r){let o=!1;return t>e&&this.nodesBetween(e,t,l=>(r.isInSet(l.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),eh(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=$.empty,o=0,l=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,o,l),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let d=o;d<l;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,t,r,o){if(o&&!this.type.allowsMarks(o))return!1;let l=this.contentMatchAt(e).matchType(r),a=l&&l.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ve.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ve.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let o=$.fromJSON(e,t.content),l=e.nodeType(t.type).create(t.attrs,o,r);return l.type.checkAttrs(l.attrs),l}};Zn.prototype.text=void 0;class Ks extends Zn{constructor(e,t,r,o){if(super(e,t,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):eh(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ks(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ks(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function eh(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Br{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new W1(e,t);if(r.next==null)return Br.empty;let o=th(r);r.next&&r.err("Unexpected trailing text");let l=Y1(J1(o));return Q1(l,r),l}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let o=this;for(let l=t;o&&l<r;l++)o=o.matchType(e.child(l).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let o=[this];function l(a,u){let d=a.matchFragment(e,r);if(d&&(!t||d.validEnd))return $.from(u.map(f=>f.createAndFill()));for(let f=0;f<a.next.length;f++){let{type:h,next:m}=a.next[f];if(!(h.isText||h.hasRequiredAttrs())&&o.indexOf(m)==-1){o.push(m);let y=l(m,u.concat(h));if(y)return y}}return null}return l(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),l=o.match;if(l.matchType(e)){let a=[];for(let u=o;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<l.next.length;a++){let{type:u,next:d}=l.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!o.type||d.validEnd)&&(r.push({match:u.contentMatch,type:u,via:o}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&t(r.next[o].next)}return t(this),e.map((r,o)=>{let l=o+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)l+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return l}).join(`
`)}}Br.empty=new Br(!0);class W1{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function th(n){let e=[];do e.push(H1(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function H1(n){let e=[];do e.push(V1(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function V1(n){let e=K1(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=$1(n,e);else break;return e}function nh(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function $1(n,e){let t=nh(n),r=t;return n.eat(",")&&(n.next!="}"?r=nh(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function G1(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let o=[];for(let l in t){let a=t[l];a.isInGroup(e)&&o.push(a)}return o.length==0&&n.err("No node type or group '"+e+"' found"),o}function K1(n){if(n.eat("(")){let e=th(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=G1(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function J1(n){let e=[[]];return o(l(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,d){let f={term:d,to:u};return e[a].push(f),f}function o(a,u){a.forEach(d=>d.to=u)}function l(a,u){if(a.type=="choice")return a.exprs.reduce((d,f)=>d.concat(l(f,u)),[]);if(a.type=="seq")for(let d=0;;d++){let f=l(a.exprs[d],u);if(d==a.exprs.length-1)return f;o(f,u=t())}else if(a.type=="star"){let d=t();return r(u,d),o(l(a.expr,d),d),[r(d)]}else if(a.type=="plus"){let d=t();return o(l(a.expr,u),d),o(l(a.expr,d),d),[r(d)]}else{if(a.type=="opt")return[r(u)].concat(l(a.expr,u));if(a.type=="range"){let d=u;for(let f=0;f<a.min;f++){let h=t();o(l(a.expr,d),h),d=h}if(a.max==-1)o(l(a.expr,d),d);else for(let f=a.min;f<a.max;f++){let h=t();r(d,h),o(l(a.expr,d),h),d=h}return[r(d)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function rh(n,e){return e-n}function ih(n,e){let t=[];return r(e),t.sort(rh);function r(o){let l=n[o];if(l.length==1&&!l[0].term)return r(l[0].to);t.push(o);for(let a=0;a<l.length;a++){let{term:u,to:d}=l[a];!u&&t.indexOf(d)==-1&&r(d)}}}function Y1(n){let e=Object.create(null);return t(ih(n,0));function t(r){let o=[];r.forEach(a=>{n[a].forEach(({term:u,to:d})=>{if(!u)return;let f;for(let h=0;h<o.length;h++)o[h][0]==u&&(f=o[h][1]);ih(n,d).forEach(h=>{f||o.push([u,f=[]]),f.indexOf(h)==-1&&f.push(h)})})});let l=e[r.join(",")]=new Br(r.indexOf(n.length-1)>-1);for(let a=0;a<o.length;a++){let u=o[a][1].sort(rh);l.next.push({type:o[a][0],next:e[u.join(",")]||t(u)})}return l}}function Q1(n,e){for(let t=0,r=[n];t<r.length;t++){let o=r[t],l=!o.validEnd,a=[];for(let u=0;u<o.next.length;u++){let{type:d,next:f}=o.next[u];a.push(d.name),l&&!(d.isText||d.hasRequiredAttrs())&&(l=!1),r.indexOf(f)==-1&&r.push(f)}l&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function oh(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function sh(n,e){let t=Object.create(null);for(let r in n){let o=e&&e[r];if(o===void 0){let l=n[r];if(l.hasDefault)o=l.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=o}return t}function lh(n,e,t,r){for(let o in e)if(!(o in n))throw new RangeError(`Unsupported attribute ${o} for ${t} of type ${o}`);for(let o in n){let l=n[o];l.validate&&l.validate(e[o])}}function ah(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new q1(n,r,e[r]);return t}let uh=class f1{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ah(e,r.attrs),this.defaultAttrs=oh(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Br.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:sh(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Zn(this,this.computeAttrs(e),$.from(t),Ve.setFrom(r))}createChecked(e=null,t,r){return t=$.from(t),this.checkContent(t),new Zn(this,this.computeAttrs(e),t,Ve.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=$.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let o=this.contentMatch.matchFragment(t),l=o&&o.fillBefore($.empty,!0);return l?new Zn(this,e,t.append(l),Ve.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){lh(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Ve.none:e}static compile(e,t){let r=Object.create(null);e.forEach((l,a)=>r[l]=new f1(l,t,a));let o=t.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let l in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Z1(n,e,t){let r=t.split("|");return o=>{let l=o===null?"null":typeof o;if(r.indexOf(l)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${l}`)}}class q1{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Z1(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Js{constructor(e,t,r,o){this.name=e,this.rank=t,this.schema=r,this.spec=o,this.attrs=ah(e,o.attrs),this.excluded=null;let l=oh(this.attrs);this.instance=l?new Ve(this,l):null}create(e=null){return!e&&this.instance?this.instance:new Ve(this,sh(this.attrs,e))}static compile(e,t){let r=Object.create(null),o=0;return e.forEach((l,a)=>r[l]=new Js(l,o++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){lh(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class ch{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=xt.from(e.nodes),t.marks=xt.from(e.marks||{}),this.nodes=uh.compile(this.spec.nodes,this),this.marks=Js.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let l=this.nodes[o],a=l.spec.content||"",u=l.spec.marks;if(l.contentMatch=r[a]||(r[a]=Br.parse(a,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=u=="_"?null:u?dh(this,u.split(" ")):u==""||!l.inlineContent?[]:null}for(let o in this.marks){let l=this.marks[o],a=l.spec.excludes;l.excluded=a==null?[l]:a==""?[]:dh(this,a.split(" "))}this.nodeFromJSON=o=>Zn.fromJSON(this,o),this.markFromJSON=o=>Ve.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof uh){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,o)}text(e,t){let r=this.nodes.text;return new Ks(r,r.defaultAttrs,e,Ve.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function dh(n,e){let t=[];for(let r=0;r<e.length;r++){let o=e[r],l=n.marks[o],a=l;if(l)t.push(l);else for(let u in n.marks){let d=n.marks[u];(o=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(o)>-1)&&t.push(a=d)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function X1(n){return n.tag!=null}function ek(n){return n.style!=null}class jr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(o=>{if(X1(o))this.tags.push(o);else if(ek(o)){let l=/[^=]*/.exec(o.style)[0];r.indexOf(l)<0&&r.push(l),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let l=e.nodes[o.node];return l.contentMatch.matchType(l)})}parse(e,t={}){let r=new mh(this,t,!1);return r.addAll(e,Ve.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new mh(this,t,!0);return r.addAll(e,Ve.none,t.from,t.to),q.maxOpen(r.finish())}matchTag(e,t,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let l=this.tags[o];if(rk(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||t.matchesContext(l.context))){if(l.getAttrs){let a=l.getAttrs(e);if(a===!1)continue;l.attrs=a||void 0}return l}}}matchStyle(e,t,r,o){for(let l=o?this.styles.indexOf(o)+1:0;l<this.styles.length;l++){let a=this.styles[l],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let d=a.getAttrs(t);if(d===!1)continue;a.attrs=d||void 0}return a}}}static schemaRules(e){let t=[];function r(o){let l=o.priority==null?50:o.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<l)break}t.splice(a,0,o)}for(let o in e.marks){let l=e.marks[o].spec.parseDOM;l&&l.forEach(a=>{r(a=gh(a)),a.mark||a.ignore||a.clearMark||(a.mark=o)})}for(let o in e.nodes){let l=e.nodes[o].spec.parseDOM;l&&l.forEach(a=>{r(a=gh(a)),a.node||a.ignore||a.mark||(a.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new jr(e,jr.schemaRules(e)))}}const fh={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tk={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ph={ol:!0,ul:!0},yo=1,Eu=2,vo=4;function hh(n,e,t){return e!=null?(e?yo:0)|(e==="full"?Eu:0):n&&n.whitespace=="pre"?yo|Eu:t&~vo}class Ys{constructor(e,t,r,o,l,a){this.type=e,this.attrs=t,this.marks=r,this.solid=o,this.options=a,this.content=[],this.activeMarks=Ve.none,this.match=l||(a&vo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore($.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&yo)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let l=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-o[0].length))}}let t=$.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore($.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!fh.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class mh{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=t.topNode,l,a=hh(null,t.preserveWhitespace,0)|(r?vo:0);o?l=new Ys(o.type,o.attrs,Ve.none,!0,t.topMatch||o.type.contentMatch,a):r?l=new Ys(null,null,Ve.none,!0,null,a):l=new Ys(e.schema.topNodeType,null,Ve.none,!0,null,a),this.nodes=[l],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,o=this.top,l=o.options&Eu?"full":this.localPreserveWS||(o.options&yo)>0,{schema:a}=this.parser;if(l==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(l)if(l==="full")r=r.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(a.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let d=0;d<u.length;d++)d&&this.insertNode(a.linebreakReplacement.create(),t,!0),u[d]&&this.insertNode(a.text(u[d]),t,!/\S/.test(u[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=o.content[o.content.length-1],d=e.previousSibling;(!u||d&&d.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(a.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let o=this.localPreserveWS,l=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),u;ph.hasOwnProperty(a)&&this.parser.normalizeLists&&nk(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(d?d.ignore:tk.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let f,h=this.needsBlock;if(fh.hasOwnProperty(a))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),f=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let m=d&&d.skip?t:this.readStyles(e,t);m&&this.addAll(e,m),f&&this.sync(l),this.needsBlock=h}else{let f=this.readStyles(e,t);f&&this.addElementByRule(e,d,f,d.consuming===!1?u:void 0)}this.localPreserveWS=o}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let l=this.parser.matchedStyles[o],a=r.getPropertyValue(l);if(a)for(let u=void 0;;){let d=this.parser.matchStyle(l,a,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(f=>!d.clearMark(f)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return t}addElementByRule(e,t,r,o){let l,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(a,t.attrs||null,r,t.preserveWhitespace);d&&(l=!0,r=d)}else{let d=this.parser.schema.marks[t.mark];r=r.concat(d.create(t.attrs))}let u=this.top;if(a&&a.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}l&&this.sync(u)&&this.open--}addAll(e,t,r,o){let l=r||0;for(let a=r?e.childNodes[r]:e.firstChild,u=o==null?null:e.childNodes[o];a!=u;a=a.nextSibling,++l)this.findAtPoint(e,l),this.addDOM(a,t);this.findAtPoint(e,l)}findPlace(e,t,r){let o,l;for(let a=this.open,u=0;a>=0;a--){let d=this.nodes[a],f=d.findWrapping(e);if(f&&(!o||o.length>f.length+u)&&(o=f,l=d,!f.length))break;if(d.solid){if(r)break;u+=2}}if(!o)return null;this.sync(l);for(let a=0;a<o.length;a++)t=this.enterInner(o[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let l=this.textblockFromContext();l&&(t=this.enterInner(l,null,t))}let o=this.findPlace(e,t,r);if(o){this.closeExtra();let l=this.top;l.match&&(l.match=l.match.matchType(e.type));let a=Ve.none;for(let u of o.concat(e.marks))(l.type?l.type.allowsMarkType(u.type):yh(u.type,e.type))&&(a=u.addToSet(a));return l.content.push(e.mark(a)),!0}return!1}enter(e,t,r,o){let l=this.findPlace(e.create(t),r,!1);return l&&(l=this.enterInner(e,t,r,!0,o)),l}enterInner(e,t,r,o=!1,l){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let u=hh(e,l,a.options);a.options&vo&&a.content.length==0&&(u|=vo);let d=Ve.none;return r=r.filter(f=>(a.type?a.type.allowsMarkType(f.type):yh(f.type,e))?(d=f.addToSet(d),!1):!0),this.nodes.push(new Ys(e,t,d,o,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=yo)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),l=-(r?r.depth+1:0)+(o?0:1),a=(u,d)=>{for(;u>=0;u--){let f=t[u];if(f==""){if(u==t.length-1||u==0)continue;for(;d>=l;d--)if(a(u-1,d))return!0;return!1}else{let h=d>0||d==0&&o?this.nodes[d].type:r&&d>=l?r.node(d-l).type:null;if(!h||h.name!=f&&!h.isInGroup(f))return!1;d--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function nk(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ph.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function rk(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function gh(n){let e={};for(let t in n)e[t]=n[t];return e}function yh(n,e){let t=e.schema.nodes;for(let r in t){let o=t[r];if(!o.allowsMarkType(n))continue;let l=[],a=u=>{l.push(u);for(let d=0;d<u.edgeCount;d++){let{type:f,next:h}=u.edge(d);if(f==e||l.indexOf(h)<0&&a(h))return!0}};if(a(o.contentMatch))return!0}}class wo{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Iu(t).createDocumentFragment());let o=r,l=[];return e.forEach(a=>{if(l.length||a.marks.length){let u=0,d=0;for(;u<l.length&&d<a.marks.length;){let f=a.marks[d];if(!this.marks[f.type.name]){d++;continue}if(!f.eq(l[u][0])||f.type.spec.spanning===!1)break;u++,d++}for(;u<l.length;)o=l.pop()[1];for(;d<a.marks.length;){let f=a.marks[d++],h=this.serializeMark(f,a.isInline,t);h&&(l.push([f,o]),o.appendChild(h.dom),o=h.contentDOM||h.dom)}}o.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:o}=Qs(Iu(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let l=this.serializeMark(e.marks[o],e.isInline,t);l&&((l.contentDOM||l.dom).appendChild(r),r=l.dom)}return r}serializeMark(e,t,r={}){let o=this.marks[e.type.name];return o&&Qs(Iu(r),o(e,t),null,e.attrs)}static renderSpec(e,t,r=null,o){return Qs(e,t,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new wo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=vh(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return vh(e.marks)}}function vh(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Iu(n){return n.document||window.document}const wh=new WeakMap;function ik(n){let e=wh.get(n);return e===void 0&&wh.set(n,e=ok(n)),e}function ok(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)t(r[o]);else for(let o in r)t(r[o])}return t(n),e}function Qs(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],l;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(l=ik(r))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=o.indexOf(" ");a>0&&(t=o.slice(0,a),o=o.slice(a+1));let u,d=t?n.createElementNS(t,o):n.createElement(o),f=e[1],h=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){h=2;for(let m in f)if(f[m]!=null){let y=m.indexOf(" ");y>0?d.setAttributeNS(m.slice(0,y),m.slice(y+1),f[m]):m=="style"&&d.style?d.style.cssText=f[m]:d.setAttribute(m,f[m])}}for(let m=h;m<e.length;m++){let y=e[m];if(y===0){if(m<e.length-1||m>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:w,contentDOM:k}=Qs(n,y,t,r);if(d.appendChild(w),k){if(u)throw new RangeError("Multiple content holes");u=k}}}return{dom:d,contentDOM:u}}const kh=65535,Sh=Math.pow(2,16);function sk(n,e){return n+e*Sh}function xh(n){return n&kh}function lk(n){return(n-(n&kh))/Sh}const Ch=1,bh=2,Zs=4,Eh=8;class Tu{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Eh)>0}get deletedBefore(){return(this.delInfo&(Ch|Zs))>0}get deletedAfter(){return(this.delInfo&(bh|Zs))>0}get deletedAcross(){return(this.delInfo&Zs)>0}}class Gt{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Gt.empty)return Gt.empty}recover(e){let t=0,r=xh(e);if(!this.inverted)for(let o=0;o<r;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+t+lk(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let o=0,l=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?o:0);if(d>e)break;let f=this.ranges[u+l],h=this.ranges[u+a],m=d+f;if(e<=m){let y=f?e==d?-1:e==m?1:t:t,w=d+o+(y<0?0:h);if(r)return w;let k=e==(t<0?d:m)?null:sk(u/3,e-d),x=e==d?bh:e==m?Ch:Zs;return(t<0?e!=d:e!=m)&&(x|=Eh),new Tu(w,x,k)}o+=h-f}return r?e+o:new Tu(e+o,0,null)}touches(e,t){let r=0,o=xh(t),l=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?r:0);if(d>e)break;let f=this.ranges[u+l],h=d+f;if(e<=h&&u==o*3)return!0;r+=this.ranges[u+a]-f}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,l=0;o<this.ranges.length;o+=3){let a=this.ranges[o],u=a-(this.inverted?l:0),d=a+(this.inverted?0:l),f=this.ranges[o+t],h=this.ranges[o+r];e(u,u+f,d,d+h),l+=h-f}}invert(){return new Gt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Gt.empty:new Gt(e<0?[0,-e,0]:[0,0,e])}}Gt.empty=new Gt([]);class ko{constructor(e,t,r=0,o=e?e.length:0){this.mirror=t,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new ko(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],o!=null&&o<t?r+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),o!=null&&o>t?r-o-1:void 0)}}invert(){let e=new ko;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let o=0;for(let l=this.from;l<this.to;l++){let a=this._maps[l],u=a.mapResult(e,t);if(u.recover!=null){let d=this.getMirror(l);if(d!=null&&d>l&&d<this.to){l=d,e=this._maps[d].recover(u.recover);continue}}o|=u.delInfo,e=u.pos}return r?e:new Tu(e,o,null)}}const Au=Object.create(null);class Tt{getMap(){return Gt.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Au[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Au)throw new RangeError("Duplicate use of step JSON ID "+e);return Au[e]=t,t.prototype.jsonID=e,t}}class rt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new rt(e,null)}static fail(e){return new rt(null,e)}static fromReplace(e,t,r,o){try{return rt.ok(e.replace(t,r,o))}catch(l){if(l instanceof Vs)return rt.fail(l.message);throw l}}}function Nu(n,e,t){let r=[];for(let o=0;o<n.childCount;o++){let l=n.child(o);l.content.size&&(l=l.copy(Nu(l.content,e,l))),l.isInline&&(l=e(l,t,o)),r.push(l)}return $.fromArray(r)}class qn extends Tt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),l=new q(Nu(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),o),t.openStart,t.openEnd);return rt.fromReplace(e,this.from,this.to,l)}invert(){return new dn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new qn(t.pos,r.pos,this.mark)}merge(e){return e instanceof qn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new qn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new qn(t.from,t.to,e.markFromJSON(t.mark))}}Tt.jsonID("addMark",qn);class dn extends Tt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new q(Nu(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return rt.fromReplace(e,this.from,this.to,r)}invert(){return new qn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new dn(t.pos,r.pos,this.mark)}merge(e){return e instanceof dn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new dn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new dn(t.from,t.to,e.markFromJSON(t.mark))}}Tt.jsonID("removeMark",dn);class Xn extends Tt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return rt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return rt.fromReplace(e,this.pos,this.pos+1,new q($.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new Xn(this.pos,t.marks[o]);return new Xn(this.pos,this.mark)}}return new Ur(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Xn(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Xn(t.pos,e.markFromJSON(t.mark))}}Tt.jsonID("addNodeMark",Xn);class Ur extends Tt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return rt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return rt.fromReplace(e,this.pos,this.pos+1,new q($.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Xn(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ur(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ur(t.pos,e.markFromJSON(t.mark))}}Tt.jsonID("removeNodeMark",Ur);class pt extends Tt{constructor(e,t,r,o=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=o}apply(e){return this.structure&&Mu(e,this.from,this.to)?rt.fail("Structure replace would overwrite content"):rt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Gt([this.from,this.to-this.from,this.slice.size])}invert(e){return new pt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new pt(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof pt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?q.empty:new q(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new pt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?q.empty:new q(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new pt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new pt(t.from,t.to,q.fromJSON(e,t.slice),!!t.structure)}}Tt.jsonID("replace",pt);class ht extends Tt{constructor(e,t,r,o,l,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=o,this.slice=l,this.insert=a,this.structure=u}apply(e){if(this.structure&&(Mu(e,this.from,this.gapFrom)||Mu(e,this.gapTo,this.to)))return rt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return rt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?rt.fromReplace(e,this.from,this.to,r):rt.fail("Content does not fit in gap")}getMap(){return new Gt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ht(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||l>r.pos?null:new ht(t.pos,r.pos,o,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ht(t.from,t.to,t.gapFrom,t.gapTo,q.fromJSON(e,t.slice),t.insert,!!t.structure)}}Tt.jsonID("replaceAround",ht);function Mu(n,e,t){let r=n.resolve(e),o=t-e,l=r.depth;for(;o>0&&l>0&&r.indexAfter(l)==r.node(l).childCount;)l--,o--;if(o>0){let a=r.node(l).maybeChild(r.indexAfter(l));for(;o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}}return!1}function ak(n,e,t,r){let o=[],l=[],a,u;n.doc.nodesBetween(e,t,(d,f,h)=>{if(!d.isInline)return;let m=d.marks;if(!r.isInSet(m)&&h.type.allowsMarkType(r.type)){let y=Math.max(f,e),w=Math.min(f+d.nodeSize,t),k=r.addToSet(m);for(let x=0;x<m.length;x++)m[x].isInSet(k)||(a&&a.to==y&&a.mark.eq(m[x])?a.to=w:o.push(a=new dn(y,w,m[x])));u&&u.to==y?u.to=w:l.push(u=new qn(y,w,r))}}),o.forEach(d=>n.step(d)),l.forEach(d=>n.step(d))}function uk(n,e,t,r){let o=[],l=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;l++;let d=null;if(r instanceof Js){let f=a.marks,h;for(;h=r.isInSet(f);)(d||(d=[])).push(h),f=h.removeFromSet(f)}else r?r.isInSet(a.marks)&&(d=[r]):d=a.marks;if(d&&d.length){let f=Math.min(u+a.nodeSize,t);for(let h=0;h<d.length;h++){let m=d[h],y;for(let w=0;w<o.length;w++){let k=o[w];k.step==l-1&&m.eq(o[w].style)&&(y=k)}y?(y.to=f,y.step=l):o.push({style:m,from:Math.max(u,e),to:f,step:l})}}}),o.forEach(a=>n.step(new dn(a.from,a.to,a.style)))}function Ru(n,e,t,r=t.contentMatch,o=!0){let l=n.doc.nodeAt(e),a=[],u=e+1;for(let d=0;d<l.childCount;d++){let f=l.child(d),h=u+f.nodeSize,m=r.matchType(f.type);if(!m)a.push(new pt(u,h,q.empty));else{r=m;for(let y=0;y<f.marks.length;y++)t.allowsMarkType(f.marks[y].type)||n.step(new dn(u,h,f.marks[y]));if(o&&f.isText&&t.whitespace!="pre"){let y,w=/\r?\n|\r/g,k;for(;y=w.exec(f.text);)k||(k=new q($.from(t.schema.text(" ",t.allowedMarks(f.marks))),0,0)),a.push(new pt(u+y.index,u+y.index+y[0].length,k))}}u=h}if(!r.validEnd){let d=r.fillBefore($.empty,!0);n.replace(u,u,new q(d,0,0))}for(let d=a.length-1;d>=0;d--)n.step(a[d])}function ck(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function hi(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let o=n.$from.node(r),l=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&o.canReplace(l,a,t))return r;if(r==0||o.type.spec.isolating||!ck(o,l,a))break}return null}function dk(n,e,t){let{$from:r,$to:o,depth:l}=e,a=r.before(l+1),u=o.after(l+1),d=a,f=u,h=$.empty,m=0;for(let k=l,x=!1;k>t;k--)x||r.index(k)>0?(x=!0,h=$.from(r.node(k).copy(h)),m++):d--;let y=$.empty,w=0;for(let k=l,x=!1;k>t;k--)x||o.after(k+1)<o.end(k)?(x=!0,y=$.from(o.node(k).copy(y)),w++):f++;n.step(new ht(d,f,a,u,new q(h.append(y),m,w),h.size-m,!0))}function Ou(n,e,t=null,r=n){let o=fk(n,e),l=o&&pk(r,e);return l?o.map(Ih).concat({type:e,attrs:t}).concat(l.map(Ih)):null}function Ih(n){return{type:n,attrs:null}}function fk(n,e){let{parent:t,startIndex:r,endIndex:o}=n,l=t.contentMatchAt(r).findWrapping(e);if(!l)return null;let a=l.length?l[0]:e;return t.canReplaceWith(r,o,a)?l:null}function pk(n,e){let{parent:t,startIndex:r,endIndex:o}=n,l=t.child(r),a=e.contentMatch.findWrapping(l.type);if(!a)return null;let d=(a.length?a[a.length-1]:e).contentMatch;for(let f=r;d&&f<o;f++)d=d.matchType(t.child(f).type);return!d||!d.validEnd?null:a}function hk(n,e,t){let r=$.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=$.from(t[a].type.create(t[a].attrs,r))}let o=e.start,l=e.end;n.step(new ht(o,l,o,l,new q(r,0,0),t.length,!0))}function mk(n,e,t,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{let d=typeof o=="function"?o(a):o;if(a.isTextblock&&!a.hasMarkup(r,d)&&gk(n.doc,n.mapping.slice(l).map(u),r)){let f=null;if(r.schema.linebreakReplacement){let w=r.whitespace=="pre",k=!!r.contentMatch.matchType(r.schema.linebreakReplacement);w&&!k?f=!1:!w&&k&&(f=!0)}f===!1&&Ah(n,a,u,l),Ru(n,n.mapping.slice(l).map(u,1),r,void 0,f===null);let h=n.mapping.slice(l),m=h.map(u,1),y=h.map(u+a.nodeSize,1);return n.step(new ht(m,y,m+1,y-1,new q($.from(r.create(d,null,a.marks)),0,0),1,!0)),f===!0&&Th(n,a,u,l),!1}})}function Th(n,e,t,r){e.forEach((o,l)=>{if(o.isText){let a,u=/\r?\n|\r/g;for(;a=u.exec(o.text);){let d=n.mapping.slice(r).map(t+1+l+a.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function Ah(n,e,t,r){e.forEach((o,l)=>{if(o.type==o.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+l);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function gk(n,e,t){let r=n.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,t)}function yk(n,e,t,r,o){let l=n.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");t||(t=l.type);let a=t.create(r,null,o||l.marks);if(l.isLeaf)return n.replaceWith(e,e+l.nodeSize,a);if(!t.validContent(l.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ht(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new q($.from(a),0,0),1,!0))}function _n(n,e,t=1,r){let o=n.resolve(e),l=o.depth-t,a=r&&r[r.length-1]||o.parent;if(l<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let f=o.depth-1,h=t-2;f>l;f--,h--){let m=o.node(f),y=o.index(f);if(m.type.spec.isolating)return!1;let w=m.content.cutByIndex(y,m.childCount),k=r&&r[h+1];k&&(w=w.replaceChild(0,k.type.create(k.attrs)));let x=r&&r[h]||m;if(!m.canReplace(y+1,m.childCount)||!x.type.validContent(w))return!1}let u=o.indexAfter(l),d=r&&r[0];return o.node(l).canReplaceWith(u,u,d?d.type:o.node(l+1).type)}function vk(n,e,t=1,r){let o=n.doc.resolve(e),l=$.empty,a=$.empty;for(let u=o.depth,d=o.depth-t,f=t-1;u>d;u--,f--){l=$.from(o.node(u).copy(l));let h=r&&r[f];a=$.from(h?h.type.create(h.attrs,a):o.node(u).copy(a))}n.step(new pt(e,e,new q(l.append(a),t,t),!0))}function er(n,e){let t=n.resolve(e),r=t.index();return Nh(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function wk(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let o=0;o<e.childCount;o++){let l=e.child(o),a=l.type==r?n.type.schema.nodes.text:l.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(l.marks))return!1}return t.validEnd}function Nh(n,e){return!!(n&&e&&!n.isLeaf&&wk(n,e))}function qs(n,e,t=-1){let r=n.resolve(e);for(let o=r.depth;;o--){let l,a,u=r.index(o);if(o==r.depth?(l=r.nodeBefore,a=r.nodeAfter):t>0?(l=r.node(o+1),u++,a=r.node(o).maybeChild(u)):(l=r.node(o).maybeChild(u-1),a=r.node(o+1)),l&&!l.isTextblock&&Nh(l,a)&&r.node(o).canReplace(u,u+1))return e;if(o==0)break;e=t<0?r.before(o):r.after(o)}}function kk(n,e,t){let r=null,{linebreakReplacement:o}=n.doc.type.schema,l=n.doc.resolve(e-t),a=l.node().type;if(o&&a.inlineContent){let h=a.whitespace=="pre",m=!!a.contentMatch.matchType(o);h&&!m?r=!1:!h&&m&&(r=!0)}let u=n.steps.length;if(r===!1){let h=n.doc.resolve(e+t);Ah(n,h.node(),h.before(),u)}a.inlineContent&&Ru(n,e+t-1,a,l.node().contentMatchAt(l.index()),r==null);let d=n.mapping.slice(u),f=d.map(e-t);if(n.step(new pt(f,d.map(e+t,-1),q.empty,!0)),r===!0){let h=n.doc.resolve(f);Th(n,h.node(),h.before(),n.steps.length)}return n}function Sk(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let l=r.index(o);if(r.node(o).canReplaceWith(l,l,t))return r.before(o+1);if(l>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let l=r.indexAfter(o);if(r.node(o).canReplaceWith(l,l,t))return r.after(o+1);if(l<r.node(o).childCount)return null}return null}function Mh(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let o=t.content;for(let l=0;l<t.openStart;l++)o=o.firstChild.content;for(let l=1;l<=(t.openStart==0&&t.size?2:1);l++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,d=r.index(a)+(u>0?1:0),f=r.node(a),h=!1;if(l==1)h=f.canReplace(d,d,o);else{let m=f.contentMatchAt(d).findWrapping(o.firstChild.type);h=m&&f.canReplaceWith(d,d,m[0])}if(h)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function Xs(n,e,t=e,r=q.empty){if(e==t&&!r.size)return null;let o=n.resolve(e),l=n.resolve(t);return Rh(o,l,r)?new pt(e,t,r):new xk(o,l,r).fit()}function Rh(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class xk{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=$.empty;for(let o=0;o<=e.depth;o++){let l=e.node(o);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=$.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let l=this.placed,a=r.depth,u=o.depth;for(;a&&u&&l.childCount==1;)l=l.firstChild.content,a--,u--;let d=new q(l,a,u);return e>-1?new ht(r.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||r.pos!=this.$to.pos?new pt(r.pos,o.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let l=t.firstChild;if(t.childCount>1&&(o=0),l.type.spec.isolating&&o<=r){e=r;break}t=l.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let o,l=null;r?(l=Lu(this.unplaced.content,r-1).firstChild,o=l.content):o=this.unplaced.content;let a=o.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:f}=this.frontier[u],h,m=null;if(t==1&&(a?f.matchType(a.type)||(m=f.fillBefore($.from(a),!1)):l&&d.compatibleContent(l.type)))return{sliceDepth:r,frontierDepth:u,parent:l,inject:m};if(t==2&&a&&(h=f.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:u,parent:l,wrap:h};if(l&&f.matchType(l.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Lu(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new q(e,t+1,Math.max(r,o.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Lu(e,t);if(o.childCount<=1&&t>0){let l=e.size-t<=t+o.size;this.unplaced=new q(So(e,t-1,1),t-1,l?t-1:r)}else this.unplaced=new q(So(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:o,wrap:l}){for(;this.depth>t;)this.closeFrontierNode();if(l)for(let x=0;x<l.length;x++)this.openFrontierNode(l[x]);let a=this.unplaced,u=r?r.content:a.content,d=a.openStart-e,f=0,h=[],{match:m,type:y}=this.frontier[t];if(o){for(let x=0;x<o.childCount;x++)h.push(o.child(x));m=m.matchFragment(o)}let w=u.size+e-(a.content.size-a.openEnd);for(;f<u.childCount;){let x=u.child(f),b=m.matchType(x.type);if(!b)break;f++,(f>1||d==0||x.content.size)&&(m=b,h.push(Oh(x.mark(y.allowedMarks(x.marks)),f==1?d:0,f==u.childCount?w:-1)))}let k=f==u.childCount;k||(w=-1),this.placed=xo(this.placed,t,$.from(h)),this.frontier[t].match=m,k&&w<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,b=u;x<w;x++){let E=b.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),b=E.content}this.unplaced=k?e==0?q.empty:new q(So(a.content,e-1,1),e-1,w<0?a.openEnd:e-1):new q(So(a.content,e,f),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Du(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:o}=this.frontier[t],l=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=Du(e,t,o,r,l);if(a){for(let u=t-1;u>=0;u--){let{match:d,type:f}=this.frontier[u],h=Du(e,u,f,d,!0);if(!h||h.childCount)continue e}return{depth:t,fit:a,move:l?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=xo(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let o=e.node(r),l=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,l)}return e}openFrontierNode(e,t=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=xo(this.placed,this.depth,$.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore($.empty,!0);t.childCount&&(this.placed=xo(this.placed,this.frontier.length,t))}}function So(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(So(n.firstChild.content,e-1,t)))}function xo(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(xo(n.lastChild.content,e-1,t)))}function Lu(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Oh(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Oh(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore($.empty,!0)))),n.copy(r)}function Du(n,e,t,r,o){let l=n.node(e),a=o?n.indexAfter(e):n.index(e);if(a==l.childCount&&!t.compatibleContent(l.type))return null;let u=r.fillBefore(l.content,!0,a);return u&&!Ck(t,l.content,a)?u:null}function Ck(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function bk(n){return n.spec.defining||n.spec.definingForContent}function Ek(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let o=n.doc.resolve(e),l=n.doc.resolve(t);if(Rh(o,l,r))return n.step(new pt(e,t,r));let a=Dh(o,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let u=-(o.depth+1);a.unshift(u);for(let y=o.depth,w=o.pos-1;y>0;y--,w--){let k=o.node(y).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;a.indexOf(y)>-1?u=y:o.before(y)==w&&a.splice(1,0,-y)}let d=a.indexOf(u),f=[],h=r.openStart;for(let y=r.content,w=0;;w++){let k=y.firstChild;if(f.push(k),w==r.openStart)break;y=k.content}for(let y=h-1;y>=0;y--){let w=f[y],k=bk(w.type);if(k&&!w.sameMarkup(o.node(Math.abs(u)-1)))h=y;else if(k||!w.type.isTextblock)break}for(let y=r.openStart;y>=0;y--){let w=(y+h+1)%(r.openStart+1),k=f[w];if(k)for(let x=0;x<a.length;x++){let b=a[(x+d)%a.length],E=!0;b<0&&(E=!1,b=-b);let T=o.node(b-1),M=o.index(b-1);if(T.canReplaceWith(M,M,k.type,k.marks))return n.replace(o.before(b),E?l.after(b):t,new q(Lh(r.content,0,r.openStart,w),w,r.openEnd))}}let m=n.steps.length;for(let y=a.length-1;y>=0&&(n.replace(e,t,r),!(n.steps.length>m));y--){let w=a[y];w<0||(e=o.before(w),t=l.after(w))}}function Lh(n,e,t,r,o){if(e<t){let l=n.firstChild;n=n.replaceChild(0,l.copy(Lh(l.content,e+1,t,r,l)))}if(e>r){let l=o.contentMatchAt(0),a=l.fillBefore(n).append(n);n=a.append(l.matchFragment(a).fillBefore($.empty,!0))}return n}function Ik(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let o=Sk(n.doc,e,r.type);o!=null&&(e=t=o)}n.replaceRange(e,t,new q($.from(r),0,0))}function Tk(n,e,t){let r=n.doc.resolve(e),o=n.doc.resolve(t),l=Dh(r,o);for(let a=0;a<l.length;a++){let u=l[a],d=a==l.length-1;if(d&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),o.end(u));if(u>0&&(d||r.node(u-1).canReplace(r.index(u-1),o.indexAfter(u-1))))return n.delete(r.before(u),o.after(u))}for(let a=1;a<=r.depth&&a<=o.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&o.end(a)-t!=o.depth-a&&r.start(a-1)==o.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),o.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function Dh(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let o=r;o>=0;o--){let l=n.start(o);if(l<n.pos-(n.depth-o)||e.end(o)>e.pos+(e.depth-o)||n.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(l==e.start(o)||o==n.depth&&o==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==l-1)&&t.push(o)}return t}class mi extends Tt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return rt.fail("No node at attribute step's position");let r=Object.create(null);for(let l in t.attrs)r[l]=t.attrs[l];r[this.attr]=this.value;let o=t.type.create(r,null,t.marks);return rt.fromReplace(e,this.pos,this.pos+1,new q($.from(o),0,t.isLeaf?0:1))}getMap(){return Gt.empty}invert(e){return new mi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new mi(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new mi(t.pos,t.attr,t.value)}}Tt.jsonID("attr",mi);class Co extends Tt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return rt.ok(r)}getMap(){return Gt.empty}invert(e){return new Co(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Co(t.attr,t.value)}}Tt.jsonID("docAttr",Co);let gi=class extends Error{};gi=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t},gi.prototype=Object.create(Error.prototype),gi.prototype.constructor=gi,gi.prototype.name="TransformError";class Ak{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ko}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new gi(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=q.empty){let o=Xs(this.doc,e,t,r);return o&&this.step(o),this}replaceWith(e,t,r){return this.replace(e,t,new q($.from(r),0,0))}delete(e,t){return this.replace(e,t,q.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Ek(this,e,t,r),this}replaceRangeWith(e,t,r){return Ik(this,e,t,r),this}deleteRange(e,t){return Tk(this,e,t),this}lift(e,t){return dk(this,e,t),this}join(e,t=1){return kk(this,e,t),this}wrap(e,t){return hk(this,e,t),this}setBlockType(e,t=e,r,o=null){return mk(this,e,t,r,o),this}setNodeMarkup(e,t,r=null,o){return yk(this,e,t,r,o),this}setNodeAttribute(e,t,r){return this.step(new mi(e,t,r)),this}setDocAttribute(e,t){return this.step(new Co(e,t)),this}addNodeMark(e,t){return this.step(new Xn(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Ve)t.isInSet(r.marks)&&this.step(new Ur(e,t));else{let o=r.marks,l,a=[];for(;l=t.isInSet(o);)a.push(new Ur(e,l)),o=l.removeFromSet(o);for(let u=a.length-1;u>=0;u--)this.step(a[u])}return this}split(e,t=1,r){return vk(this,e,t,r),this}addMark(e,t,r){return ak(this,e,t,r),this}removeMark(e,t,r){return uk(this,e,t,r),this}clearIncompatible(e,t,r){return Ru(this,e,t,r),this}}const Pu=Object.create(null);class Ne{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Nk(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=q.empty){let r=t.content.lastChild,o=null;for(let u=0;u<t.openEnd;u++)o=r,r=r.lastChild;let l=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:d,$to:f}=a[u],h=e.mapping.slice(l);e.replaceRange(h.map(d.pos),h.map(f.pos),u?q.empty:t),u==0&&Fh(e,l,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:u}=o[l],d=e.mapping.slice(r),f=d.map(a.pos),h=d.map(u.pos);l?e.deleteRange(f,h):(e.replaceRangeWith(f,h,t),Fh(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let o=e.parent.inlineContent?new Ce(e):yi(e.node(0),e.parent,e.pos,e.index(),t,r);if(o)return o;for(let l=e.depth-1;l>=0;l--){let a=t<0?yi(e.node(0),e.node(l),e.before(l+1),e.index(l),t,r):yi(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Kt(e.node(0))}static atStart(e){return yi(e,e,0,0,1)||new Kt(e)}static atEnd(e){return yi(e,e,e.content.size,e.childCount,-1)||new Kt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Pu[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Pu)throw new RangeError("Duplicate use of selection JSON ID "+e);return Pu[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Ce.between(this.$anchor,this.$head).getBookmark()}}Ne.prototype.visible=!0;class Nk{constructor(e,t){this.$from=e,this.$to=t}}let Ph=!1;function _h(n){!Ph&&!n.parent.inlineContent&&(Ph=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Ce extends Ne{constructor(e,t=e){_h(e),_h(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Ne.near(r);let o=e.resolve(t.map(this.anchor));return new Ce(o.parent.inlineContent?o:r,r)}replace(e,t=q.empty){if(super.replace(e,t),t==q.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ce&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new el(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ce(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let o=e.resolve(t);return new this(o,r==t?o:e.resolve(r))}static between(e,t,r){let o=e.pos-t.pos;if((!r||o)&&(r=o>=0?1:-1),!t.parent.inlineContent){let l=Ne.findFrom(t,r,!0)||Ne.findFrom(t,-r,!0);if(l)t=l.$head;else return Ne.near(t,r)}return e.parent.inlineContent||(o==0?e=t:(e=(Ne.findFrom(e,-r,!0)||Ne.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new Ce(e,t)}}Ne.jsonID("text",Ce);class el{constructor(e,t){this.anchor=e,this.head=t}map(e){return new el(e.map(this.anchor),e.map(this.head))}resolve(e){return Ce.between(e.resolve(this.anchor),e.resolve(this.head))}}class he extends Ne{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:o}=t.mapResult(this.anchor),l=e.resolve(o);return r?Ne.near(l):new he(l)}content(){return new q($.from(this.node),0,0)}eq(e){return e instanceof he&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new _u(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new he(e.resolve(t.anchor))}static create(e,t){return new he(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}he.prototype.visible=!1,Ne.jsonID("node",he);class _u{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new el(r,r):new _u(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&he.isSelectable(r)?new he(t):Ne.near(t)}}class Kt extends Ne{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=q.empty){if(t==q.empty){e.delete(0,e.doc.content.size);let r=Ne.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Kt(e)}map(e){return new Kt(e)}eq(e){return e instanceof Kt}getBookmark(){return Mk}}Ne.jsonID("all",Kt);const Mk={map(){return this},resolve(n){return new Kt(n)}};function yi(n,e,t,r,o,l=!1){if(e.inlineContent)return Ce.create(n,t);for(let a=r-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){let u=e.child(a);if(u.isAtom){if(!l&&he.isSelectable(u))return he.create(n,t-(o<0?u.nodeSize:0))}else{let d=yi(n,u,t+o,o<0?u.childCount:0,o,l);if(d)return d}t+=u.nodeSize*o}return null}function Fh(n,e,t){let r=n.steps.length-1;if(r<e)return;let o=n.steps[r];if(!(o instanceof pt||o instanceof ht))return;let l=n.mapping.maps[r],a;l.forEach((u,d,f,h)=>{a==null&&(a=h)}),n.setSelection(Ne.near(n.doc.resolve(a),t))}function zh(n,e){return!e||!n?n:n.bind(e)}class tl{constructor(e,t,r){this.name=e,this.init=zh(t.init,r),this.apply=zh(t.apply,r)}}new tl("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new tl("selection",{init(n,e){return n.selection||Ne.atStart(e.doc)},apply(n){return n.selection}}),new tl("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new tl("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}});function Bh(n,e,t){for(let r in n){let o=n[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=Bh(o,e,{})),t[r]=o}return t}class at{constructor(e){this.spec=e,this.props={},e.props&&Bh(e.props,this,this.props),this.key=e.key?e.key.key:jh("plugin")}getState(e){return e[this.key]}}const Fu=Object.create(null);function jh(n){return n in Fu?n+"$"+ ++Fu[n]:(Fu[n]=0,n+"$")}class mt{constructor(e="key"){this.key=jh(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const zu=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Uh(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Wh=(n,e,t)=>{let r=Uh(n,t);if(!r)return!1;let o=Bu(r);if(!o){let a=r.blockRange(),u=a&&hi(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let l=o.nodeBefore;if(Zh(n,o,e,-1))return!0;if(r.parent.content.size==0&&(vi(l,"end")||he.isSelectable(l)))for(let a=r.depth;;a--){let u=Xs(n.doc,r.before(a),r.after(a),q.empty);if(u&&u.slice.size<u.to-u.from){if(e){let d=n.tr.step(u);d.setSelection(vi(l,"end")?Ne.findFrom(d.doc.resolve(d.mapping.map(o.pos,-1)),-1):he.create(d.doc,o.pos-l.nodeSize)),e(d.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return l.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos-l.nodeSize,o.pos).scrollIntoView()),!0):!1},Rk=(n,e,t)=>{let r=Uh(n,t);if(!r)return!1;let o=Bu(r);return o?Hh(n,o,e):!1},Ok=(n,e,t)=>{let r=$h(n,t);if(!r)return!1;let o=ju(r);return o?Hh(n,o,e):!1};function Hh(n,e,t){let r=e.nodeBefore,o=r,l=e.pos-1;for(;!o.isTextblock;l--){if(o.type.spec.isolating)return!1;let h=o.lastChild;if(!h)return!1;o=h}let a=e.nodeAfter,u=a,d=e.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let h=u.firstChild;if(!h)return!1;u=h}let f=Xs(n.doc,l,d,q.empty);if(!f||f.from!=l||f instanceof pt&&f.slice.size>=d-l)return!1;if(t){let h=n.tr.step(f);h.setSelection(Ce.create(h.doc,l)),t(h.scrollIntoView())}return!0}function vi(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const Vh=(n,e,t)=>{let{$head:r,empty:o}=n.selection,l=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;l=Bu(r)}let a=l&&l.nodeBefore;return!a||!he.isSelectable(a)?!1:(e&&e(n.tr.setSelection(he.create(n.doc,l.pos-a.nodeSize)).scrollIntoView()),!0)};function Bu(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function $h(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Gh=(n,e,t)=>{let r=$h(n,t);if(!r)return!1;let o=ju(r);if(!o)return!1;let l=o.nodeAfter;if(Zh(n,o,e,1))return!0;if(r.parent.content.size==0&&(vi(l,"start")||he.isSelectable(l))){let a=Xs(n.doc,r.before(),r.after(),q.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(vi(l,"start")?Ne.findFrom(u.doc.resolve(u.mapping.map(o.pos)),1):he.create(u.doc,u.mapping.map(o.pos))),e(u.scrollIntoView())}return!0}}return l.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos,o.pos+l.nodeSize).scrollIntoView()),!0):!1},Kh=(n,e,t)=>{let{$head:r,empty:o}=n.selection,l=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;l=ju(r)}let a=l&&l.nodeAfter;return!a||!he.isSelectable(a)?!1:(e&&e(n.tr.setSelection(he.create(n.doc,l.pos)).scrollIntoView()),!0)};function ju(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Lk=(n,e)=>{let t=n.selection,r=t instanceof he,o;if(r){if(t.node.isTextblock||!er(n.doc,t.from))return!1;o=t.from}else if(o=qs(n.doc,t.from,-1),o==null)return!1;if(e){let l=n.tr.join(o);r&&l.setSelection(he.create(l.doc,o-n.doc.resolve(o).nodeBefore.nodeSize)),e(l.scrollIntoView())}return!0},Dk=(n,e)=>{let t=n.selection,r;if(t instanceof he){if(t.node.isTextblock||!er(n.doc,t.to))return!1;r=t.to}else if(r=qs(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},Pk=(n,e)=>{let{$from:t,$to:r}=n.selection,o=t.blockRange(r),l=o&&hi(o);return l==null?!1:(e&&e(n.tr.lift(o,l).scrollIntoView()),!0)},Jh=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Uu(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const _k=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let o=t.node(-1),l=t.indexAfter(-1),a=Uu(o.contentMatchAt(l));if(!a||!o.canReplaceWith(l,l,a))return!1;if(e){let u=t.after(),d=n.tr.replaceWith(u,u,a.createAndFill());d.setSelection(Ne.near(d.doc.resolve(u),1)),e(d.scrollIntoView())}return!0},Yh=(n,e)=>{let t=n.selection,{$from:r,$to:o}=t;if(t instanceof Kt||r.parent.inlineContent||o.parent.inlineContent)return!1;let l=Uu(o.parent.contentMatchAt(o.indexAfter()));if(!l||!l.isTextblock)return!1;if(e){let a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,u=n.tr.insert(a,l.createAndFill());u.setSelection(Ce.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},Qh=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let l=t.before();if(_n(n.doc,l))return e&&e(n.tr.split(l).scrollIntoView()),!0}let r=t.blockRange(),o=r&&hi(r);return o==null?!1:(e&&e(n.tr.lift(r,o).scrollIntoView()),!0)};function Fk(n){return(e,t)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof he&&e.selection.node.isBlock)return!r.parentOffset||!_n(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let l=[],a,u,d=!1,f=!1;for(let w=r.depth;;w--)if(r.node(w).isBlock){d=r.end(w)==r.pos+(r.depth-w),f=r.start(w)==r.pos-(r.depth-w),u=Uu(r.node(w-1).contentMatchAt(r.indexAfter(w-1))),l.unshift(d&&u?{type:u}:null),a=w;break}else{if(w==1)return!1;l.unshift(null)}let h=e.tr;(e.selection instanceof Ce||e.selection instanceof Kt)&&h.deleteSelection();let m=h.mapping.map(r.pos),y=_n(h.doc,m,l.length,l);if(y||(l[0]=u?{type:u}:null,y=_n(h.doc,m,l.length,l)),!y)return!1;if(h.split(m,l.length,l),!d&&f&&r.node(a).type!=u){let w=h.mapping.map(r.before(a)),k=h.doc.resolve(w);u&&r.node(a-1).canReplaceWith(k.index(),k.index()+1,u)&&h.setNodeMarkup(h.mapping.map(r.before(a)),u)}return t&&t(h.scrollIntoView()),!0}}const zk=Fk(),Bk=(n,e)=>{let{$from:t,to:r}=n.selection,o,l=t.sharedDepth(r);return l==0?!1:(o=t.before(l),e&&e(n.tr.setSelection(he.create(n.doc,o))),!0)};function jk(n,e,t){let r=e.nodeBefore,o=e.nodeAfter,l=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(l-1,l)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(l,l+1)||!(o.isTextblock||er(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Zh(n,e,t,r){let o=e.nodeBefore,l=e.nodeAfter,a,u,d=o.type.spec.isolating||l.type.spec.isolating;if(!d&&jk(n,e,t))return!0;let f=!d&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(a=(u=o.contentMatchAt(o.childCount)).findWrapping(l.type))&&u.matchType(a[0]||l.type).validEnd){if(t){let w=e.pos+l.nodeSize,k=$.empty;for(let E=a.length-1;E>=0;E--)k=$.from(a[E].create(null,k));k=$.from(o.copy(k));let x=n.tr.step(new ht(e.pos-1,w,e.pos,w,new q(k,1,0),a.length,!0)),b=x.doc.resolve(w+2*a.length);b.nodeAfter&&b.nodeAfter.type==o.type&&er(x.doc,b.pos)&&x.join(b.pos),t(x.scrollIntoView())}return!0}let h=l.type.spec.isolating||r>0&&d?null:Ne.findFrom(e,1),m=h&&h.$from.blockRange(h.$to),y=m&&hi(m);if(y!=null&&y>=e.depth)return t&&t(n.tr.lift(m,y).scrollIntoView()),!0;if(f&&vi(l,"start",!0)&&vi(o,"end")){let w=o,k=[];for(;k.push(w),!w.isTextblock;)w=w.lastChild;let x=l,b=1;for(;!x.isTextblock;x=x.firstChild)b++;if(w.canReplace(w.childCount,w.childCount,x.content)){if(t){let E=$.empty;for(let M=k.length-1;M>=0;M--)E=$.from(k[M].copy(E));let T=n.tr.step(new ht(e.pos-k.length,e.pos+l.nodeSize,e.pos+b,e.pos+l.nodeSize-b,new q(E,k.length,0),0,!0));t(T.scrollIntoView())}return!0}}return!1}function qh(n){return function(e,t){let r=e.selection,o=n<0?r.$from:r.$to,l=o.depth;for(;o.node(l).isInline;){if(!l)return!1;l--}return o.node(l).isTextblock?(t&&t(e.tr.setSelection(Ce.create(e.doc,n<0?o.start(l):o.end(l)))),!0):!1}}const Uk=qh(-1),Wk=qh(1);function Hk(n,e=null){return function(t,r){let{$from:o,$to:l}=t.selection,a=o.blockRange(l),u=a&&Ou(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function Xh(n,e=null){return function(t,r){let o=!1;for(let l=0;l<t.selection.ranges.length&&!o;l++){let{$from:{pos:a},$to:{pos:u}}=t.selection.ranges[l];t.doc.nodesBetween(a,u,(d,f)=>{if(o)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)o=!0;else{let h=t.doc.resolve(f),m=h.index();o=h.parent.canReplaceWith(m,m+1,n)}})}if(!o)return!1;if(r){let l=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:u},$to:{pos:d}}=t.selection.ranges[a];l.setBlockType(u,d,n,e)}r(l.scrollIntoView())}return!0}}function Wu(...n){return function(e,t,r){for(let o=0;o<n.length;o++)if(n[o](e,t,r))return!0;return!1}}Wu(zu,Wh,Vh),Wu(zu,Gh,Kh),Wu(Jh,Yh,Qh,zk),typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Vk(n,e=null){return function(t,r){let{$from:o,$to:l}=t.selection,a=o.blockRange(l);if(!a)return!1;let u=r?t.tr:null;return $k(u,a,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function $k(n,e,t,r=null){let o=!1,l=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=a.resolve(e.start-2);l=new Gs(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Gs(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let u=Ou(l,t,r,e);return u?(n&&Gk(n,e,u,o,t),!0):!1}function Gk(n,e,t,r,o){let l=$.empty;for(let h=t.length-1;h>=0;h--)l=$.from(t[h].type.create(t[h].attrs,l));n.step(new ht(e.start-(r?2:0),e.end,e.start,e.end,new q(l,0,0),t.length,!0));let a=0;for(let h=0;h<t.length;h++)t[h].type==o&&(a=h+1);let u=t.length-a,d=e.start+t.length-(r?2:0),f=e.parent;for(let h=e.startIndex,m=e.endIndex,y=!0;h<m;h++,y=!1)!y&&_n(n.doc,d,u)&&(n.split(d,u),d+=2*u),d+=f.child(h).nodeSize;return n}function Kk(n){return function(e,t){let{$from:r,$to:o}=e.selection,l=r.blockRange(o,a=>a.childCount>0&&a.firstChild.type==n);return l?t?r.node(l.depth-1).type==n?Jk(e,t,n,l):Yk(e,t,l):!0:!1}}function Jk(n,e,t,r){let o=n.tr,l=r.end,a=r.$to.end(r.depth);l<a&&(o.step(new ht(l-1,a,l,a,new q($.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Gs(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));const u=hi(r);if(u==null)return!1;o.lift(r,u);let d=o.doc.resolve(o.mapping.map(l,-1)-1);return er(o.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&o.join(d.pos),e(o.scrollIntoView()),!0}function Yk(n,e,t){let r=n.tr,o=t.parent;for(let w=t.end,k=t.endIndex-1,x=t.startIndex;k>x;k--)w-=o.child(k).nodeSize,r.delete(w-1,w+1);let l=r.doc.resolve(t.start),a=l.nodeAfter;if(r.mapping.map(t.end)!=t.start+l.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,d=t.endIndex==o.childCount,f=l.node(-1),h=l.index(-1);if(!f.canReplace(h+(u?0:1),h+1,a.content.append(d?$.empty:$.from(o))))return!1;let m=l.pos,y=m+a.nodeSize;return r.step(new ht(m-(u?1:0),y+(d?1:0),m+1,y-1,new q((u?$.empty:$.from(o.copy($.empty))).append(d?$.empty:$.from(o.copy($.empty))),u?0:1,d?0:1),u?0:1)),e(r.scrollIntoView()),!0}function Qk(n){return function(e,t){let{$from:r,$to:o}=e.selection,l=r.blockRange(o,f=>f.childCount>0&&f.firstChild.type==n);if(!l)return!1;let a=l.startIndex;if(a==0)return!1;let u=l.parent,d=u.child(a-1);if(d.type!=n)return!1;if(t){let f=d.lastChild&&d.lastChild.type==u.type,h=$.from(f?n.create():null),m=new q($.from(n.create(null,$.from(u.type.create(null,h)))),f?3:1,0),y=l.start,w=l.end;t(e.tr.step(new ht(y-(f?3:1),w,y,w,m,1,!0)).scrollIntoView())}return!0}}const Wr=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},em=function(n,e,t,r){return t&&(tm(n,e,t,r,-1)||tm(n,e,t,r,1))},Zk=/^(img|br|input|textarea|hr)$/i;function tm(n,e,t,r,o){for(var l;;){if(n==t&&e==r)return!0;if(e==(o<0?0:nl(n))){let a=n.parentNode;if(!a||a.nodeType!=1||Hu(n)||Zk.test(n.nodeName)||n.contentEditable=="false")return!1;e=Wr(n)+(o<0?0:1),n=a}else if(n.nodeType==1){let a=n.childNodes[e+(o<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((l=a.pmViewDesc)===null||l===void 0)&&l.ignoreForSelection)e+=o;else return!1;else n=a,e=o<0?nl(n):0}else return!1}}function nl(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function qk(n,e,t){for(let r=e==0,o=e==nl(n);r||o;){if(n==t)return!0;let l=Wr(n);if(n=n.parentNode,!n)return!1;r=r&&l==0,o=o&&l==nl(n)}}function Hu(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const nm=function(n){return n.focusNode&&em(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function rm(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}const bn=typeof navigator<"u"?navigator:null,im=typeof document<"u"?document:null,tr=bn&&bn.userAgent||"",Vu=/Edge\/(\d+)/.exec(tr),om=/MSIE \d/.exec(tr),$u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tr),bo=!!(om||$u||Vu),sm=om?document.documentMode:$u?+$u[1]:Vu?+Vu[1]:0,rl=!bo&&/gecko\/(\d+)/i.test(tr);rl&&+(/Firefox\/(\d+)/.exec(tr)||[0,0])[1];const Gu=!bo&&/Chrome\/(\d+)/.exec(tr),nr=!!Gu,lm=Gu?+Gu[1]:0,Hr=!bo&&!!bn&&/Apple Computer/.test(bn.vendor),Ku=Hr&&(/Mobile\/\w+/.test(tr)||!!bn&&bn.maxTouchPoints>2),tn=Ku||(bn?/Mac/.test(bn.platform):!1),Xk=bn?/Win/.test(bn.platform):!1,Eo=/Android \d/.test(tr),Ju=!!im&&"webkitFontSmoothing"in im.documentElement.style,eS=Ju?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function tS(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let o=n.docView.nearestDesc(t.focusNode),l=o&&o.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),d,f;if(nm(t)){for(d=a;o&&!o.node;)o=o.parent;let m=o.node;if(o&&m.isAtom&&he.isSelectable(m)&&o.parent&&!(m.isInline&&qk(t.focusNode,t.focusOffset,o.dom))){let y=o.posBefore;f=new he(a==y?u:r.resolve(y))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let m=a,y=a;for(let w=0;w<t.rangeCount;w++){let k=t.getRangeAt(w);m=Math.min(m,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),y=Math.max(y,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(m<0)return null;[d,a]=y==n.state.selection.anchor?[y,m]:[m,y],u=r.resolve(a)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let h=r.resolve(d);if(!f){let m=e=="pointer"||n.state.selection.head<u.pos&&!l?1:-1;f=pm(n,h,u,m)}return f}function am(n){return n.editable?n.hasFocus():oS(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Yu(n,e=!1){let t=n.state.selection;if(iS(n,t),!!am(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&nr){let r=n.domSelectionRange(),o=n.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&em(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)rS(n);else{let{anchor:r,head:o}=t,l,a;um&&!(t instanceof Ce)&&(t.$from.parent.inlineContent||(l=cm(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=cm(n,t.to))),n.docView.setSelection(r,o,n,e),um&&(l&&dm(l),a&&dm(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&nS(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const um=Hr||nr&&lm<63;function cm(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),o=r<t.childNodes.length?t.childNodes[r]:null,l=r?t.childNodes[r-1]:null;if(Hr&&o&&o.contentEditable=="false")return Qu(o);if((!o||o.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(o)return Qu(o);if(l)return Qu(l)}}function Qu(n){return n.contentEditable="true",Hr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function dm(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function nS(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!am(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function rS(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,Wr(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&bo&&sm<=11&&(t.disabled=!0,t.disabled=!1)}function iS(n,e){if(e instanceof he){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(fm(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else fm(n)}function fm(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function pm(n,e,t,r){return n.someProp("createSelectionBetween",o=>o(n,e,t))||Ce.between(e,t,r)}function oS(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Zu(n,e){let{$anchor:t,$head:r}=n.selection,o=e>0?t.max(r):t.min(r),l=o.parent.inlineContent?o.depth?n.doc.resolve(e>0?o.after():o.before()):null:o;return l&&Ne.findFrom(l,e)}function rr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function hm(n,e,t){let r=n.state.selection;if(r instanceof Ce)if(t.indexOf("s")>-1){let{$head:o}=r,l=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let a=n.state.doc.resolve(o.pos+l.nodeSize*(e<0?-1:1));return rr(n,new Ce(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let o=Zu(n.state,e);return o&&o instanceof he?rr(n,o):!1}else if(!(tn&&t.indexOf("m")>-1)){let o=r.$head,l=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,a;if(!l||l.isText)return!1;let u=e<0?o.pos-l.nodeSize:o.pos;return l.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?he.isSelectable(l)?rr(n,new he(e<0?n.state.doc.resolve(o.pos-l.nodeSize):o)):Ju?rr(n,new Ce(n.state.doc.resolve(e<0?u:u+l.nodeSize))):!1:!1}}else return!1;else{if(r instanceof he&&r.node.isInline)return rr(n,new Ce(e>0?r.$to:r.$from));{let o=Zu(n.state,e);return o?rr(n,o):!1}}}function il(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Io(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function wi(n,e){return e<0?sS(n):lS(n)}function sS(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o,l,a=!1;for(rl&&t.nodeType==1&&r<il(t)&&Io(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Io(u,-1))o=t,l=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(mm(t))break;{let u=t.previousSibling;for(;u&&Io(u,-1);)o=t.parentNode,l=Wr(u),u=u.previousSibling;if(u)t=u,r=il(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?qu(n,t,r):o&&qu(n,o,l)}function lS(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o=il(t),l,a;for(;;)if(r<o){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Io(u,1))l=t,a=++r;else break}else{if(mm(t))break;{let u=t.nextSibling;for(;u&&Io(u,1);)l=u.parentNode,a=Wr(u)+1,u=u.nextSibling;if(u)t=u,r=0,o=il(t);else{if(t=t.parentNode,t==n.dom)break;r=o=0}}}l&&qu(n,l,a)}function mm(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function aS(n,e){for(;n&&e==n.childNodes.length&&!Hu(n);)e=Wr(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function uS(n,e){for(;n&&!e&&!Hu(n);)e=Wr(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function qu(n,e,t){if(e.nodeType!=3){let l,a;(a=aS(e,t))?(e=a,t=0):(l=uS(e,t))&&(e=l,t=l.nodeValue.length)}let r=n.domSelection();if(!r)return;if(nm(r)){let l=document.createRange();l.setEnd(e,t),l.setStart(e,t),r.removeAllRanges(),r.addRange(l)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:o}=n;setTimeout(()=>{n.state==o&&Yu(n)},50)}function gm(n,e){let t=n.state.doc.resolve(e);if(!(nr||Xk)&&t.parent.inlineContent){let o=n.coordsAtPos(e);if(e>t.start()){let l=n.coordsAtPos(e-1),a=(l.top+l.bottom)/2;if(a>o.top&&a<o.bottom&&Math.abs(l.left-o.left)>1)return l.left<o.left?"ltr":"rtl"}if(e<t.end()){let l=n.coordsAtPos(e+1),a=(l.top+l.bottom)/2;if(a>o.top&&a<o.bottom&&Math.abs(l.left-o.left)>1)return l.left>o.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function ym(n,e,t){let r=n.state.selection;if(r instanceof Ce&&!r.empty||t.indexOf("s")>-1||tn&&t.indexOf("m")>-1)return!1;let{$from:o,$to:l}=r;if(!o.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=Zu(n.state,e);if(a&&a instanceof he)return rr(n,a)}if(!o.parent.inlineContent){let a=e<0?o:l,u=r instanceof Kt?Ne.near(a,e):Ne.findFrom(a,e);return u?rr(n,u):!1}return!1}function vm(n,e){if(!(n.state.selection instanceof Ce))return!0;let{$head:t,$anchor:r,empty:o}=n.state.selection;if(!t.sameParent(r))return!0;if(!o)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(l&&!l.isText){let a=n.state.tr;return e<0?a.delete(t.pos-l.nodeSize,t.pos):a.delete(t.pos,t.pos+l.nodeSize),n.dispatch(a),!0}return!1}function wm(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function cS(n){if(!Hr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;wm(n,r,"true"),setTimeout(()=>wm(n,r,"false"),20)}return!1}function dS(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function fS(n,e){let t=e.keyCode,r=dS(e);if(t==8||tn&&t==72&&r=="c")return vm(n,-1)||wi(n,-1);if(t==46&&!e.shiftKey||tn&&t==68&&r=="c")return vm(n,1)||wi(n,1);if(t==13||t==27)return!0;if(t==37||tn&&t==66&&r=="c"){let o=t==37?gm(n,n.state.selection.from)=="ltr"?-1:1:-1;return hm(n,o,r)||wi(n,o)}else if(t==39||tn&&t==70&&r=="c"){let o=t==39?gm(n,n.state.selection.from)=="ltr"?1:-1:1;return hm(n,o,r)||wi(n,o)}else{if(t==38||tn&&t==80&&r=="c")return ym(n,-1,r)||wi(n,-1);if(t==40||tn&&t==78&&r=="c")return cS(n)||ym(n,1,r)||wi(n,1);if(r==(tn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function km(n,e){n.someProp("transformCopied",w=>{e=w(e,n)});let t=[],{content:r,openStart:o,openEnd:l}=e;for(;o>1&&l>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,l--;let w=r.firstChild;t.push(w.type.name,w.attrs!=w.type.defaultAttrs?w.attrs:null),r=w.content}let a=n.someProp("clipboardSerializer")||wo.fromSchema(n.state.schema),u=Am(),d=u.createElement("div");d.appendChild(a.serializeFragment(r,{document:u}));let f=d.firstChild,h,m=0;for(;f&&f.nodeType==1&&(h=Im[f.nodeName.toLowerCase()]);){for(let w=h.length-1;w>=0;w--){let k=u.createElement(h[w]);for(;d.firstChild;)k.appendChild(d.firstChild);d.appendChild(k),m++}f=d.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${o} ${l}${m?` -${m}`:""} ${JSON.stringify(t)}`);let y=n.someProp("clipboardTextSerializer",w=>w(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:y,slice:e}}function Sm(n,e,t,r,o){let l=o.parent.type.spec.code,a,u;if(!t&&!e)return null;let d=!!e&&(r||l||!t);if(d){if(n.someProp("transformPastedText",y=>{e=y(e,l||r,n)}),l)return u=new q($.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",y=>{u=y(u,n,!0)}),u;let m=n.someProp("clipboardTextParser",y=>y(e,o,r,n));if(m)u=m;else{let y=o.marks(),{schema:w}=n.state,k=wo.fromSchema(w);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let b=a.appendChild(document.createElement("p"));x&&b.appendChild(k.serializeNode(w.text(x,y)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),a=gS(t),Ju&&yS(a);let f=a&&a.querySelector("[data-pm-slice]"),h=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let m=+h[3];m>0;m--){let y=a.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;a=y}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||jr.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(d||h),context:o,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!pS.test(y.parentNode.nodeName)?{ignore:!0}:null}})),h)u=vS(Em(u,+h[1],+h[2]),h[4]);else if(u=q.maxOpen(hS(u.content,o),!0),u.openStart||u.openEnd){let m=0,y=0;for(let w=u.content.firstChild;m<u.openStart&&!w.type.spec.isolating;m++,w=w.firstChild);for(let w=u.content.lastChild;y<u.openEnd&&!w.type.spec.isolating;y++,w=w.lastChild);u=Em(u,m,y)}return n.someProp("transformPasted",m=>{u=m(u,n,d)}),u}const pS=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function hS(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),l,a=[];if(n.forEach(u=>{if(!a)return;let d=o.findWrapping(u.type),f;if(!d)return a=null;if(f=a.length&&l.length&&Cm(d,l,u,a[a.length-1],0))a[a.length-1]=f;else{a.length&&(a[a.length-1]=bm(a[a.length-1],l.length));let h=xm(u,d);a.push(h),o=o.matchType(h.type),l=d}}),a)return $.from(a)}return n}function xm(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,$.from(n));return n}function Cm(n,e,t,r,o){if(o<n.length&&o<e.length&&n[o]==e[o]){let l=Cm(n,e,t,r.lastChild,o+1);if(l)return r.copy(r.content.replaceChild(r.childCount-1,l));if(r.contentMatchAt(r.childCount).matchType(o==n.length-1?t.type:n[o+1]))return r.copy(r.content.append($.from(xm(t,n,o+1))))}}function bm(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,bm(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore($.empty,!0);return n.copy(t.append(r))}function Xu(n,e,t,r,o,l){let a=e<0?n.firstChild:n.lastChild,u=a.content;return n.childCount>1&&(l=0),o<r-1&&(u=Xu(u,e,t,r,o+1,l)),o>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,l<=o).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore($.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function Em(n,e,t){return e<n.openStart&&(n=new q(Xu(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new q(Xu(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Im={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Tm=null;function Am(){return Tm||(Tm=document.implementation.createHTMLDocument("title"))}let ec=null;function mS(n){let e=window.trustedTypes;return e?(ec||(ec=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),ec.createHTML(n)):n}function gS(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Am().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),o;if((o=r&&Im[r[1].toLowerCase()])&&(n=o.map(l=>"<"+l+">").join("")+n+o.map(l=>"</"+l+">").reverse().join("")),t.innerHTML=mS(n),o)for(let l=0;l<o.length;l++)t=t.querySelector(o[l])||t;return t}function yS(n){let e=n.querySelectorAll(nr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function vS(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:o,openStart:l,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let d=t.nodes[r[u]];if(!d||d.hasRequiredAttrs())break;o=$.from(d.create(r[u+1],o)),l++,a++}return new q(o,l,a)}const fn={},Jt={};function ir(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}Jt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Mm(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Eo&&nr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Ku&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",o=>o(n,rm(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||fS(n,t)?t.preventDefault():ir(n,"key")},Jt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)},Jt.keypress=(n,e)=>{let t=e;if(Mm(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||tn&&t.metaKey)return;if(n.someProp("handleKeyPress",o=>o(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Ce)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(t.charCode),l=()=>n.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!n.someProp("handleTextInput",a=>a(n,r.$from.pos,r.$to.pos,o,l))&&n.dispatch(l()),t.preventDefault()}};function ol(n){return{left:n.clientX,top:n.clientY}}function wS(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function tc(n,e,t,r,o){if(r==-1)return!1;let l=n.state.doc.resolve(r);for(let a=l.depth+1;a>0;a--)if(n.someProp(e,u=>a>l.depth?u(n,t,l.nodeAfter,l.before(a),o,!0):u(n,t,l.node(a),l.before(a),o,!1)))return!0;return!1}function ki(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function kS(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&he.isSelectable(r)?(ki(n,new he(t)),!0):!1}function SS(n,e){if(e==-1)return!1;let t=n.state.selection,r,o;t instanceof he&&(r=t.node);let l=n.state.doc.resolve(e);for(let a=l.depth+1;a>0;a--){let u=a>l.depth?l.nodeAfter:l.node(a);if(he.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&l.before(t.$from.depth+1)==t.$from.pos?o=l.before(t.$from.depth):o=l.before(a);break}}return o!=null?(ki(n,he.create(n.state.doc,o)),!0):!1}function xS(n,e,t,r,o){return tc(n,"handleClickOn",e,t,r)||n.someProp("handleClick",l=>l(n,e,r))||(o?SS(n,t):kS(n,t))}function CS(n,e,t,r){return tc(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",o=>o(n,e,r))}function bS(n,e,t,r){return tc(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",o=>o(n,e,r))||ES(n,t,r)}function ES(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(ki(n,Ce.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let l=o.depth+1;l>0;l--){let a=l>o.depth?o.nodeAfter:o.node(l),u=o.before(l);if(a.inlineContent)ki(n,Ce.create(r,u+1,u+1+a.content.size));else if(he.isSelectable(a))ki(n,he.create(r,u));else continue;return!0}}function nc(n){return sl(n)}const Nm=tn?"metaKey":"ctrlKey";fn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=nc(n),o=Date.now(),l="singleClick";o-n.input.lastClick.time<500&&wS(t,n.input.lastClick)&&!t[Nm]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?l="doubleClick":n.input.lastClick.type=="doubleClick"&&(l="tripleClick")),n.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:l,button:t.button};let a=n.posAtCoords(ol(t));a&&(l=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new IS(n,a,t,!!r)):(l=="doubleClick"?CS:bS)(n,a.pos,a.inside,t)?t.preventDefault():ir(n,"pointer"))};class IS{constructor(e,t,r,o){this.view=e,this.pos=t,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Nm],this.allowDefault=r.shiftKey;let l,a;if(t.inside>-1)l=e.state.doc.nodeAt(t.inside),a=t.inside;else{let h=e.state.doc.resolve(t.pos);l=h.parent,a=h.depth?h.before():0}const u=o?null:r.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:f}=e.state;(r.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||f instanceof he&&f.from<=a&&f.to>a)&&(this.mightDrag={node:l,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&rl&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ir(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Yu(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ol(e))),this.updateAllowDefault(e),this.allowDefault||!t?ir(this.view,"pointer"):xS(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Hr&&this.mightDrag&&!this.mightDrag.node.isAtom||nr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ki(this.view,Ne.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):ir(this.view,"pointer")}move(e){this.updateAllowDefault(e),ir(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}fn.touchstart=n=>{n.input.lastTouch=Date.now(),nc(n),ir(n,"pointer")},fn.touchmove=n=>{n.input.lastTouch=Date.now(),ir(n,"pointer")},fn.contextmenu=n=>nc(n);function Mm(n,e){return n.composing?!0:Hr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const TS=Eo?5e3:-1;Jt.compositionstart=Jt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Ce&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),sl(n,!0),n.markCursor=null;else if(sl(n,!e.selection.empty),rl&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let o=r.focusNode,l=r.focusOffset;o&&o.nodeType==1&&l!=0;){let a=l<0?o.lastChild:o.childNodes[l-1];if(!a)break;if(a.nodeType==3){let u=n.domSelection();u&&u.collapse(a,a.nodeValue.length);break}else o=a,l=-1}}n.input.composing=!0}Rm(n,TS)},Jt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Rm(n,20))};function Rm(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>sl(n),e))}function AS(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=NS());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function NS(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function sl(n,e=!1){if(!(Eo&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),AS(n),e||n.docView&&n.docView.dirty){let t=tS(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function MS(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const To=bo&&sm<15||Ku&&eS<604;fn.copy=Jt.cut=(n,e)=>{let t=e,r=n.state.selection,o=t.type=="cut";if(r.empty)return;let l=To?null:t.clipboardData,a=r.content(),{dom:u,text:d}=km(n,a);l?(t.preventDefault(),l.clearData(),l.setData("text/html",u.innerHTML),l.setData("text/plain",d)):MS(n,u),o&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function RS(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function OS(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?rc(n,r.value,null,o,e):rc(n,r.textContent,r.innerHTML,o,e)},50)}function rc(n,e,t,r,o){let l=Sm(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,o,l||q.empty)))return!0;if(!l)return!1;let a=RS(l),u=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(l);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Om(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Jt.paste=(n,e)=>{let t=e;if(n.composing&&!Eo)return;let r=To?null:t.clipboardData,o=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&rc(n,Om(r),r.getData("text/html"),o,t)?t.preventDefault():OS(n,t)};class LS{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const DS=tn?"altKey":"ctrlKey";function Lm(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[DS]}fn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let o=n.state.selection,l=o.empty?null:n.posAtCoords(ol(t)),a;if(!(l&&l.pos>=o.from&&l.pos<=(o instanceof he?o.to-1:o.to))){if(r&&r.mightDrag)a=he.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let m=n.docView.nearestDesc(t.target,!0);m&&m.node.type.spec.draggable&&m!=n.docView&&(a=he.create(n.state.doc,m.posBefore))}}let u=(a||n.state.selection).content(),{dom:d,text:f,slice:h}=km(n,u);(!t.dataTransfer.files.length||!nr||lm>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(To?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",To||t.dataTransfer.setData("text/plain",f),n.dragging=new LS(h,Lm(n,t),a)},fn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)},Jt.dragover=Jt.dragenter=(n,e)=>e.preventDefault(),Jt.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let o=n.posAtCoords(ol(t));if(!o)return;let l=n.state.doc.resolve(o.pos),a=r&&r.slice;a?n.someProp("transformPasted",k=>{a=k(a,n,!1)}):a=Sm(n,Om(t.dataTransfer),To?null:t.dataTransfer.getData("text/html"),!1,l);let u=!!(r&&Lm(n,t));if(n.someProp("handleDrop",k=>k(n,t,a||q.empty,u))){t.preventDefault();return}if(!a)return;t.preventDefault();let d=a?Mh(n.state.doc,l.pos,a):l.pos;d==null&&(d=l.pos);let f=n.state.tr;if(u){let{node:k}=r;k?k.replace(f):f.deleteSelection()}let h=f.mapping.map(d),m=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,y=f.doc;if(m?f.replaceRangeWith(h,h,a.content.firstChild):f.replaceRange(h,h,a),f.doc.eq(y))return;let w=f.doc.resolve(h);if(m&&he.isSelectable(a.content.firstChild)&&w.nodeAfter&&w.nodeAfter.sameMarkup(a.content.firstChild))f.setSelection(new he(w));else{let k=f.mapping.map(d);f.mapping.maps[f.mapping.maps.length-1].forEach((x,b,E,T)=>k=T),f.setSelection(pm(n,w,f.doc.resolve(k)))}n.focus(),n.dispatch(f.setMeta("uiEvent","drop"))},fn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Yu(n)},20))},fn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)},fn.beforeinput=(n,e)=>{if(nr&&Eo&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",l=>l(n,rm(8,"Backspace")))))return;let{$cursor:o}=n.state.selection;o&&o.pos>0&&n.dispatch(n.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let n in Jt)fn[n]=Jt[n];function Ao(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class ll{constructor(e,t){this.toDOM=e,this.spec=t||Vr,this.side=this.spec.side||0}map(e,t,r,o){let{pos:l,deleted:a}=e.mapResult(t.from+o,this.side<0?-1:1);return a?null:new Yt(l-r,l-r,this)}valid(){return!0}eq(e){return this==e||e instanceof ll&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ao(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class or{constructor(e,t){this.attrs=e,this.spec=t||Vr}map(e,t,r,o){let l=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-r;return l>=a?null:new Yt(l,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof or&&Ao(this.attrs,e.attrs)&&Ao(this.spec,e.spec)}static is(e){return e.type instanceof or}destroy(){}}let PS=class p1{constructor(e,t){this.attrs=e,this.spec=t||Vr}map(e,t,r,o){let l=e.mapResult(t.from+o,1);if(l.deleted)return null;let a=e.mapResult(t.to+o,-1);return a.deleted||a.pos<=l.pos?null:new Yt(l.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:o}=e.content.findIndex(t.from),l;return o==t.from&&!(l=e.child(r)).isText&&o+l.nodeSize==t.to}eq(e){return this==e||e instanceof p1&&Ao(this.attrs,e.attrs)&&Ao(this.spec,e.spec)}destroy(){}};class Yt{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Yt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Yt(e,e,new ll(t,r))}static inline(e,t,r,o){return new Yt(e,t,new or(r,o))}static node(e,t,r,o){return new Yt(e,t,new PS(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof or}get widget(){return this.type instanceof ll}}const Si=[],Vr={};class Ye{constructor(e,t){this.local=e.length?e:Si,this.children=t.length?t:Si}static create(e,t){return t.length?al(t,e,0,Vr):Pt}find(e,t,r){let o=[];return this.findInner(e??0,t??1e9,o,0,r),o}findInner(e,t,r,o,l){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!l||l(u.spec))&&r.push(u.copy(u.from+o,u.to+o))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,o+u,l)}}map(e,t,r){return this==Pt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Vr)}mapInner(e,t,r,o,l){let a;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(e,r,o);d&&d.type.valid(t,d)?(a||(a=[])).push(d):l.onRemove&&l.onRemove(this.local[u].spec)}return this.children.length?_S(this.children,a||[],e,t,r,o,l):a?new Ye(a.sort(Gr),Si):Pt}add(e,t){return t.length?this==Pt?Ye.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let o,l=0;e.forEach((u,d)=>{let f=d+r,h;if(h=Pm(t,u,f)){for(o||(o=this.children.slice());l<o.length&&o[l]<d;)l+=3;o[l]==d?o[l+2]=o[l+2].addInner(u,h,f+1):o.splice(l,0,d,d+u.nodeSize,al(h,u,f+1,Vr)),l+=3}});let a=Dm(l?_m(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new Ye(a.length?this.local.concat(a).sort(Gr):this.local,o||this.children)}remove(e){return e.length==0||this==Pt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,o=this.local;for(let l=0;l<r.length;l+=3){let a,u=r[l]+t,d=r[l+1]+t;for(let h=0,m;h<e.length;h++)(m=e[h])&&m.from>u&&m.to<d&&(e[h]=null,(a||(a=[])).push(m));if(!a)continue;r==this.children&&(r=this.children.slice());let f=r[l+2].removeInner(a,u+1);f!=Pt?r[l+2]=f:(r.splice(l,3),l-=3)}if(o.length){for(let l=0,a;l<e.length;l++)if(a=e[l])for(let u=0;u<o.length;u++)o[u].eq(a,t)&&(o==this.local&&(o=this.local.slice()),o.splice(u--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Ye(o,r):Pt}forChild(e,t){if(this==Pt)return this;if(t.isLeaf)return Ye.empty;let r,o;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let l=e+1,a=l+t.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<a&&d.to>l&&d.type instanceof or){let f=Math.max(l,d.from)-l,h=Math.min(a,d.to)-l;f<h&&(o||(o=[])).push(d.copy(f,h))}}if(o){let u=new Ye(o.sort(Gr),Si);return r?new $r([u,r]):u}return r||Pt}eq(e){if(this==e)return!0;if(!(e instanceof Ye)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return ic(this.localsInner(e))}localsInner(e){if(this==Pt)return Si;if(e.inlineContent||!this.local.some(or.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof or||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Ye.empty=new Ye([],[]),Ye.removeOverlap=ic;const Pt=Ye.empty;class $r{constructor(e){this.members=e}map(e,t){const r=this.members.map(o=>o.map(e,t,Vr));return $r.from(r)}forChild(e,t){if(t.isLeaf)return Ye.empty;let r=[];for(let o=0;o<this.members.length;o++){let l=this.members[o].forChild(e,t);l!=Pt&&(l instanceof $r?r=r.concat(l.members):r.push(l))}return $r.from(r)}eq(e){if(!(e instanceof $r)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let o=0;o<this.members.length;o++){let l=this.members[o].localsInner(e);if(l.length)if(!t)t=l;else{r&&(t=t.slice(),r=!1);for(let a=0;a<l.length;a++)t.push(l[a])}}return t?ic(r?t:t.sort(Gr)):Si}static from(e){switch(e.length){case 0:return Pt;case 1:return e[0];default:return new $r(e.every(t=>t instanceof Ye)?e:e.reduce((t,r)=>t.concat(r instanceof Ye?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function _S(n,e,t,r,o,l,a){let u=n.slice();for(let f=0,h=l;f<t.maps.length;f++){let m=0;t.maps[f].forEach((y,w,k,x)=>{let b=x-k-(w-y);for(let E=0;E<u.length;E+=3){let T=u[E+1];if(T<0||y>T+h-m)continue;let M=u[E]+h-m;w>=M?u[E+1]=y<=M?-2:-1:y>=h&&b&&(u[E]+=b,u[E+1]+=b)}m+=b}),h=t.maps[f].map(h,-1)}let d=!1;for(let f=0;f<u.length;f+=3)if(u[f+1]<0){if(u[f+1]==-2){d=!0,u[f+1]=-1;continue}let h=t.map(n[f]+l),m=h-o;if(m<0||m>=r.content.size){d=!0;continue}let y=t.map(n[f+1]+l,-1),w=y-o,{index:k,offset:x}=r.content.findIndex(m),b=r.maybeChild(k);if(b&&x==m&&x+b.nodeSize==w){let E=u[f+2].mapInner(t,b,h+1,n[f]+l+1,a);E!=Pt?(u[f]=m,u[f+1]=w,u[f+2]=E):(u[f+1]=-2,d=!0)}else d=!0}if(d){let f=FS(u,n,e,t,o,l,a),h=al(f,r,0,a);e=h.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,y=0;m<h.children.length;m+=3){let w=h.children[m];for(;y<u.length&&u[y]<w;)y+=3;u.splice(y,0,h.children[m],h.children[m+1],h.children[m+2])}}return new Ye(e.sort(Gr),u)}function Dm(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let o=n[r];t.push(new Yt(o.from+e,o.to+e,o.type))}return t}function FS(n,e,t,r,o,l,a){function u(d,f){for(let h=0;h<d.local.length;h++){let m=d.local[h].map(r,o,f);m?t.push(m):a.onRemove&&a.onRemove(d.local[h].spec)}for(let h=0;h<d.children.length;h+=3)u(d.children[h+2],d.children[h]+f+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&u(n[d+2],e[d]+l+1);return t}function Pm(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,o=null;for(let l=0,a;l<n.length;l++)(a=n[l])&&a.from>t&&a.to<r&&((o||(o=[])).push(a),n[l]=null);return o}function _m(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function al(n,e,t,r){let o=[],l=!1;e.forEach((u,d)=>{let f=Pm(n,u,d+t);if(f){l=!0;let h=al(f,u,t+d+1,r);h!=Pt&&o.push(d,d+u.nodeSize,h)}});let a=Dm(l?_m(n):n,-t).sort(Gr);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||o.length?new Ye(a,o):Pt}function Gr(n,e){return n.from-e.from||n.to-e.to}function ic(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let o=t+1;o<e.length;o++){let l=e[o];if(l.from==r.from){l.to!=r.to&&(e==n&&(e=n.slice()),e[o]=l.copy(l.from,r.to),Fm(e,o+1,l.copy(r.to,l.to)));continue}else{l.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,l.from),Fm(e,o,r.copy(l.from,r.to)));break}}}return e}function Fm(n,e,t){for(;e<n.length&&Gr(t,n[e])>0;)e++;n.splice(e,0,t)}for(var sr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ul={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},zS=typeof navigator<"u"&&/Mac/.test(navigator.platform),BS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ct=0;Ct<10;Ct++)sr[48+Ct]=sr[96+Ct]=String(Ct);for(var Ct=1;Ct<=24;Ct++)sr[Ct+111]="F"+Ct;for(var Ct=65;Ct<=90;Ct++)sr[Ct]=String.fromCharCode(Ct+32),ul[Ct]=String.fromCharCode(Ct);for(var oc in sr)ul.hasOwnProperty(oc)||(ul[oc]=sr[oc]);function jS(n){var e=zS&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||BS&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?ul:sr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const US=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),WS=typeof navigator<"u"&&/Win/.test(navigator.platform);function HS(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,o,l,a;for(let u=0;u<e.length-1;u++){let d=e[u];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))US?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(t="Alt-"+t),o&&(t="Ctrl-"+t),a&&(t="Meta-"+t),l&&(t="Shift-"+t),t}function VS(n){let e=Object.create(null);for(let t in n)e[HS(t)]=n[t];return e}function sc(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function $S(n){let e=VS(n);return function(t,r){let o=jS(r),l,a=e[sc(o,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let u=e[sc(o,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(WS&&r.ctrlKey&&r.altKey)&&(l=sr[r.keyCode])&&l!=o){let u=e[sc(l,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}var GS=Object.defineProperty,lc=(n,e)=>{for(var t in e)GS(n,t,{get:e[t],enumerable:!0})};function zm(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:o}=t,{storedMarks:l}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return l},get selection(){return r},get doc(){return o},get tr(){return r=t.selection,o=t.doc,l=t.storedMarks,t}}}var KS=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:r}=e,{tr:o}=t,l=this.buildProps(o);return Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...f)=>{const h=u(...f)(l);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(o),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:r,state:o}=this,{view:l}=r,a=[],u=!!n,d=n||o.tr,f=()=>(!u&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(d),a.every(m=>m===!0)),h={...Object.fromEntries(Object.entries(t).map(([m,y])=>[m,(...k)=>{const x=this.buildProps(d,e),b=y(...k)(x);return a.push(b),h}])),run:f};return h}createCan(n){const{rawCommands:e,state:t}=this,r=!1,o=n||t.tr,l=this.buildProps(o,r);return{...Object.fromEntries(Object.entries(e).map(([u,d])=>[u,(...f)=>d(...f)({...l,dispatch:void 0})])),chain:()=>this.createChain(o,r)}}buildProps(n,e=!0){const{rawCommands:t,editor:r,state:o}=this,{view:l}=r,a={tr:n,editor:r,view:l,state:zm({state:o,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([u,d])=>[u,(...f)=>d(...f)(a)]))}};return a}},Bm={};lc(Bm,{blur:()=>JS,clearContent:()=>YS,clearNodes:()=>QS,command:()=>ZS,createParagraphNear:()=>qS,cut:()=>XS,deleteCurrentNode:()=>ex,deleteNode:()=>tx,deleteRange:()=>nx,deleteSelection:()=>rx,enter:()=>ix,exitCode:()=>ox,extendMarkRange:()=>lx,first:()=>ax,focus:()=>dx,forEach:()=>fx,insertContent:()=>px,insertContentAt:()=>gx,joinBackward:()=>wx,joinDown:()=>vx,joinForward:()=>kx,joinItemBackward:()=>Sx,joinItemForward:()=>xx,joinTextblockBackward:()=>Cx,joinTextblockForward:()=>bx,joinUp:()=>yx,keyboardShortcut:()=>Ix,lift:()=>Tx,liftEmptyBlock:()=>Ax,liftListItem:()=>Nx,newlineInCode:()=>Mx,resetAttributes:()=>Rx,scrollIntoView:()=>Ox,selectAll:()=>Lx,selectNodeBackward:()=>Dx,selectNodeForward:()=>Px,selectParentNode:()=>_x,selectTextblockEnd:()=>Fx,selectTextblockStart:()=>zx,setContent:()=>jx,setMark:()=>fC,setMeta:()=>pC,setNode:()=>hC,setNodeSelection:()=>mC,setTextSelection:()=>gC,sinkListItem:()=>yC,splitBlock:()=>vC,splitListItem:()=>wC,toggleList:()=>kC,toggleMark:()=>SC,toggleNode:()=>xC,toggleWrap:()=>CC,undoInputRule:()=>bC,unsetAllMarks:()=>EC,unsetMark:()=>IC,updateAttributes:()=>TC,wrapIn:()=>AC,wrapInList:()=>NC});var JS=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())==null||t.removeAllRanges())}),!0),YS=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),QS=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:o}=r;return t&&o.forEach(({$from:l,$to:a})=>{n.doc.nodesBetween(l.pos,a.pos,(u,d)=>{if(u.type.isText)return;const{doc:f,mapping:h}=e,m=f.resolve(h.map(d)),y=f.resolve(h.map(d+u.nodeSize)),w=m.blockRange(y);if(!w)return;const k=hi(w);if(u.type.isTextblock){const{defaultType:x}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(w.start,x)}(k||k===0)&&e.lift(w,k)})}),!0},ZS=n=>e=>n(e),qS=()=>({state:n,dispatch:e})=>Yh(n,e),XS=(n,e)=>({editor:t,tr:r})=>{const{state:o}=t,l=o.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,l.content),r.setSelection(new Ce(r.doc.resolve(Math.max(a-1,0)))),!0},ex=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const o=n.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===r.type){if(e){const u=o.before(l),d=o.after(l);n.delete(u,d).scrollIntoView()}return!0}return!1};function ut(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var tx=n=>({tr:e,state:t,dispatch:r})=>{const o=ut(n,t.schema),l=e.selection.$anchor;for(let a=l.depth;a>0;a-=1)if(l.node(a).type===o){if(r){const d=l.before(a),f=l.after(a);e.delete(d,f).scrollIntoView()}return!0}return!1},nx=n=>({tr:e,dispatch:t})=>{const{from:r,to:o}=n;return t&&e.delete(r,o),!0},rx=()=>({state:n,dispatch:e})=>zu(n,e),ix=()=>({commands:n})=>n.keyboardShortcut("Enter"),ox=()=>({state:n,dispatch:e})=>_k(n,e);function sx(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function cl(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>t.strict?e[o]===n[o]:sx(e[o])?e[o].test(n[o]):e[o]===n[o]):!0}function jm(n,e,t={}){return n.find(r=>r.type===e&&cl(Object.fromEntries(Object.keys(t).map(o=>[o,r.attrs[o]])),t))}function Um(n,e,t={}){return!!jm(n,e,t)}function ac(n,e,t){var r;if(!n||!e)return;let o=n.parent.childAfter(n.parentOffset);if((!o.node||!o.node.marks.some(h=>h.type===e))&&(o=n.parent.childBefore(n.parentOffset)),!o.node||!o.node.marks.some(h=>h.type===e)||(t=t||((r=o.node.marks[0])==null?void 0:r.attrs),!jm([...o.node.marks],e,t)))return;let a=o.index,u=n.start()+o.offset,d=a+1,f=u+o.node.nodeSize;for(;a>0&&Um([...n.parent.child(a-1).marks],e,t);)a-=1,u-=n.parent.child(a).nodeSize;for(;d<n.parent.childCount&&Um([...n.parent.child(d).marks],e,t);)f+=n.parent.child(d).nodeSize,d+=1;return{from:u,to:f}}function lr(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var lx=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const l=lr(n,r.schema),{doc:a,selection:u}=t,{$from:d,from:f,to:h}=u;if(o){const m=ac(d,l,e);if(m&&m.from<=f&&m.to>=h){const y=Ce.create(a,m.from,m.to);t.setSelection(y)}}return!0},ax=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Wm(n){return n instanceof Ce}function Kr(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function ux(n,e=null){if(!e)return null;const t=Ne.atStart(n),r=Ne.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const o=t.from,l=r.to;return e==="all"?Ce.create(n,Kr(0,o,l),Kr(n.content.size,o,l)):Ce.create(n,Kr(e,o,l),Kr(e,o,l))}function cx(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function uc(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var dx=(n=null,e={})=>({editor:t,view:r,tr:o,dispatch:l})=>{e={scrollIntoView:!0,...e};const a=()=>{(uc()||cx())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(l&&n===null&&!Wm(t.state.selection))return a(),!0;const u=ux(o.doc,n)||t.state.selection,d=t.state.selection.eq(u);return l&&(d||o.setSelection(u),d&&o.storedMarks&&o.setStoredMarks(o.storedMarks),a()),!0},fx=(n,e)=>t=>n.every((r,o)=>e(r,{...t,index:o})),px=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Hm=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Hm(r)}return n};function dl(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Hm(t)}function No(n,e,t){if(n instanceof Zn||n instanceof $)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,o=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return $.fromArray(n.map(u=>e.nodeFromJSON(u)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(l){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:l});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",l),No("",e,t)}if(o){if(t.errorOnInvalidContent){let a=!1,u="";const d=new ch({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(a=!0,u=typeof f=="string"?f:f.outerHTML,null)}]}})});if(t.slice?jr.fromSchema(d).parseSlice(dl(n),t.parseOptions):jr.fromSchema(d).parse(dl(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const l=jr.fromSchema(e);return t.slice?l.parseSlice(dl(n),t.parseOptions).content:l.parse(dl(n),t.parseOptions)}return No("",e,t)}function hx(n,e,t){const r=n.steps.length-1;if(r<e)return;const o=n.steps[r];if(!(o instanceof pt||o instanceof ht))return;const l=n.mapping.maps[r];let a=0;l.forEach((u,d,f,h)=>{a===0&&(a=h)}),n.setSelection(Ne.near(n.doc.resolve(a),t))}var mx=n=>!("type"in n),gx=(n,e,t)=>({tr:r,dispatch:o,editor:l})=>{var a;if(o){t={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const d=b=>{l.emit("contentError",{editor:l,error:b,disableCollaboration:()=>{"collaboration"in l.storage&&typeof l.storage.collaboration=="object"&&l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!l.options.enableContentCheck&&l.options.emitContentError)try{No(e,l.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(b){d(b)}try{u=No(e,l.schema,{parseOptions:f,errorOnInvalidContent:(a=t.errorOnInvalidContent)!=null?a:l.options.enableContentCheck})}catch(b){return d(b),!1}let{from:h,to:m}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},y=!0,w=!0;if((mx(u)?u:[u]).forEach(b=>{b.check(),y=y?b.isText&&b.marks.length===0:!1,w=w?b.isBlock:!1}),h===m&&w){const{parent:b}=r.doc.resolve(h);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(h-=1,m+=1)}let x;if(y){if(Array.isArray(e))x=e.map(b=>b.text||"").join("");else if(e instanceof $){let b="";e.forEach(E=>{E.text&&(b+=E.text)}),x=b}else typeof e=="object"&&e&&e.text?x=e.text:x=e;r.insertText(x,h,m)}else{x=u;const b=r.doc.resolve(h),E=b.node(),T=b.parentOffset===0,M=E.isText||E.isTextblock,_=E.content.size>0;T&&M&&_&&(h=Math.max(0,h-1)),r.replaceWith(h,m,x)}t.updateSelection&&hx(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:x}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:x})}return!0},yx=()=>({state:n,dispatch:e})=>Lk(n,e),vx=()=>({state:n,dispatch:e})=>Dk(n,e),wx=()=>({state:n,dispatch:e})=>Wh(n,e),kx=()=>({state:n,dispatch:e})=>Gh(n,e),Sx=()=>({state:n,dispatch:e,tr:t})=>{try{const r=qs(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},xx=()=>({state:n,dispatch:e,tr:t})=>{try{const r=qs(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Cx=()=>({state:n,dispatch:e})=>Rk(n,e),bx=()=>({state:n,dispatch:e})=>Ok(n,e);function Vm(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Ex(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,o,l,a;for(let u=0;u<e.length-1;u+=1){const d=e[u];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))uc()||Vm()?a=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),l&&(t=`Shift-${t}`),t}var Ix=n=>({editor:e,view:t,tr:r,dispatch:o})=>{const l=Ex(n).split(/-(?!$)/),a=l.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),u=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:l.includes("Alt"),ctrlKey:l.includes("Ctrl"),metaKey:l.includes("Meta"),shiftKey:l.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",f=>f(t,u))});return d==null||d.steps.forEach(f=>{const h=f.map(r.mapping);h&&o&&r.maybeStep(h)}),!0};function xi(n,e,t={}){const{from:r,to:o,empty:l}=n.selection,a=e?ut(e,n.schema):null,u=[];n.doc.nodesBetween(r,o,(m,y)=>{if(m.isText)return;const w=Math.max(r,y),k=Math.min(o,y+m.nodeSize);u.push({node:m,from:w,to:k})});const d=o-r,f=u.filter(m=>a?a.name===m.node.type.name:!0).filter(m=>cl(m.node.attrs,t,{strict:!1}));return l?!!f.length:f.reduce((m,y)=>m+y.to-y.from,0)>=d}var Tx=(n,e={})=>({state:t,dispatch:r})=>{const o=ut(n,t.schema);return xi(t,o,e)?Pk(t,r):!1},Ax=()=>({state:n,dispatch:e})=>Qh(n,e),Nx=n=>({state:e,dispatch:t})=>{const r=ut(n,e.schema);return Kk(r)(e,t)},Mx=()=>({state:n,dispatch:e})=>Jh(n,e);function cc(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function $m(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,o)=>(t.includes(o)||(r[o]=n[o]),r),{})}var Rx=(n,e)=>({tr:t,state:r,dispatch:o})=>{let l=null,a=null;const u=cc(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(l=ut(n,r.schema)),u==="mark"&&(a=lr(n,r.schema)),o&&t.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(f,h)=>{l&&l===f.type&&t.setNodeMarkup(h,void 0,$m(f.attrs,e)),a&&f.marks.length&&f.marks.forEach(m=>{a===m.type&&t.addMark(h,h+f.nodeSize,a.create($m(m.attrs,e)))})})}),!0):!1},Ox=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Lx=()=>({tr:n,dispatch:e})=>{if(e){const t=new Kt(n.doc);n.setSelection(t)}return!0},Dx=()=>({state:n,dispatch:e})=>Vh(n,e),Px=()=>({state:n,dispatch:e})=>Kh(n,e),_x=()=>({state:n,dispatch:e})=>Bk(n,e),Fx=()=>({state:n,dispatch:e})=>Wk(n,e),zx=()=>({state:n,dispatch:e})=>Uk(n,e);function Bx(n,e,t={},r={}){return No(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}var jx=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:r={}}={})=>({editor:o,tr:l,dispatch:a,commands:u})=>{const{doc:d}=l;if(r.preserveWhitespace!=="full"){const f=Bx(n,o.schema,r,{errorOnInvalidContent:e??o.options.enableContentCheck});return a&&l.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!t),!0}return a&&l.setMeta("preventUpdate",!t),u.insertContentAt({from:0,to:d.content.size},n,{parseOptions:r,errorOnInvalidContent:e??o.options.enableContentCheck})};function Gm(n,e){const t=lr(e,n.schema),{from:r,to:o,empty:l}=n.selection,a=[];l?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,o,d=>{a.push(...d.marks)});const u=a.find(d=>d.type.name===t.name);return u?{...u.attrs}:{}}function Km(n,e){const t=new Ak(n);return e.forEach(r=>{r.steps.forEach(o=>{t.step(o)})}),t}function Ux(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Wx(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(o,l)=>{t(o)&&r.push({node:o,pos:l})}),r}function Hx(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function fl(n){return e=>Hx(e.$from,n)}function Me(n,e,t){return n.config[e]===void 0&&n.parent?Me(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Me(n.parent,e,t):null}):n.config[e]}function Jm(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},r=Me(e,"addExtensions",t);return r?[e,...Jm(r())]:e}).flat(10)}function Vx(n,e){const t=wo.fromSchema(e).serializeFragment(n),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}function $x(n){return typeof n=="function"}function Fe(n,e=void 0,...t){return $x(n)?e?n.bind(e)(...t):n(...t):n}function Gx(n={}){return Object.keys(n).length===0&&n.constructor===Object}function dc(n){const e=n.filter(o=>o.type==="extension"),t=n.filter(o=>o.type==="node"),r=n.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Kx(n){const e=[],{nodeExtensions:t,markExtensions:r}=dc(n),o=[...t,...r],l={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage,extensions:o},d=Me(a,"addGlobalAttributes",u);if(!d)return;d().forEach(h=>{h.types.forEach(m=>{Object.entries(h.attributes).forEach(([y,w])=>{e.push({type:m,name:y,attribute:{...l,...w}})})})})}),o.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage},d=Me(a,"addAttributes",u);if(!d)return;const f=d();Object.entries(f).forEach(([h,m])=>{const y={...l,...m};typeof(y==null?void 0:y.default)=="function"&&(y.default=y.default()),y!=null&&y.isRequired&&(y==null?void 0:y.default)===void 0&&delete y.default,e.push({type:a.name,name:h,attribute:y})})}),e}function it(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([o,l])=>{if(!r[o]){r[o]=l;return}if(o==="class"){const u=l?String(l).split(" "):[],d=r[o]?r[o].split(" "):[],f=u.filter(h=>!d.includes(h));r[o]=[...d,...f].join(" ")}else if(o==="style"){const u=l?l.split(";").map(h=>h.trim()).filter(Boolean):[],d=r[o]?r[o].split(";").map(h=>h.trim()).filter(Boolean):[],f=new Map;d.forEach(h=>{const[m,y]=h.split(":").map(w=>w.trim());f.set(m,y)}),u.forEach(h=>{const[m,y]=h.split(":").map(w=>w.trim());f.set(m,y)}),r[o]=Array.from(f.entries()).map(([h,m])=>`${h}: ${m}`).join("; ")}else r[o]=l}),r},{})}function Ym(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>it(t,r),{})}function Jx(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Qm(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const o=e.reduce((l,a)=>{const u=a.attribute.parseHTML?a.attribute.parseHTML(t):Jx(t.getAttribute(a.name));return u==null?l:{...l,[a.name]:u}},{});return{...r,...o}}}}function Zm(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Gx(t)?!1:t!=null))}function Yx(n,e){var t;const r=Kx(n),{nodeExtensions:o,markExtensions:l}=dc(n),a=(t=o.find(f=>Me(f,"topNode")))==null?void 0:t.name,u=Object.fromEntries(o.map(f=>{const h=r.filter(E=>E.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},y=n.reduce((E,T)=>{const M=Me(T,"extendNodeSchema",m);return{...E,...M?M(f):{}}},{}),w=Zm({...y,content:Fe(Me(f,"content",m)),marks:Fe(Me(f,"marks",m)),group:Fe(Me(f,"group",m)),inline:Fe(Me(f,"inline",m)),atom:Fe(Me(f,"atom",m)),selectable:Fe(Me(f,"selectable",m)),draggable:Fe(Me(f,"draggable",m)),code:Fe(Me(f,"code",m)),whitespace:Fe(Me(f,"whitespace",m)),linebreakReplacement:Fe(Me(f,"linebreakReplacement",m)),defining:Fe(Me(f,"defining",m)),isolating:Fe(Me(f,"isolating",m)),attrs:Object.fromEntries(h.map(E=>{var T,M;return[E.name,{default:(T=E==null?void 0:E.attribute)==null?void 0:T.default,validate:(M=E==null?void 0:E.attribute)==null?void 0:M.validate}]}))}),k=Fe(Me(f,"parseHTML",m));k&&(w.parseDOM=k.map(E=>Qm(E,h)));const x=Me(f,"renderHTML",m);x&&(w.toDOM=E=>x({node:E,HTMLAttributes:Ym(E,h)}));const b=Me(f,"renderText",m);return b&&(w.toText=b),[f.name,w]})),d=Object.fromEntries(l.map(f=>{const h=r.filter(b=>b.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},y=n.reduce((b,E)=>{const T=Me(E,"extendMarkSchema",m);return{...b,...T?T(f):{}}},{}),w=Zm({...y,inclusive:Fe(Me(f,"inclusive",m)),excludes:Fe(Me(f,"excludes",m)),group:Fe(Me(f,"group",m)),spanning:Fe(Me(f,"spanning",m)),code:Fe(Me(f,"code",m)),attrs:Object.fromEntries(h.map(b=>{var E,T;return[b.name,{default:(E=b==null?void 0:b.attribute)==null?void 0:E.default,validate:(T=b==null?void 0:b.attribute)==null?void 0:T.validate}]}))}),k=Fe(Me(f,"parseHTML",m));k&&(w.parseDOM=k.map(b=>Qm(b,h)));const x=Me(f,"renderHTML",m);return x&&(w.toDOM=b=>x({mark:b,HTMLAttributes:Ym(b,h)})),[f.name,w]}));return new ch({topNode:a,nodes:u,marks:d})}function Qx(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}function Zx(n){return n.sort((t,r)=>{const o=Me(t,"priority")||100,l=Me(r,"priority")||100;return o>l?-1:o<l?1:0})}function qx(n){const e=Zx(Jm(n)),t=Qx(e.map(r=>r.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function Xx(n,e){const t=qx(n);return Yx(t,e)}function eC(n,e){const t=Xx(e),r=Zn.fromJSON(t,n);return Vx(r.content,t)}function tC(n,e,t){const{from:r,to:o}=e,{blockSeparator:l=`

`,textSerializers:a={}}=t||{};let u="";return n.nodesBetween(r,o,(d,f,h,m)=>{var y;d.isBlock&&f>r&&(u+=l);const w=a==null?void 0:a[d.type.name];if(w)return h&&(u+=w({node:d,pos:f,parent:h,index:m,range:e})),!1;d.isText&&(u+=(y=d==null?void 0:d.text)==null?void 0:y.slice(Math.max(r,f)-f,o-f))}),u}function nC(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function rC(n,e){const t=ut(e,n.schema),{from:r,to:o}=n.selection,l=[];n.doc.nodesBetween(r,o,u=>{l.push(u)});const a=l.reverse().find(u=>u.type.name===t.name);return a?{...a.attrs}:{}}function iC(n,e){const t=cc(typeof e=="string"?e:e.name,n.schema);return t==="node"?rC(n,e):t==="mark"?Gm(n,e):{}}function oC(n,e=JSON.stringify){const t={};return n.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(t,o)?!1:t[o]=!0})}function sC(n){const e=oC(n);return e.length===1?e:e.filter((t,r)=>!e.filter((l,a)=>a!==r).some(l=>t.oldRange.from>=l.oldRange.from&&t.oldRange.to<=l.oldRange.to&&t.newRange.from>=l.newRange.from&&t.newRange.to<=l.newRange.to))}function qm(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((o,l)=>{const a=[];if(o.ranges.length)o.forEach((u,d)=>{a.push({from:u,to:d})});else{const{from:u,to:d}=t[l];if(u===void 0||d===void 0)return;a.push({from:u,to:d})}a.forEach(({from:u,to:d})=>{const f=e.slice(l).map(u,-1),h=e.slice(l).map(d),m=e.invert().map(f,-1),y=e.invert().map(h);r.push({oldRange:{from:m,to:y},newRange:{from:f,to:h}})})}),sC(r)}function fc(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(o=>{const l=t.resolve(n),a=ac(l,o.type);a&&r.push({mark:o,...a})}):t.nodesBetween(n,e,(o,l)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(a=>({from:l,to:l+o.nodeSize,mark:a})))}),r}var lC=(n,e,t,r=20)=>{const o=n.doc.resolve(t);let l=r,a=null;for(;l>0&&a===null;){const u=o.node(l);(u==null?void 0:u.type.name)===e?a=u:l-=1}return[a,l]};function pl(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const o=n.find(l=>l.type===e&&l.name===r);return o?o.attribute.keepOnSplit:!1}))}function aC(n,e,t={}){const{empty:r,ranges:o}=n.selection,l=e?lr(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>l?l.name===m.type.name:!0).find(m=>cl(m.attrs,t,{strict:!1}));let a=0;const u=[];if(o.forEach(({$from:m,$to:y})=>{const w=m.pos,k=y.pos;n.doc.nodesBetween(w,k,(x,b)=>{if(!x.isText&&!x.marks.length)return;const E=Math.max(w,b),T=Math.min(k,b+x.nodeSize),M=T-E;a+=M,u.push(...x.marks.map(_=>({mark:_,from:E,to:T})))})}),a===0)return!1;const d=u.filter(m=>l?l.name===m.mark.type.name:!0).filter(m=>cl(m.mark.attrs,t,{strict:!1})).reduce((m,y)=>m+y.to-y.from,0),f=u.filter(m=>l?m.mark.type!==l&&m.mark.type.excludes(l):!0).reduce((m,y)=>m+y.to-y.from,0);return(d>0?d+f:d)>=a}var uC=(n,e)=>{const{$from:t,$to:r,$anchor:o}=n.selection;if(e){const l=fl(u=>u.type.name===e)(n.selection);if(!l)return!1;const a=n.doc.resolve(l.pos+1);return o.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||t.pos!==r.pos)},cC=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function Xm(n,e){const{nodeExtensions:t}=dc(e),r=t.find(a=>a.name===n);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},l=Fe(Me(r,"group",o));return typeof l!="string"?!1:l.split(" ").includes("list")}function pc(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let o=!0;return n.content.forEach(l=>{o!==!1&&(pc(l,{ignoreWhitespace:t,checkChildren:e})||(o=!1))}),o}return!1}function eg(n){return n instanceof he}function dC(n,e,t){var r;const{selection:o}=e;let l=null;if(Wm(o)&&(l=o.$cursor),l){const u=(r=n.storedMarks)!=null?r:l.marks();return l.parent.type.allowsMarkType(t)&&(!!t.isInSet(u)||!u.some(f=>f.type.excludes(t)))}const{ranges:a}=o;return a.some(({$from:u,$to:d})=>{let f=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,d.pos,(h,m,y)=>{if(f)return!1;if(h.isInline){const w=!y||y.type.allowsMarkType(t),k=!!t.isInSet(h.marks)||!h.marks.some(x=>x.type.excludes(t));f=w&&k}return!f}),f})}var fC=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const{selection:l}=t,{empty:a,ranges:u}=l,d=lr(n,r.schema);if(o)if(a){const f=Gm(r,d);t.addStoredMark(d.create({...f,...e}))}else u.forEach(f=>{const h=f.$from.pos,m=f.$to.pos;r.doc.nodesBetween(h,m,(y,w)=>{const k=Math.max(w,h),x=Math.min(w+y.nodeSize,m);y.marks.find(E=>E.type===d)?y.marks.forEach(E=>{d===E.type&&t.addMark(k,x,d.create({...E.attrs,...e}))}):t.addMark(k,x,d.create(e))})});return dC(r,t,d)},pC=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),hC=(n,e={})=>({state:t,dispatch:r,chain:o})=>{const l=ut(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),l.isTextblock?o().command(({commands:u})=>Xh(l,{...a,...e})(t)?!0:u.clearNodes()).command(({state:u})=>Xh(l,{...a,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},mC=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,o=Kr(n,0,r.content.size),l=he.create(r,o);e.setSelection(l)}return!0},gC=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:o,to:l}=typeof n=="number"?{from:n,to:n}:n,a=Ce.atStart(r).from,u=Ce.atEnd(r).to,d=Kr(o,a,u),f=Kr(l,a,u),h=Ce.create(r,d,f);e.setSelection(h)}return!0},yC=n=>({state:e,dispatch:t})=>{const r=ut(n,e.schema);return Qk(r)(e,t)};function tg(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(o=>e==null?void 0:e.includes(o.type.name));n.tr.ensureMarks(r)}}var vC=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:o})=>{const{selection:l,doc:a}=e,{$from:u,$to:d}=l,f=o.extensionManager.attributes,h=pl(f,u.node().type.name,u.node().attrs);if(l instanceof he&&l.node.isBlock)return!u.parentOffset||!_n(a,u.pos)?!1:(r&&(n&&tg(t,o.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,y=u.depth===0?void 0:Ux(u.node(-1).contentMatchAt(u.indexAfter(-1)));let w=m&&y?[{type:y,attrs:h}]:void 0,k=_n(e.doc,e.mapping.map(u.pos),1,w);if(!w&&!k&&_n(e.doc,e.mapping.map(u.pos),1,y?[{type:y}]:void 0)&&(k=!0,w=y?[{type:y,attrs:h}]:void 0),r){if(k&&(l instanceof Ce&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,w),y&&!m&&!u.parentOffset&&u.parent.type!==y)){const x=e.mapping.map(u.before()),b=e.doc.resolve(x);u.node(-1).canReplaceWith(b.index(),b.index()+1,y)&&e.setNodeMarkup(e.mapping.map(u.before()),y)}n&&tg(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return k},wC=(n,e={})=>({tr:t,state:r,dispatch:o,editor:l})=>{var a;const u=ut(n,r.schema),{$from:d,$to:f}=r.selection,h=r.selection.node;if(h&&h.isBlock||d.depth<2||!d.sameParent(f))return!1;const m=d.node(-1);if(m.type!==u)return!1;const y=l.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(o){let E=$.empty;const T=d.index(-1)?1:d.index(-2)?2:3;for(let j=d.depth-T;j>=d.depth-3;j-=1)E=$.from(d.node(j).copy(E));const M=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,_={...pl(y,d.node().type.name,d.node().attrs),...e},F=((a=u.contentMatch.defaultType)==null?void 0:a.createAndFill(_))||void 0;E=E.append($.from(u.createAndFill(null,F)||void 0));const z=d.before(d.depth-(T-1));t.replace(z,d.after(-M),new q(E,4-T,0));let Y=-1;t.doc.nodesBetween(z,t.doc.content.size,(j,ve)=>{if(Y>-1)return!1;j.isTextblock&&j.content.size===0&&(Y=ve+1)}),Y>-1&&t.setSelection(Ce.near(t.doc.resolve(Y))),t.scrollIntoView()}return!0}const w=f.pos===d.end()?m.contentMatchAt(0).defaultType:null,k={...pl(y,m.type.name,m.attrs),...e},x={...pl(y,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,f.pos);const b=w?[{type:u,attrs:k},{type:w,attrs:x}]:[{type:u,attrs:k}];if(!_n(t.doc,d.pos,2))return!1;if(o){const{selection:E,storedMarks:T}=r,{splittableMarks:M}=l.extensionManager,_=T||E.$to.parentOffset&&E.$from.marks();if(t.split(d.pos,2,b).scrollIntoView(),!_||!o)return!0;const F=_.filter(z=>M.includes(z.type.name));t.ensureMarks(F)}return!0},hc=(n,e)=>{const t=fl(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===(o==null?void 0:o.type)&&er(n.doc,t.pos)&&n.join(t.pos),!0},mc=(n,e)=>{const t=fl(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===(o==null?void 0:o.type)&&er(n.doc,r)&&n.join(r),!0},kC=(n,e,t,r={})=>({editor:o,tr:l,state:a,dispatch:u,chain:d,commands:f,can:h})=>{const{extensions:m,splittableMarks:y}=o.extensionManager,w=ut(n,a.schema),k=ut(e,a.schema),{selection:x,storedMarks:b}=a,{$from:E,$to:T}=x,M=E.blockRange(T),_=b||x.$to.parentOffset&&x.$from.marks();if(!M)return!1;const F=fl(z=>Xm(z.type.name,m))(x);if(M.depth>=1&&F&&M.depth-F.depth<=1){if(F.node.type===w)return f.liftListItem(k);if(Xm(F.node.type.name,m)&&w.validContent(F.node.content)&&u)return d().command(()=>(l.setNodeMarkup(F.pos,w),!0)).command(()=>hc(l,w)).command(()=>mc(l,w)).run()}return!t||!_||!u?d().command(()=>h().wrapInList(w,r)?!0:f.clearNodes()).wrapInList(w,r).command(()=>hc(l,w)).command(()=>mc(l,w)).run():d().command(()=>{const z=h().wrapInList(w,r),Y=_.filter(j=>y.includes(j.type.name));return l.ensureMarks(Y),z?!0:f.clearNodes()}).wrapInList(w,r).command(()=>hc(l,w)).command(()=>mc(l,w)).run()},SC=(n,e={},t={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:l=!1}=t,a=lr(n,r.schema);return aC(r,a,e)?o.unsetMark(a,{extendEmptyMarkRange:l}):o.setMark(a,e)},xC=(n,e,t={})=>({state:r,commands:o})=>{const l=ut(n,r.schema),a=ut(e,r.schema),u=xi(r,l,t);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),u?o.setNode(a,d):o.setNode(l,{...d,...t})},CC=(n,e={})=>({state:t,commands:r})=>{const o=ut(n,t.schema);return xi(t,o,e)?r.lift(o):r.wrapIn(o,e)},bC=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const o=t[r];let l;if(o.spec.isInputRules&&(l=o.getState(n))){if(e){const a=n.tr,u=l.transform;for(let d=u.steps.length-1;d>=0;d-=1)a.step(u.steps[d].invert(u.docs[d]));if(l.text){const d=a.doc.resolve(l.from).marks();a.replaceWith(l.from,l.to,n.schema.text(l.text,d))}else a.delete(l.from,l.to)}return!0}}return!1},EC=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:o}=t;return r||e&&o.forEach(l=>{n.removeMark(l.$from.pos,l.$to.pos)}),!0},IC=(n,e={})=>({tr:t,state:r,dispatch:o})=>{var l;const{extendEmptyMarkRange:a=!1}=e,{selection:u}=t,d=lr(n,r.schema),{$from:f,empty:h,ranges:m}=u;if(!o)return!0;if(h&&a){let{from:y,to:w}=u;const k=(l=f.marks().find(b=>b.type===d))==null?void 0:l.attrs,x=ac(f,d,k);x&&(y=x.from,w=x.to),t.removeMark(y,w,d)}else m.forEach(y=>{t.removeMark(y.$from.pos,y.$to.pos,d)});return t.removeStoredMark(d),!0},TC=(n,e={})=>({tr:t,state:r,dispatch:o})=>{let l=null,a=null;const u=cc(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(l=ut(n,r.schema)),u==="mark"&&(a=lr(n,r.schema)),o&&t.selection.ranges.forEach(d=>{const f=d.$from.pos,h=d.$to.pos;let m,y,w,k;t.selection.empty?r.doc.nodesBetween(f,h,(x,b)=>{l&&l===x.type&&(w=Math.max(b,f),k=Math.min(b+x.nodeSize,h),m=b,y=x)}):r.doc.nodesBetween(f,h,(x,b)=>{b<f&&l&&l===x.type&&(w=Math.max(b,f),k=Math.min(b+x.nodeSize,h),m=b,y=x),b>=f&&b<=h&&(l&&l===x.type&&t.setNodeMarkup(b,void 0,{...x.attrs,...e}),a&&x.marks.length&&x.marks.forEach(E=>{if(a===E.type){const T=Math.max(b,f),M=Math.min(b+x.nodeSize,h);t.addMark(T,M,a.create({...E.attrs,...e}))}}))}),y&&(m!==void 0&&t.setNodeMarkup(m,void 0,{...y.attrs,...e}),a&&y.marks.length&&y.marks.forEach(x=>{a===x.type&&t.addMark(w,k,a.create({...x.attrs,...e}))}))}),!0):!1},AC=(n,e={})=>({state:t,dispatch:r})=>{const o=ut(n,t.schema);return Hk(o,e)(t,r)},NC=(n,e={})=>({state:t,dispatch:r})=>{const o=ut(n,t.schema);return Vk(o,e)(t,r)},hl=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}};function MC(n){return Object.prototype.toString.call(n).slice(8,-1)}function ml(n){return MC(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function ng(n,e){const t={...n};return ml(n)&&ml(e)&&Object.keys(e).forEach(r=>{ml(e[r])&&ml(n[r])?t[r]=ng(n[r],e[r]):t[r]=e[r]}),t}var gc=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...Fe(Me(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Fe(Me(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>ng(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},Ci=class h1 extends gc{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new h1(t)}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const a=o.marks();if(!!!a.find(f=>(f==null?void 0:f.type.name)===t.name))return!1;const d=a.find(f=>(f==null?void 0:f.type.name)===t.name);return d&&r.removeStoredMark(d),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},RC=class{constructor(n){this.find=n.find,this.handler=n.handler}},OC={};lc(OC,{ClipboardTextSerializer:()=>LC,Commands:()=>DC,Delete:()=>PC,Drop:()=>_C,Editable:()=>FC,FocusEvents:()=>zC,Keymap:()=>BC,Paste:()=>jC,Tabindex:()=>UC,focusEventsPluginKey:()=>rg});var ot=class m1 extends gc{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new m1(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},LC=ot.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new at({key:new mt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:o}=e,{ranges:l}=o,a=Math.min(...l.map(h=>h.$from.pos)),u=Math.max(...l.map(h=>h.$to.pos)),d=nC(t);return tC(r,{from:a,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),DC=ot.create({name:"commands",addCommands(){return{...Bm}}}),PC=ot.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,r,o;const l=()=>{var a,u,d,f;if((f=(d=(u=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:u.filterTransaction)==null?void 0:d.call(u,n))!=null?f:n.getMeta("y-sync$"))return;const h=Km(n.before,[n,...e]);qm(h).forEach(w=>{h.mapping.mapResult(w.oldRange.from).deletedAfter&&h.mapping.mapResult(w.oldRange.to).deletedBefore&&h.before.nodesBetween(w.oldRange.from,w.oldRange.to,(k,x)=>{const b=x+k.nodeSize-2,E=w.oldRange.from<=x&&b<=w.oldRange.to;this.editor.emit("delete",{type:"node",node:k,from:x,to:b,newFrom:h.mapping.map(x),newTo:h.mapping.map(b),deletedRange:w.oldRange,newRange:w.newRange,partial:!E,editor:this.editor,transaction:n,combinedTransform:h})})});const y=h.mapping;h.steps.forEach((w,k)=>{var x,b;if(w instanceof dn){const E=y.slice(k).map(w.from,-1),T=y.slice(k).map(w.to),M=y.invert().map(E,-1),_=y.invert().map(T),F=(x=h.doc.nodeAt(E-1))==null?void 0:x.marks.some(Y=>Y.eq(w.mark)),z=(b=h.doc.nodeAt(T))==null?void 0:b.marks.some(Y=>Y.eq(w.mark));this.editor.emit("delete",{type:"mark",mark:w.mark,from:w.from,to:w.to,deletedRange:{from:M,to:_},newRange:{from:E,to:T},partial:!!(z||F),editor:this.editor,transaction:n,combinedTransform:h})}})};(o=(r=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:r.async)==null||o?setTimeout(l,0):l()}}),_C=ot.create({name:"drop",addProseMirrorPlugins(){return[new at({key:new mt("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),FC=ot.create({name:"editable",addProseMirrorPlugins(){return[new at({key:new mt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),rg=new mt("focusEvents"),zC=ot.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new at({key:rg,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),BC=ot.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:u})=>{const{selection:d,doc:f}=u,{empty:h,$anchor:m}=d,{pos:y,parent:w}=m,k=m.parent.isTextblock&&y>0?u.doc.resolve(y-1):m,x=k.parent.type.spec.isolating,b=m.pos-m.parentOffset,E=x&&k.parent.childCount===1?b===m.pos:Ne.atStart(f).from===y;return!h||!w.type.isTextblock||w.textContent.length||!E||E&&m.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},l={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return uc()||Vm()?l:o},addProseMirrorPlugins(){return[new at({key:new mt("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(x=>x.getMeta("composition")))return;const r=n.some(x=>x.docChanged)&&!e.doc.eq(t.doc),o=n.some(x=>x.getMeta("preventClearDocument"));if(!r||o)return;const{empty:l,from:a,to:u}=e.selection,d=Ne.atStart(e.doc).from,f=Ne.atEnd(e.doc).to;if(l||!(a===d&&u===f)||!pc(t.doc))return;const y=t.tr,w=zm({state:t,transaction:y}),{commands:k}=new KS({editor:this.editor,state:w});if(k.clearNodes(),!!y.steps.length)return y}})]}}),jC=ot.create({name:"paste",addProseMirrorPlugins(){return[new at({key:new mt("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),UC=ot.create({name:"tabindex",addProseMirrorPlugins(){return[new at({key:new mt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});function bi(n){return new hl({find:n.find,handler:({state:e,range:t,match:r})=>{const o=Fe(n.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:l}=e,a=r[r.length-1],u=r[0];if(a){const d=u.search(/\S/),f=t.from+u.indexOf(a),h=f+a.length;if(fc(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(x=>x===n.type&&x!==w.mark.type)).filter(w=>w.to>f).length)return null;h<t.to&&l.delete(h,t.to),f>t.from&&l.delete(t.from+d,f);const y=t.from+d+a.length;l.addMark(t.from+d,y,n.type.create(o||{})),l.removeStoredMark(n.type)}},undoable:n.undoable})}function WC(n){return new hl({find:n.find,handler:({state:e,range:t,match:r})=>{const o=Fe(n.getAttributes,void 0,r)||{},{tr:l}=e,a=t.from;let u=t.to;const d=n.type.create(o);if(r[1]){const f=r[0].lastIndexOf(r[1]);let h=a+f;h>u?h=u:u=h+r[1].length;const m=r[0][r[0].length-1];l.insertText(m,a+r[0].length-1),l.replaceWith(h,u,d)}else if(r[0]){const f=n.type.isInline?a:a-1;l.insert(f,n.type.create(o)).delete(l.mapping.map(a),l.mapping.map(u))}l.scrollIntoView()},undoable:n.undoable})}function yc(n){return new hl({find:n.find,handler:({state:e,range:t,match:r})=>{const o=e.doc.resolve(t.from),l=Fe(n.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,l)},undoable:n.undoable})}function Ei(n){return new hl({find:n.find,handler:({state:e,range:t,match:r,chain:o})=>{const l=Fe(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),d=a.doc.resolve(t.from).blockRange(),f=d&&Ou(d,n.type,l);if(!f)return null;if(a.wrap(d,f),n.keepMarks&&n.editor){const{selection:m,storedMarks:y}=e,{splittableMarks:w}=n.editor.extensionManager,k=y||m.$to.parentOffset&&m.$from.marks();if(k){const x=k.filter(b=>w.includes(b.type.name));a.ensureMarks(x)}}if(n.keepAttributes){const m=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(m,l).run()}const h=a.doc.resolve(t.from-1).nodeBefore;h&&h.type===n.type&&er(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,h))&&a.join(t.from-1)},undoable:n.undoable})}function HC(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof he){const l=r.index();return r.parent.canReplaceWith(l,l+1,e)}let o=r.depth;for(;o>=0;){const l=r.index(o);if(r.node(o).contentMatchAt(l).matchType(e))return!0;o-=1}return!1}var VC={};lc(VC,{createAtomBlockMarkdownSpec:()=>$C,createBlockMarkdownSpec:()=>GC,createInlineMarkdownSpec:()=>YC,parseAttributes:()=>vc,parseIndentedBlocks:()=>kc,renderNestedMarkdownContent:()=>Sc,serializeAttributes:()=>wc});function vc(n){if(!(n!=null&&n.trim()))return{};const e={},t=[],r=n.replace(/["']([^"']*)["']/g,f=>(t.push(f),`__QUOTED_${t.length-1}__`)),o=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(o){const f=o.map(h=>h.trim().slice(1));e.class=f.join(" ")}const l=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);l&&(e.id=l[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(a)).forEach(([,f,h])=>{var m;const y=parseInt(((m=h.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),w=t[y];w&&(e[f]=w.slice(1,-1))});const d=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(h=>{h.match(/^[a-zA-Z][\w-]*$/)&&(e[h]=!0)}),e}function wc(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,r])=>{t==="class"||t==="id"||(r===!0?e.push(t):r!==!1&&r!=null&&e.push(`${t}="${String(r)}"`))}),e.join(" ")}function $C(n){const{nodeName:e,name:t,parseAttributes:r=vc,serializeAttributes:o=wc,defaultAttributes:l={},requiredAttributes:a=[],allowedAttributes:u}=n,d=t||e,f=h=>{if(!u)return h;const m={};return u.forEach(y=>{y in h&&(m[y]=h[y])}),m};return{parseMarkdown:(h,m)=>{const y={...l,...h.attributes};return m.createNode(e,y,[])},markdownTokenizer:{name:e,level:"block",start(h){var m;const y=new RegExp(`^:::${d}(?:\\s|$)`,"m"),w=(m=h.match(y))==null?void 0:m.index;return w!==void 0?w:-1},tokenize(h,m,y){const w=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),k=h.match(w);if(!k)return;const x=k[1]||"",b=r(x);if(!a.find(T=>!(T in b)))return{type:e,raw:k[0],attributes:b}}},renderMarkdown:h=>{const m=f(h.attrs||{}),y=o(m),w=y?` {${y}}`:"";return`:::${d}${w} :::`}}}function GC(n){const{nodeName:e,name:t,getContent:r,parseAttributes:o=vc,serializeAttributes:l=wc,defaultAttributes:a={},content:u="block",allowedAttributes:d}=n,f=t||e,h=m=>{if(!d)return m;const y={};return d.forEach(w=>{w in m&&(y[w]=m[w])}),y};return{parseMarkdown:(m,y)=>{let w;if(r){const x=r(m);w=typeof x=="string"?[{type:"text",text:x}]:x}else u==="block"?w=y.parseChildren(m.tokens||[]):w=y.parseInline(m.tokens||[]);const k={...a,...m.attributes};return y.createNode(e,k,w)},markdownTokenizer:{name:e,level:"block",start(m){var y;const w=new RegExp(`^:::${f}`,"m"),k=(y=m.match(w))==null?void 0:y.index;return k!==void 0?k:-1},tokenize(m,y,w){var k;const x=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=m.match(x);if(!b)return;const[E,T=""]=b,M=o(T);let _=1;const F=E.length;let z="";const Y=/^:::([\w-]*)(\s.*)?/gm,j=m.slice(F);for(Y.lastIndex=0;;){const ve=Y.exec(j);if(ve===null)break;const pe=ve.index,Ie=ve[1];if(!((k=ve[2])!=null&&k.endsWith(":::"))){if(Ie)_+=1;else if(_-=1,_===0){const ce=j.slice(0,pe);z=ce.trim();const fe=m.slice(0,F+pe+ve[0].length);let re=[];if(z)if(u==="block")for(re=w.blockTokens(ce),re.forEach(te=>{te.text&&(!te.tokens||te.tokens.length===0)&&(te.tokens=w.inlineTokens(te.text))});re.length>0;){const te=re[re.length-1];if(te.type==="paragraph"&&(!te.text||te.text.trim()===""))re.pop();else break}else re=w.inlineTokens(z);return{type:e,raw:fe,attributes:M,content:z,tokens:re}}}}}},renderMarkdown:(m,y)=>{const w=h(m.attrs||{}),k=l(w),x=k?` {${k}}`:"",b=y.renderChildren(m.content||[],`

`);return`:::${f}${x}

${b}

:::`}}}function KC(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=t.exec(n);for(;r!==null;){const[,o,l,a]=r;e[o]=l||a,r=t.exec(n)}return e}function JC(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function YC(n){const{nodeName:e,name:t,getContent:r,parseAttributes:o=KC,serializeAttributes:l=JC,defaultAttributes:a={},selfClosing:u=!1,allowedAttributes:d}=n,f=t||e,h=y=>{if(!d)return y;const w={};return d.forEach(k=>{k in y&&(w[k]=y[k])}),w},m=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(y,w)=>{const k={...a,...y.attributes};if(u)return w.createNode(e,k);const x=r?r(y):y.content||"";return x?w.createNode(e,k,[w.createTextNode(x)]):w.createNode(e,k,[])},markdownTokenizer:{name:e,level:"inline",start(y){const w=u?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),k=y.match(w),x=k==null?void 0:k.index;return x!==void 0?x:-1},tokenize(y,w,k){const x=u?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),b=y.match(x);if(!b)return;let E="",T="";if(u){const[,_]=b;T=_}else{const[,_,F]=b;T=_,E=F||""}const M=o(T.trim());return{type:e,raw:b[0],content:E.trim(),attributes:M}}},renderMarkdown:y=>{let w="";r?w=r(y):y.content&&y.content.length>0&&(w=y.content.filter(E=>E.type==="text").map(E=>E.text).join(""));const k=h(y.attrs||{}),x=l(k),b=x?` ${x}`:"";return u?`[${f}${b}]`:`[${f}${b}]${w}[/${f}]`}}}function kc(n,e,t){var r,o,l,a;const u=n.split(`
`),d=[];let f="",h=0;const m=e.baseIndentSize||2;for(;h<u.length;){const y=u[h],w=y.match(e.itemPattern);if(!w){if(d.length>0)break;if(y.trim()===""){h+=1;continue}else return}const k=e.extractItemData(w),{indentLevel:x,mainContent:b}=k;f=`${f}${y}
`;const E=[b];for(h+=1;h<u.length;){const F=u[h];if(F.trim()===""){const Y=u.slice(h+1).findIndex(pe=>pe.trim()!=="");if(Y===-1)break;if((((o=(r=u[h+1+Y].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:o.length)||0)>x){E.push(F),f=`${f}${F}
`,h+=1;continue}else break}if((((a=(l=F.match(/^(\s*)/))==null?void 0:l[1])==null?void 0:a.length)||0)>x)E.push(F),f=`${f}${F}
`,h+=1;else break}let T;const M=E.slice(1);if(M.length>0){const F=M.map(z=>z.slice(x+m)).join(`
`);F.trim()&&(e.customNestedParser?T=e.customNestedParser(F):T=t.blockTokens(F))}const _=e.createToken(k,T);d.push(_)}if(d.length!==0)return{items:d,raw:f.trim()}}function Sc(n,e,t,r){if(!n||!Array.isArray(n.content))return"";const o=typeof t=="function"?t(r):t,[l,...a]=n.content,u=e.renderChildren([l]),d=[`${o}${u}`];return a&&a.length>0&&a.forEach(f=>{const h=e.renderChildren([f]);if(h){const m=h.split(`
`).map(y=>y?e.indent(y):"").join(`
`);d.push(m)}}),d.join(`
`)}var Qt=class g1 extends gc{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new g1(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function Jr(n){return new RC({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:o})=>{const l=Fe(n.getAttributes,void 0,r,o);if(l===!1||l===null)return null;const{tr:a}=e,u=r[r.length-1],d=r[0];let f=t.to;if(u){const h=d.search(/\S/),m=t.from+d.indexOf(u),y=m+u.length;if(fc(t.from,t.to,e.doc).filter(k=>k.mark.type.excluded.find(b=>b===n.type&&b!==k.mark.type)).filter(k=>k.to>m).length)return null;y<t.to&&a.delete(y,t.to),m>t.from&&a.delete(t.from+h,m),f=t.from+h+u.length,a.addMark(t.from+h,f,n.type.create(l||{})),a.removeStoredMark(n.type)}}})}const QC="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",ZC="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",xc="numeric",Cc="ascii",bc="alpha",Mo="asciinumeric",Ro="alphanumeric",Ec="domain",ig="emoji",qC="scheme",XC="slashscheme",Ic="whitespace";function eb(n,e){return n in e||(e[n]=[]),e[n]}function Yr(n,e,t){e[xc]&&(e[Mo]=!0,e[Ro]=!0),e[Cc]&&(e[Mo]=!0,e[bc]=!0),e[Mo]&&(e[Ro]=!0),e[bc]&&(e[Ro]=!0),e[Ro]&&(e[Ec]=!0),e[ig]&&(e[Ec]=!0);for(const r in e){const o=eb(r,t);o.indexOf(n)<0&&o.push(n)}}function tb(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function jt(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}jt.groups={},jt.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],l=e.jr[r][1];if(l&&o.test(n))return l}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let o=0;o<n.length;o++)this.tt(n[o],e,t,r)},tr(n,e,t,r){r=r||jt.groups;let o;return e&&e.j?o=e:(o=new jt(e),t&&r&&Yr(e,t,r)),this.jr.push([n,o]),o},ts(n,e,t,r){let o=this;const l=n.length;if(!l)return o;for(let a=0;a<l-1;a++)o=o.tt(n[a]);return o.tt(n[l-1],e,t,r)},tt(n,e,t,r){r=r||jt.groups;const o=this;if(e&&e.j)return o.j[n]=e,e;const l=e;let a,u=o.go(n);if(u?(a=new jt,Object.assign(a.j,u.j),a.jr.push.apply(a.jr,u.jr),a.jd=u.jd,a.t=u.t):a=new jt,l){if(r)if(a.t&&typeof a.t=="string"){const d=Object.assign(tb(a.t,r),t);Yr(l,d,r)}else t&&Yr(l,t,r);a.t=l}return o.j[n]=a,a}};const be=(n,e,t,r,o)=>n.ta(e,t,r,o),Qe=(n,e,t,r,o)=>n.tr(e,t,r,o),og=(n,e,t,r,o)=>n.ts(e,t,r,o),K=(n,e,t,r,o)=>n.tt(e,t,r,o),Fn="WORD",Tc="UWORD",sg="ASCIINUMERICAL",lg="ALPHANUMERICAL",Oo="LOCALHOST",Ac="TLD",Nc="UTLD",gl="SCHEME",Ii="SLASH_SCHEME",Mc="NUM",Rc="WS",Oc="NL",Lo="OPENBRACE",Do="CLOSEBRACE",yl="OPENBRACKET",vl="CLOSEBRACKET",wl="OPENPAREN",kl="CLOSEPAREN",Sl="OPENANGLEBRACKET",xl="CLOSEANGLEBRACKET",Cl="FULLWIDTHLEFTPAREN",bl="FULLWIDTHRIGHTPAREN",El="LEFTCORNERBRACKET",Il="RIGHTCORNERBRACKET",Tl="LEFTWHITECORNERBRACKET",Al="RIGHTWHITECORNERBRACKET",Nl="FULLWIDTHLESSTHAN",Ml="FULLWIDTHGREATERTHAN",Rl="AMPERSAND",Ol="APOSTROPHE",Ll="ASTERISK",ar="AT",Dl="BACKSLASH",Pl="BACKTICK",_l="CARET",ur="COLON",Lc="COMMA",Fl="DOLLAR",En="DOT",zl="EQUALS",Dc="EXCLAMATION",nn="HYPHEN",Po="PERCENT",Bl="PIPE",jl="PLUS",Ul="POUND",_o="QUERY",Pc="QUOTE",ag="FULLWIDTHMIDDLEDOT",_c="SEMI",In="SLASH",Fo="TILDE",Wl="UNDERSCORE",ug="EMOJI",Hl="SYM";var cg=Object.freeze({__proto__:null,ALPHANUMERICAL:lg,AMPERSAND:Rl,APOSTROPHE:Ol,ASCIINUMERICAL:sg,ASTERISK:Ll,AT:ar,BACKSLASH:Dl,BACKTICK:Pl,CARET:_l,CLOSEANGLEBRACKET:xl,CLOSEBRACE:Do,CLOSEBRACKET:vl,CLOSEPAREN:kl,COLON:ur,COMMA:Lc,DOLLAR:Fl,DOT:En,EMOJI:ug,EQUALS:zl,EXCLAMATION:Dc,FULLWIDTHGREATERTHAN:Ml,FULLWIDTHLEFTPAREN:Cl,FULLWIDTHLESSTHAN:Nl,FULLWIDTHMIDDLEDOT:ag,FULLWIDTHRIGHTPAREN:bl,HYPHEN:nn,LEFTCORNERBRACKET:El,LEFTWHITECORNERBRACKET:Tl,LOCALHOST:Oo,NL:Oc,NUM:Mc,OPENANGLEBRACKET:Sl,OPENBRACE:Lo,OPENBRACKET:yl,OPENPAREN:wl,PERCENT:Po,PIPE:Bl,PLUS:jl,POUND:Ul,QUERY:_o,QUOTE:Pc,RIGHTCORNERBRACKET:Il,RIGHTWHITECORNERBRACKET:Al,SCHEME:gl,SEMI:_c,SLASH:In,SLASH_SCHEME:Ii,SYM:Hl,TILDE:Fo,TLD:Ac,UNDERSCORE:Wl,UTLD:Nc,UWORD:Tc,WORD:Fn,WS:Rc});const zn=/[a-z]/,zo=new RegExp("\\p{L}","u"),Fc=new RegExp("\\p{Emoji}","u"),Bn=/\d/,zc=/\s/,dg="\r",Bc=`
`,nb="",rb="",jc="";let Vl=null,$l=null;function ib(n=[]){const e={};jt.groups=e;const t=new jt;Vl==null&&(Vl=pg(QC)),$l==null&&($l=pg(ZC)),K(t,"'",Ol),K(t,"{",Lo),K(t,"}",Do),K(t,"[",yl),K(t,"]",vl),K(t,"(",wl),K(t,")",kl),K(t,"<",Sl),K(t,">",xl),K(t,"",Cl),K(t,"",bl),K(t,"",El),K(t,"",Il),K(t,"",Tl),K(t,"",Al),K(t,"",Nl),K(t,"",Ml),K(t,"&",Rl),K(t,"*",Ll),K(t,"@",ar),K(t,"`",Pl),K(t,"^",_l),K(t,":",ur),K(t,",",Lc),K(t,"$",Fl),K(t,".",En),K(t,"=",zl),K(t,"!",Dc),K(t,"-",nn),K(t,"%",Po),K(t,"|",Bl),K(t,"+",jl),K(t,"#",Ul),K(t,"?",_o),K(t,'"',Pc),K(t,"/",In),K(t,";",_c),K(t,"~",Fo),K(t,"_",Wl),K(t,"\\",Dl),K(t,"",ag);const r=Qe(t,Bn,Mc,{[xc]:!0});Qe(r,Bn,r);const o=Qe(r,zn,sg,{[Mo]:!0}),l=Qe(r,zo,lg,{[Ro]:!0}),a=Qe(t,zn,Fn,{[Cc]:!0});Qe(a,Bn,o),Qe(a,zn,a),Qe(o,Bn,o),Qe(o,zn,o);const u=Qe(t,zo,Tc,{[bc]:!0});Qe(u,zn),Qe(u,Bn,l),Qe(u,zo,u),Qe(l,Bn,l),Qe(l,zn),Qe(l,zo,l);const d=K(t,Bc,Oc,{[Ic]:!0}),f=K(t,dg,Rc,{[Ic]:!0}),h=Qe(t,zc,Rc,{[Ic]:!0});K(t,jc,h),K(f,Bc,d),K(f,jc,h),Qe(f,zc,h),K(h,dg),K(h,Bc),Qe(h,zc,h),K(h,jc,h);const m=Qe(t,Fc,ug,{[ig]:!0});K(m,"#"),Qe(m,Fc,m),K(m,nb,m);const y=K(m,rb);K(y,"#"),Qe(y,Fc,m);const w=[[zn,a],[Bn,o]],k=[[zn,null],[zo,u],[Bn,l]];for(let x=0;x<Vl.length;x++)cr(t,Vl[x],Ac,Fn,w);for(let x=0;x<$l.length;x++)cr(t,$l[x],Nc,Tc,k);Yr(Ac,{tld:!0,ascii:!0},e),Yr(Nc,{utld:!0,alpha:!0},e),cr(t,"file",gl,Fn,w),cr(t,"mailto",gl,Fn,w),cr(t,"http",Ii,Fn,w),cr(t,"https",Ii,Fn,w),cr(t,"ftp",Ii,Fn,w),cr(t,"ftps",Ii,Fn,w),Yr(gl,{scheme:!0,ascii:!0},e),Yr(Ii,{slashscheme:!0,ascii:!0},e),n=n.sort((x,b)=>x[0]>b[0]?1:-1);for(let x=0;x<n.length;x++){const b=n[x][0],T=n[x][1]?{[qC]:!0}:{[XC]:!0};b.indexOf("-")>=0?T[Ec]=!0:zn.test(b)?Bn.test(b)?T[Mo]=!0:T[Cc]=!0:T[xc]=!0,og(t,b,b,T)}return og(t,"localhost",Oo,{ascii:!0}),t.jd=new jt(Hl),{start:t,tokens:Object.assign({groups:e},cg)}}function fg(n,e){const t=ob(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,o=[];let l=0,a=0;for(;a<r;){let u=n,d=null,f=0,h=null,m=-1,y=-1;for(;a<r&&(d=u.go(t[a]));)u=d,u.accepts()?(m=0,y=0,h=u):m>=0&&(m+=t[a].length,y++),f+=t[a].length,l+=t[a].length,a++;l-=m,a-=y,f-=m,o.push({t:h.t,v:e.slice(l-f,l),s:l-f,e:l})}return o}function ob(n){const e=[],t=n.length;let r=0;for(;r<t;){let o=n.charCodeAt(r),l,a=o<55296||o>56319||r+1===t||(l=n.charCodeAt(r+1))<56320||l>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function cr(n,e,t,r,o){let l;const a=e.length;for(let u=0;u<a-1;u++){const d=e[u];n.j[d]?l=n.j[d]:(l=new jt(r),l.jr=o.slice(),n.j[d]=l),n=l}return l=new jt(t),l.jr=o.slice(),n.j[e[a-1]]=l,l}function pg(n){const e=[],t=[];let r=0,o="0123456789";for(;r<n.length;){let l=0;for(;o.indexOf(n[r+l])>=0;)l++;if(l>0){e.push(t.join(""));for(let a=parseInt(n.substring(r,r+l),10);a>0;a--)t.pop();r+=l}else t.push(n[r]),r++}return e}const Bo={defaultProtocol:"http",events:null,format:hg,formatHref:hg,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Uc(n,e=null){let t=Object.assign({},Bo);n&&(t=Object.assign(t,n instanceof Uc?n.o:n));const r=t.ignoreTags,o=[];for(let l=0;l<r.length;l++)o.push(r[l].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=o}Uc.prototype={o:Bo,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let o=this.o[n];return o&&(typeof o=="object"?(o=t.t in o?o[t.t]:Bo[n],typeof o=="function"&&r&&(o=o(e,t))):typeof o=="function"&&r&&(o=o(e,t.t,t)),o)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function hg(n){return n}function mg(n,e){this.t="token",this.v=n,this.tk=e}mg.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Bo.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),o=n.get("tagName",t,e),l=this.toFormattedString(n),a={},u=n.get("className",t,e),d=n.get("target",t,e),f=n.get("rel",t,e),h=n.getObj("attributes",t,e),m=n.getObj("events",t,e);return a.href=r,u&&(a.class=u),d&&(a.target=d),f&&(a.rel=f),h&&Object.assign(a,h),{tagName:o,attributes:a,content:l,eventListeners:m}}};function Gl(n,e){class t extends mg{constructor(o,l){super(o,l),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const gg=Gl("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),yg=Gl("text"),sb=Gl("nl"),Kl=Gl("url",{isLink:!0,toHref(n=Bo.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Oo&&n[1].t===ur}}),rn=n=>new jt(n);function lb({groups:n}){const e=n.domain.concat([Rl,Ll,ar,Dl,Pl,_l,Fl,zl,nn,Mc,Po,Bl,jl,Ul,In,Hl,Fo,Wl]),t=[Ol,ur,Lc,En,Dc,Po,_o,Pc,_c,Sl,xl,Lo,Do,vl,yl,wl,kl,Cl,bl,El,Il,Tl,Al,Nl,Ml],r=[Rl,Ol,Ll,Dl,Pl,_l,Fl,zl,nn,Lo,Do,Po,Bl,jl,Ul,_o,In,Hl,Fo,Wl],o=rn(),l=K(o,Fo);be(l,r,l),be(l,n.domain,l);const a=rn(),u=rn(),d=rn();be(o,n.domain,a),be(o,n.scheme,u),be(o,n.slashscheme,d),be(a,r,l),be(a,n.domain,a);const f=K(a,ar);K(l,ar,f),K(u,ar,f),K(d,ar,f);const h=K(l,En);be(h,r,l),be(h,n.domain,l);const m=rn();be(f,n.domain,m),be(m,n.domain,m);const y=K(m,En);be(y,n.domain,m);const w=rn(gg);be(y,n.tld,w),be(y,n.utld,w),K(f,Oo,w);const k=K(m,nn);K(k,nn,k),be(k,n.domain,m),be(w,n.domain,m),K(w,En,y),K(w,nn,k);const x=K(w,ur);be(x,n.numeric,gg);const b=K(a,nn),E=K(a,En);K(b,nn,b),be(b,n.domain,a),be(E,r,l),be(E,n.domain,a);const T=rn(Kl);be(E,n.tld,T),be(E,n.utld,T),be(T,n.domain,a),be(T,r,l),K(T,En,E),K(T,nn,b),K(T,ar,f);const M=K(T,ur),_=rn(Kl);be(M,n.numeric,_);const F=rn(Kl),z=rn();be(F,e,F),be(F,t,z),be(z,e,F),be(z,t,z),K(T,In,F),K(_,In,F);const Y=K(u,ur),j=K(d,ur),ve=K(j,In),pe=K(ve,In);be(u,n.domain,a),K(u,En,E),K(u,nn,b),be(d,n.domain,a),K(d,En,E),K(d,nn,b),be(Y,n.domain,F),K(Y,In,F),K(Y,_o,F),be(pe,n.domain,F),be(pe,e,F),K(pe,In,F);const Ie=[[Lo,Do],[yl,vl],[wl,kl],[Sl,xl],[Cl,bl],[El,Il],[Tl,Al],[Nl,Ml]];for(let ce=0;ce<Ie.length;ce++){const[fe,re]=Ie[ce],te=K(F,fe);K(z,fe,te),K(te,re,F);const se=rn(Kl);be(te,e,se);const Z=rn();be(te,t),be(se,e,se),be(se,t,Z),be(Z,e,se),be(Z,t,Z),K(se,re,F),K(Z,re,F)}return K(o,Oo,T),K(o,Oc,sb),{start:o,tokens:cg}}function ab(n,e,t){let r=t.length,o=0,l=[],a=[];for(;o<r;){let u=n,d=null,f=null,h=0,m=null,y=-1;for(;o<r&&!(d=u.go(t[o].t));)a.push(t[o++]);for(;o<r&&(f=d||u.go(t[o].t));)d=null,u=f,u.accepts()?(y=0,m=u):y>=0&&y++,o++,h++;if(y<0)o-=h,o<r&&(a.push(t[o]),o++);else{a.length>0&&(l.push(Wc(yg,e,a)),a=[]),o-=y,h-=y;const w=m.t,k=t.slice(o-h,o);l.push(Wc(w,e,k))}}return a.length>0&&l.push(Wc(yg,e,a)),l}function Wc(n,e,t){const r=t[0].s,o=t[t.length-1].e,l=e.slice(r,o);return new n(l,t)}const ub=typeof console<"u"&&console&&console.warn||(()=>{}),cb="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",je={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function db(){return jt.groups={},je.scanner=null,je.parser=null,je.tokenQueue=[],je.pluginQueue=[],je.customSchemes=[],je.initialized=!1,je}function vg(n,e=!1){if(je.initialized&&ub(`linkifyjs: already initialized - will not register custom scheme "${n}" ${cb}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);je.customSchemes.push([n,e])}function fb(){je.scanner=ib(je.customSchemes);for(let n=0;n<je.tokenQueue.length;n++)je.tokenQueue[n][1]({scanner:je.scanner});je.parser=lb(je.scanner.tokens);for(let n=0;n<je.pluginQueue.length;n++)je.pluginQueue[n][1]({scanner:je.scanner,parser:je.parser});return je.initialized=!0,je}function Hc(n){return je.initialized||fb(),ab(je.parser.start,n,fg(je.scanner.start,n))}Hc.scan=fg;function wg(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new Uc(t),o=Hc(n),l=[];for(let a=0;a<o.length;a++){const u=o[a];u.isLink&&(!e||u.t===e)&&r.check(u)&&l.push(u.toFormattedObject(r))}return l}var Vc="[\0- -\u2029]",pb=new RegExp(Vc),hb=new RegExp(`${Vc}$`),mb=new RegExp(Vc,"g");function gb(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function yb(n){return new at({key:new mt("autolink"),appendTransaction:(e,t,r)=>{const o=e.some(f=>f.docChanged)&&!t.doc.eq(r.doc),l=e.some(f=>f.getMeta("preventAutolink"));if(!o||l)return;const{tr:a}=r,u=Km(t.doc,[...e]);if(qm(u).forEach(({newRange:f})=>{const h=Wx(r.doc,f,w=>w.isTextblock);let m,y;if(h.length>1)m=h[0],y=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(h.length){const w=r.doc.textBetween(f.from,f.to," "," ");if(!hb.test(w))return;m=h[0],y=r.doc.textBetween(m.pos,f.to,void 0," ")}if(m&&y){const w=y.split(pb).filter(Boolean);if(w.length<=0)return!1;const k=w[w.length-1],x=m.pos+y.lastIndexOf(k);if(!k)return!1;const b=Hc(k).map(E=>E.toObject(n.defaultProtocol));if(!gb(b))return!1;b.filter(E=>E.isLink).map(E=>({...E,from:x+E.start+1,to:x+E.end+1})).filter(E=>r.schema.marks.code?!r.doc.rangeHasMark(E.from,E.to,r.schema.marks.code):!0).filter(E=>n.validate(E.value)).filter(E=>n.shouldAutoLink(E.value)).forEach(E=>{fc(E.from,E.to,r.doc).some(T=>T.mark.type===n.type)||a.addMark(E.from,E.to,n.type.create({href:E.href}))})}}),!!a.steps.length)return a}})}function vb(n){return new at({key:new mt("handleClickLink"),props:{handleClick:(e,t,r)=>{var o,l;if(r.button!==0||!e.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let h=r.target;const m=[];for(;h.nodeName!=="DIV";)m.push(h),h=h.parentNode;a=m.find(y=>y.nodeName==="A")}if(!a)return!1;const u=iC(e.state,n.type.name),d=(o=a==null?void 0:a.href)!=null?o:u.href,f=(l=a==null?void 0:a.target)!=null?l:u.target;return n.enableClickSelection&&n.editor.commands.extendMarkRange(n.type.name),a&&d?(window.open(d,f),!0):!1}}})}function wb(n){return new at({key:new mt("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{shouldAutoLink:o}=n,{state:l}=e,{selection:a}=l,{empty:u}=a;if(u)return!1;let d="";r.content.forEach(h=>{d+=h.textContent});const f=wg(d,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===d);return!d||!f||o!==void 0&&!o(f.href)?!1:n.editor.commands.setMark(n.type,{href:f.href})}}})}function Qr(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&t.push(o)}),!n||n.replace(mb,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var kg=Ci.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){vg(n);return}vg(n.scheme,n.optionalSlashes)})},onDestroy(){db()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Qr(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Qr(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Qr(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",it(this.options.HTMLAttributes,n),0]:["a",it(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t;const r=((t=n.attrs)==null?void 0:t.href)||"";return`[${e.renderChildren(n)}](${r})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Qr(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:r=>!!Qr(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Jr({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,o=wg(n).filter(l=>l.isLink&&this.options.isAllowedUri(l.value,{defaultValidate:a=>!!Qr(a,t),protocols:t,defaultProtocol:r}));o.length&&o.forEach(l=>{this.options.shouldAutoLink(l.value)&&e.push({text:l.value,data:{href:l.href},index:l.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(yb({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!Qr(o,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(vb({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(wb({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),kb=kg,Jl=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...r}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,r,t]},Sb=/^\s*>\s$/,xb=Qt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return Jl("blockquote",{...it(this.options.HTMLAttributes,n),children:Jl("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=[];return n.content.forEach(o=>{const a=e.renderChildren(o).split(`
`).map(u=>`> ${u}`).join(`
`);t.push(a)}),t.flatMap(o=>[o,"> "]).slice(0,-1).join(`
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ei({find:Sb,type:this.type})]}}),Cb=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,bb=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Eb=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Ib=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Tb=Ci.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return Jl("strong",{...it(this.options.HTMLAttributes,n),children:Jl("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[bi({find:Cb,type:this.type}),bi({find:Eb,type:this.type})]},addPasteRules(){return[Jr({find:bb,type:this.type}),Jr({find:Ib,type:this.type})]}}),Ab=/(^|[^`])`([^`]+)`(?!`)$/,Nb=/(^|[^`])`([^`]+)`(?!`)/g,Mb=Ci.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",it(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[bi({find:Ab,type:this.type})]},addPasteRules(){return[Jr({find:Nb,type:this.type})]}}),$c=4,Rb=/^```([a-z]+)?[\s\n]$/,Ob=/^~~~([a-z]+)?[\s\n]$/,Lb=Qt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:$c,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const l=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return l||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",it(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let r="";const o=((t=n.attrs)==null?void 0:t.language)||"";return n.content?r=[`\`\`\`${o}`,e.renderChildren(n.content),"```"].join(`
`):r=`\`\`\`${o}

\`\`\``,r},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:$c,{state:r}=n,{selection:o}=r,{$from:l,empty:a}=o;if(l.parent.type!==this.type)return!1;const u=" ".repeat(t);return a?n.commands.insertContent(u):n.commands.command(({tr:d})=>{const{from:f,to:h}=o,w=r.doc.textBetween(f,h,`
`,`
`).split(`
`).map(k=>u+k).join(`
`);return d.replaceWith(f,h,r.schema.text(w)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:$c,{state:r}=n,{selection:o}=r,{$from:l,empty:a}=o;return l.parent.type!==this.type?!1:a?n.commands.command(({tr:u})=>{var d;const{pos:f}=l,h=l.start(),m=l.end(),w=r.doc.textBetween(h,m,`
`,`
`).split(`
`);let k=0,x=0;const b=f-h;for(let z=0;z<w.length;z+=1){if(x+w[z].length>=b){k=z;break}x+=w[z].length+1}const T=((d=w[k].match(/^ */))==null?void 0:d[0])||"",M=Math.min(T.length,t);if(M===0)return!0;let _=h;for(let z=0;z<k;z+=1)_+=w[z].length+1;return u.delete(_,_+M),f-_<=M&&u.setSelection(Ce.create(u.doc,_)),!0}):n.commands.command(({tr:u})=>{const{from:d,to:f}=o,y=r.doc.textBetween(d,f,`
`,`
`).split(`
`).map(w=>{var k;const x=((k=w.match(/^ */))==null?void 0:k[0])||"",b=Math.min(x.length,t);return w.slice(b)}).join(`
`);return u.replaceWith(d,f,r.schema.text(y)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:o}=t;if(!o||r.parent.type!==this.type)return!1;const l=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!l||!a?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:o,empty:l}=t;if(!l||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const u=o.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:f})=>(f.setSelection(Ne.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[yc({find:Rb,type:this.type,getAttributes:n=>({language:n[1]})}),yc({find:Ob,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new at({key:new mt("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,l=o==null?void 0:o.mode;if(!t||!l)return!1;const{tr:a,schema:u}=n.state,d=u.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:l},d)),a.selection.$from.parent.type!==this.type&&a.setSelection(Ce.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),Db=Qt.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),Pb=Qt.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",it(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:(n,e)=>e.indent(`
`),parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:o,storedMarks:l}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:u}=r.extensionManager,d=l||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:h})=>{if(h&&d&&a){const m=d.filter(y=>u.includes(y.type.name));f.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_b=Qt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,it(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const r=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,o="#".repeat(r);return n.content?`${o} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>yc({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),Fb=Qt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",it(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!HC(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:r}=t,o=n();return eg(t)?o.insertContentAt(r.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({state:l,tr:a,dispatch:u})=>{if(u){const{$to:d}=a.selection,f=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?a.setSelection(Ce.create(a.doc,d.pos+1)):d.nodeAfter.isBlock?a.setSelection(he.create(a.doc,d.pos)):a.setSelection(Ce.create(a.doc,d.pos));else{const h=l.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,m=h==null?void 0:h.create();m&&(a.insert(f,m),a.setSelection(Ce.create(a.doc,f+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[WC({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),zb=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Bb=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,jb=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Ub=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Wb=Ci.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",it(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[bi({find:zb,type:this.type}),bi({find:jb,type:this.type})]},addPasteRules(){return[Jr({find:Bb,type:this.type}),Jr({find:Ub,type:this.type})]}}),Hb=Object.defineProperty,Vb=(n,e)=>{for(var t in e)Hb(n,t,{get:e[t],enumerable:!0})},$b="listItem",Sg="textStyle",xg=/^\s*([-+*])\s$/,Cg=Qt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",it(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($b,this.editor.getAttributes(Sg)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Ei({find:xg,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ei({find:xg,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Sg),editor:this.editor})),[n]}}),bg=Qt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",it(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(o=>o.type==="paragraph"))t=e.parseChildren(n.tokens);else{const o=n.tokens[0];if(o&&o.type==="text"&&o.tokens&&o.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(o.tokens)}],n.tokens.length>1){const a=n.tokens.slice(1),u=e.parseChildren(a);t.push(...u)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>Sc(n,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Gb={};Vb(Gb,{findListItemPos:()=>jo,getNextListDepth:()=>Gc,handleBackspace:()=>Kc,handleDelete:()=>Jc,hasListBefore:()=>Eg,hasListItemAfter:()=>Kb,hasListItemBefore:()=>Ig,listItemHasSubList:()=>Tg,nextListIsDeeper:()=>Ag,nextListIsHigher:()=>Ng});var jo=(n,e)=>{const{$from:t}=e.selection,r=ut(n,e.schema);let o=null,l=t.depth,a=t.pos,u=null;for(;l>0&&u===null;)o=t.node(l),o.type===r?u=l:(l-=1,a-=1);return u===null?null:{$pos:e.doc.resolve(a),depth:u}},Gc=(n,e)=>{const t=jo(n,e);if(!t)return!1;const[,r]=lC(e,n,t.$pos.pos+4);return r},Eg=(n,e,t)=>{const{$anchor:r}=n.selection,o=Math.max(0,r.pos-2),l=n.doc.resolve(o).node();return!(!l||!t.includes(l.type.name))},Ig=(n,e)=>{var t;const{$anchor:r}=e.selection,o=e.doc.resolve(r.pos-2);return!(o.index()===0||((t=o.nodeBefore)==null?void 0:t.type.name)!==n)},Tg=(n,e,t)=>{if(!t)return!1;const r=ut(n,e.schema);let o=!1;return t.descendants(l=>{l.type===r&&(o=!0)}),o},Kc=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!xi(n.state,e)&&Eg(n.state,e,t)){const{$anchor:u}=n.state.selection,d=n.state.doc.resolve(u.before()-1),f=[];d.node().descendants((y,w)=>{y.type.name===e&&f.push({node:y,pos:w})});const h=f.at(-1);if(!h)return!1;const m=n.state.doc.resolve(d.start()+h.pos+1);return n.chain().cut({from:u.start()-1,to:u.end()+1},m.end()).joinForward().run()}if(!xi(n.state,e)||!cC(n.state))return!1;const r=jo(e,n.state);if(!r)return!1;const l=n.state.doc.resolve(r.$pos.pos-2).node(r.depth),a=Tg(e,n.state,l);return Ig(e,n.state)&&!a?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},Ag=(n,e)=>{const t=Gc(n,e),r=jo(n,e);return!r||!t?!1:t>r.depth},Ng=(n,e)=>{const t=Gc(n,e),r=jo(n,e);return!r||!t?!1:t<r.depth},Jc=(n,e)=>{if(!xi(n.state,e)||!uC(n.state,e))return!1;const{selection:t}=n.state,{$from:r,$to:o}=t;return!t.empty&&r.sameParent(o)?!1:Ag(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():Ng(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},Kb=(n,e)=>{var t;const{$anchor:r}=e.selection,o=e.doc.resolve(r.pos-r.parentOffset-2);return!(o.index()===o.parent.childCount-1||((t=o.nodeAfter)==null?void 0:t.type.name)!==n)},Mg=ot.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&Jc(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&Jc(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&Kc(n,t,r)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&Kc(n,t,r)&&(e=!0)}),e}}}}),Rg=/^(\s*)(\d+)\.\s+(.*)$/,Jb=/^\s/;function Yb(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t],l=o.match(Rg);if(!l)break;const[,a,u,d]=l,f=a.length;let h=d,m=t+1;const y=[o];for(;m<n.length;){const w=n[m];if(w.match(Rg))break;if(w.trim()==="")y.push(w),h+=`
`,m+=1;else if(w.match(Jb))y.push(w),h+=`
${w.slice(f+2)}`,m+=1;else break}e.push({indent:f,number:parseInt(u,10),content:h.trim(),raw:y.join(`
`)}),r=m,t=m}return[e,r]}function Og(n,e,t){var r;const o=[];let l=0;for(;l<n.length;){const a=n[l];if(a.indent===e){const u=a.content.split(`
`),d=((r=u[0])==null?void 0:r.trim())||"",f=[];d&&f.push({type:"paragraph",raw:d,tokens:t.inlineTokens(d)});const h=u.slice(1).join(`
`).trim();if(h){const w=t.blockTokens(h);f.push(...w)}let m=l+1;const y=[];for(;m<n.length&&n[m].indent>e;)y.push(n[m]),m+=1;if(y.length>0){const w=Math.min(...y.map(x=>x.indent)),k=Og(y,w,t);f.push({type:"list",ordered:!0,start:y[0].number,items:k,raw:y.map(x=>x.raw).join(`
`)})}o.push({type:"list_item",raw:a.raw,tokens:f}),l=m}else l+=1}return o}function Qb(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const r=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(o=>{if(o.type==="paragraph"||o.type==="list"||o.type==="blockquote"||o.type==="code")r.push(...e.parseChildren([o]));else if(o.type==="text"&&o.tokens){const l=e.parseChildren([o]);r.push({type:"paragraph",content:l})}else{const l=e.parseChildren([o]);l.length>0&&r.push(...l)}}),{type:"listItem",content:r}})}var Zb="listItem",Lg="textStyle",Dg=/^(\d+)\.\s$/,Pg=Qt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",it(this.options.HTMLAttributes,t),0]:["ol",it(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,r=n.items?Qb(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:r}:{type:"orderedList",content:r}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e==null?void 0:e.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var r;const o=n.split(`
`),[l,a]=Yb(o);if(l.length===0)return;const u=Og(l,0,t);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=l[0])==null?void 0:r.number)||1,items:u,raw:o.slice(0,a).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Zb,this.editor.getAttributes(Lg)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Ei({find:Dg,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ei({find:Dg,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Lg)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),qb=/^\s*(\[([( |x])?\])\s$/,Xb=Qt.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",it(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const r=e.parseChildren(n.nestedTokens);t.push(...r)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const o=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return Sc(n,e,o)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const o=document.createElement("li"),l=document.createElement("label"),a=document.createElement("span"),u=document.createElement("input"),d=document.createElement("div"),f=h=>{var m,y;u.ariaLabel=((y=(m=this.options.a11y)==null?void 0:m.checkboxLabel)==null?void 0:y.call(m,h,u.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return f(n),l.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",h=>h.preventDefault()),u.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:m}=h.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:y})=>{const w=t();if(typeof w!="number")return!1;const k=y.doc.nodeAt(w);return y.setNodeMarkup(w,void 0,{...k==null?void 0:k.attrs,checked:m}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,m)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,m])=>{o.setAttribute(h,m)}),o.dataset.checked=n.attrs.checked,u.checked=n.attrs.checked,l.append(u,a),o.append(l,d),Object.entries(e).forEach(([h,m])=>{o.setAttribute(h,m)}),{dom:o,contentDOM:d,update:h=>h.type!==this.type?!1:(o.dataset.checked=h.attrs.checked,u.checked=h.attrs.checked,f(h),!0)}}},addInputRules(){return[Ei({find:qb,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),eE=Qt.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",it(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const r=l=>{const a=kc(l,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,d)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:t.inlineTokens(u.mainContent),nestedTokens:d}),customNestedParser:r},t);return a?[{type:"taskList",raw:a.raw,items:a.items}]:t.blockTokens(l)},o=kc(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,a)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:t.inlineTokens(l.mainContent),nestedTokens:a}),customNestedParser:r},t);if(o)return{type:"taskList",raw:o.raw,items:o.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ot.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(Cg.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(bg.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(Mg.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(Pg.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(Xb.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(eE.configure(this.options.taskList)),n}});var tE=Qt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",it(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];return t.length===1&&t[0].type==="image"?e.parseChildren([t[0]]):e.createNode("paragraph",void 0,e.parseInline(t))},renderMarkdown:(n,e)=>!n||!Array.isArray(n.content)?"":e.renderChildren(n.content),addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),nE=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,rE=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,iE=Ci.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",it(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[bi({find:nE,type:this.type})]},addPasteRules(){return[Jr({find:rE,type:this.type})]}}),oE=Qt.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),sE=Ci.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",it(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const o=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!o)return;const l=o[2].trim();return{type:"underline",raw:o[0],text:l,tokens:t.inlineTokens(l)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function lE(n={}){return new at({view(e){return new aE(e,n)}})}class aE{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let l=a=>{this[o](a)};return e.dom.addEventListener(o,l),{name:o,handler:l}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,o=this.editorView.dom,l=o.getBoundingClientRect(),a=l.width/o.offsetWidth,u=l.height/o.offsetHeight;if(t){let m=e.nodeBefore,y=e.nodeAfter;if(m||y){let w=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(w){let k=w.getBoundingClientRect(),x=m?k.bottom:k.top;m&&y&&(x=(x+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*u;r={left:k.left,right:k.right,top:x-b,bottom:x+b}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),y=this.width/2*a;r={left:m.left-y,right:m.left+y,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let f,h;if(!d||d==document.body&&getComputedStyle(d).position=="static")f=-pageXOffset,h=-pageYOffset;else{let m=d.getBoundingClientRect(),y=m.width/d.offsetWidth,w=m.height/d.offsetHeight;f=m.left-d.scrollLeft*y,h=m.top-d.scrollTop*w}this.element.style.left=(r.left-f)/a+"px",this.element.style.top=(r.top-h)/u+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=r&&r.type.spec.disableDropCursor,l=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!l){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=Mh(this.editorView.state.doc,a,this.editorView.dragging.slice);u!=null&&(a=u)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Ze extends Ne{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ze.valid(r)?new Ze(r):Ne.near(r)}content(){return q.empty}eq(e){return e instanceof Ze&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ze(e.resolve(t.pos))}getBookmark(){return new Yc(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!uE(e)||!cE(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ze.valid(e))return e;let o=e.pos,l=null;for(let a=e.depth;;a--){let u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){l=u.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;o+=t;let d=e.doc.resolve(o);if(Ze.valid(d))return d}for(;;){let a=t>0?l.firstChild:l.lastChild;if(!a){if(l.isAtom&&!l.isText&&!he.isSelectable(l)){e=e.doc.resolve(o+l.nodeSize*t),r=!1;continue e}break}l=a,o+=t;let u=e.doc.resolve(o);if(Ze.valid(u))return u}return null}}}Ze.prototype.visible=!1,Ze.findFrom=Ze.findGapCursorFrom,Ne.jsonID("gapcursor",Ze);class Yc{constructor(e){this.pos=e}map(e){return new Yc(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ze.valid(t)?new Ze(t):Ne.near(t)}}function _g(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function uE(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||_g(o.type))return!0;if(o.inlineContent)return!1}}return!0}function cE(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||_g(o.type))return!0;if(o.inlineContent)return!1}}return!0}function dE(){return new at({props:{decorations:mE,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ze.valid(t)?new Ze(t):null},handleClick:pE,handleKeyDown:fE,handleDOMEvents:{beforeinput:hE}}})}const fE=$S({ArrowLeft:Yl("horiz",-1),ArrowRight:Yl("horiz",1),ArrowUp:Yl("vert",-1),ArrowDown:Yl("vert",1)});function Yl(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,l){let a=r.selection,u=e>0?a.$to:a.$from,d=a.empty;if(a instanceof Ce){if(!l.endOfTextblock(t)||u.depth==0)return!1;d=!1,u=r.doc.resolve(e>0?u.after():u.before())}let f=Ze.findGapCursorFrom(u,e,d);return f?(o&&o(r.tr.setSelection(new Ze(f))),!0):!1}}function pE(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Ze.valid(r))return!1;let o=n.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&he.isSelectable(n.state.doc.nodeAt(o.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ze(r))),!0)}function hE(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ze))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let o=$.empty;for(let a=r.length-1;a>=0;a--)o=$.from(r[a].createAndFill(null,o));let l=n.state.tr.replace(t.pos,t.pos,new q(o,0,0));return l.setSelection(Ce.near(l.doc.resolve(t.pos+1))),n.dispatch(l),!1}function mE(n){if(!(n.selection instanceof Ze))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ye.create(n.doc,[Yt.widget(n.selection.head,e,{key:"gapcursor"})])}var Ql=200,gt=function(){};gt.prototype.append=function(e){return e.length?(e=gt.from(e),!this.length&&e||e.length<Ql&&this.leafAppend(e)||this.length<Ql&&e.leafPrepend(this)||this.appendInner(e)):this},gt.prototype.prepend=function(e){return e.length?gt.from(e).append(this):this},gt.prototype.appendInner=function(e){return new gE(this,e)},gt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?gt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},gt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},gt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)},gt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(l,a){return o.push(e(l,a))},t,r),o},gt.from=function(e){return e instanceof gt?e:e&&e.length?new Fg(e):gt.empty};var Fg=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,l){return o==0&&l==this.length?this:new e(this.values.slice(o,l))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,l,a,u){for(var d=l;d<a;d++)if(o(this.values[d],u+d)===!1)return!1},e.prototype.forEachInvertedInner=function(o,l,a,u){for(var d=l-1;d>=a;d--)if(o(this.values[d],u+d)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Ql)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Ql)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(gt);gt.empty=new Fg([]);var gE=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,l,a){var u=this.left.length;if(o<u&&this.left.forEachInner(r,o,Math.min(l,u),a)===!1||l>u&&this.right.forEachInner(r,Math.max(o-u,0),Math.min(this.length,l)-u,a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,l,a){var u=this.left.length;if(o>u&&this.right.forEachInvertedInner(r,o-u,Math.max(l,u)-u,a+u)===!1||l<u&&this.left.forEachInvertedInner(r,Math.min(o,u),l,a)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var l=this.left.length;return o<=l?this.left.slice(r,o):r>=l?this.right.slice(r-l,o-l):this.left.slice(r,l).append(this.right.slice(0,o-l))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(gt);const yE=500;class pn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,l;t&&(o=this.remapping(r,this.items.length),l=o.maps.length);let a=e.tr,u,d,f=[],h=[];return this.items.forEach((m,y)=>{if(!m.step){o||(o=this.remapping(r,y+1),l=o.maps.length),l--,h.push(m);return}if(o){h.push(new Tn(m.map));let w=m.step.map(o.slice(l)),k;w&&a.maybeStep(w).doc&&(k=a.mapping.maps[a.mapping.maps.length-1],f.push(new Tn(k,void 0,void 0,f.length+h.length))),l--,k&&o.appendMap(k,l)}else a.maybeStep(m.step);if(m.selection)return u=o?m.selection.map(o.slice(l)):m.selection,d=new pn(this.items.slice(0,r).append(h.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:a,selection:u}}addTransform(e,t,r,o){let l=[],a=this.eventCount,u=this.items,d=!o&&u.length?u.get(u.length-1):null;for(let h=0;h<e.steps.length;h++){let m=e.steps[h].invert(e.docs[h]),y=new Tn(e.mapping.maps[h],m,t),w;(w=d&&d.merge(y))&&(y=w,h?l.pop():u=u.slice(0,u.length-1)),l.push(y),t&&(a++,t=void 0),o||(d=y)}let f=a-r.depth;return f>wE&&(u=vE(u,f),a-=f),new pn(u.append(l),a)}remapping(e,t){let r=new ko;return this.items.forEach((o,l)=>{let a=o.mirrorOffset!=null&&l-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new pn(this.items.append(e.map(t=>new Tn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-t),l=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(y=>{y.selection&&u--},o);let d=t;this.items.forEach(y=>{let w=l.getMirror(--d);if(w==null)return;a=Math.min(a,w);let k=l.maps[w];if(y.step){let x=e.steps[w].invert(e.docs[w]),b=y.selection&&y.selection.map(l.slice(d+1,w));b&&u++,r.push(new Tn(k,x,b))}else r.push(new Tn(k))},o);let f=[];for(let y=t;y<a;y++)f.push(new Tn(l.maps[y]));let h=this.items.slice(0,o).append(f).append(r),m=new pn(h,u);return m.emptyItemCount()>yE&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,o=[],l=0;return this.items.forEach((a,u)=>{if(u>=e)o.push(a),a.selection&&l++;else if(a.step){let d=a.step.map(t.slice(r)),f=d&&d.getMap();if(r--,f&&t.appendMap(f,r),d){let h=a.selection&&a.selection.map(t.slice(r));h&&l++;let m=new Tn(f.invert(),d,h),y,w=o.length-1;(y=o.length&&o[w].merge(m))?o[w]=y:o.push(m)}}else a.map&&r--},this.items.length,0),new pn(gt.from(o.reverse()),l)}}pn.empty=new pn(gt.empty,0);function vE(n,e){let t;return n.forEach((r,o)=>{if(r.selection&&e--==0)return t=o,!1}),n.slice(t)}class Tn{constructor(e,t,r,o){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Tn(t.getMap().invert(),t,this.selection)}}}class dr{constructor(e,t,r,o,l){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=o,this.prevComposition=l}}const wE=20;function kE(n,e,t,r){let o=t.getMeta(Zr),l;if(o)return o.historyState;t.getMeta(CE)&&(n=new dr(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(Zr))return a.getMeta(Zr).redo?new dr(n.done.addTransform(t,void 0,r,Zl(e)),n.undone,zg(t.mapping.maps),n.prevTime,n.prevComposition):new dr(n.done,n.undone.addTransform(t,void 0,r,Zl(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),d=n.prevTime==0||!a&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!SE(t,n.prevRanges)),f=a?Qc(n.prevRanges,t.mapping):zg(t.mapping.maps);return new dr(n.done.addTransform(t,d?e.selection.getBookmark():void 0,r,Zl(e)),pn.empty,f,t.time,u??n.prevComposition)}else return(l=t.getMeta("rebased"))?new dr(n.done.rebased(t,l),n.undone.rebased(t,l),Qc(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new dr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Qc(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function SE(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,o)=>{for(let l=0;l<e.length;l+=2)r<=e[l+1]&&o>=e[l]&&(t=!0)}),t}function zg(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,o,l,a)=>e.push(l,a));return e}function Qc(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let o=e.map(n[r],1),l=e.map(n[r+1],-1);o<=l&&t.push(o,l)}return t}function xE(n,e,t){let r=Zl(e),o=Zr.get(e).spec.config,l=(t?n.undone:n.done).popEvent(e,r);if(!l)return null;let a=l.selection.resolve(l.transform.doc),u=(t?n.done:n.undone).addTransform(l.transform,e.selection.getBookmark(),o,r),d=new dr(t?u:l.remaining,t?l.remaining:u,null,0,-1);return l.transform.setSelection(a).setMeta(Zr,{redo:t,historyState:d})}let Zc=!1,Bg=null;function Zl(n){let e=n.plugins;if(Bg!=e){Zc=!1,Bg=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Zc=!0;break}}return Zc}const Zr=new mt("history"),CE=new mt("closeHistory");function bE(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new at({key:Zr,state:{init(){return new dr(pn.empty,pn.empty,null,0,-1)},apply(e,t,r){return kE(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,o=r=="historyUndo"?Ug:r=="historyRedo"?Wg:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function jg(n,e){return(t,r)=>{let o=Zr.getState(t);if(!o||(n?o.undone:o.done).eventCount==0)return!1;if(r){let l=xE(o,t,n);l&&r(e?l.scrollIntoView():l)}return!0}}const Ug=jg(!1,!0),Wg=jg(!0,!0);ot.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc;if(((n==null?void 0:n.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new at({key:new mt("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;const o=this.options.limit;if(o==null||o===0){n=!0;return}const l=this.storage.characters({node:r.doc});if(l>o){const a=l-o,u=0,d=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${o} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(u,d);return n=!0,f}n=!0},filterTransaction:(e,t)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const o=this.storage.characters({node:t.doc}),l=this.storage.characters({node:e.doc});if(l<=r||o>r&&l>r&&l<=o)return!0;if(o>r&&l>r&&l>o||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,d=l-r,f=u-d,h=u;return e.deleteRange(f,h),!(this.storage.characters({node:e.doc})>r)}})]}});var EE=ot.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[lE(this.options)]}});ot.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new at({key:new mt("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:r}=this.editor,{anchor:o}=e,l=[];if(!t||!r)return Ye.create(n,[]);let a=0;this.options.mode==="deepest"&&n.descendants((d,f)=>{if(d.isText)return;if(!(o>=f&&o<=f+d.nodeSize-1))return!1;a+=1});let u=0;return n.descendants((d,f)=>{if(d.isText||!(o>=f&&o<=f+d.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&a-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";l.push(Yt.node(f,f+d.nodeSize,{class:this.options.className}))}),Ye.create(n,l)}}})]}});var IE=ot.create({name:"gapCursor",addProseMirrorPlugins(){return[dE()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Fe(Me(n,"allowGapCursor",t)))!=null?e:null}}});ot.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new at({key:new mt("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,o=[];if(!t)return null;const l=this.editor.isEmpty;return n.descendants((a,u)=>{const d=r>=u&&r<=u+a.nodeSize,f=!a.isLeaf&&pc(a);if((d||!this.options.showOnlyCurrent)&&f){const h=[this.options.emptyNodeClass];l&&h.push(this.options.emptyEditorClass);const m=Yt.node(u,u+a.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:u,hasAnchor:d}):this.options.placeholder});o.push(m)}return this.options.includeChildren}),Ye.create(n,o)}}})]}}),ot.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new at({key:new mt("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||eg(t.selection)||n.view.dragging?null:Ye.create(t.doc,[Yt.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function Hg({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||(e==null?void 0:e.type)===n}var TE=ot.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new mt(this.name),t=((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,o])=>o).filter(o=>(this.options.notAfter||[]).concat(t).includes(o.name));return[new at({key:e,appendTransaction:(o,l,a)=>{const{doc:u,tr:d,schema:f}=a,h=e.getState(a),m=u.content.size,y=f.nodes[t];if(h)return d.insert(m,y.create())},state:{init:(o,l)=>{const a=l.tr.doc.lastChild;return!Hg({node:a,types:r})},apply:(o,l)=>{if(!o.docChanged)return l;const a=o.doc.lastChild;return!Hg({node:a,types:r})}}})]}}),AE=ot.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Ug(n,e),redo:()=>({state:n,dispatch:e})=>Wg(n,e)}},addProseMirrorPlugins(){return[bE(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),NE=ot.create({name:"starterKit",addExtensions(){var n,e,t,r;const o=[];return this.options.bold!==!1&&o.push(Tb.configure(this.options.bold)),this.options.blockquote!==!1&&o.push(xb.configure(this.options.blockquote)),this.options.bulletList!==!1&&o.push(Cg.configure(this.options.bulletList)),this.options.code!==!1&&o.push(Mb.configure(this.options.code)),this.options.codeBlock!==!1&&o.push(Lb.configure(this.options.codeBlock)),this.options.document!==!1&&o.push(Db.configure(this.options.document)),this.options.dropcursor!==!1&&o.push(EE.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&o.push(IE.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&o.push(Pb.configure(this.options.hardBreak)),this.options.heading!==!1&&o.push(_b.configure(this.options.heading)),this.options.undoRedo!==!1&&o.push(AE.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&o.push(Fb.configure(this.options.horizontalRule)),this.options.italic!==!1&&o.push(Wb.configure(this.options.italic)),this.options.listItem!==!1&&o.push(bg.configure(this.options.listItem)),this.options.listKeymap!==!1&&o.push(Mg.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&o.push(kg.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&o.push(Pg.configure(this.options.orderedList)),this.options.paragraph!==!1&&o.push(tE.configure(this.options.paragraph)),this.options.strike!==!1&&o.push(iE.configure(this.options.strike)),this.options.text!==!1&&o.push(oE.configure(this.options.text)),this.options.underline!==!1&&o.push(sE.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&o.push(TE.configure((r=this.options)==null?void 0:r.trailingNode)),o}}),ME=NE;const qc=n=>{if(!n)return"";try{const e=JSON.parse(n);return eC(e,[ME.configure({heading:!1,orderedList:!1,blockquote:!1,codeBlock:!1,code:!1,horizontalRule:!1}),kb.configure({openOnClick:!1,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 underline hover:text-blue-800"}})])}catch{return n}};function RE({content:n,position:e,currentStep:t,totalSteps:r,onNext:o,onPrevious:l,onFinish:a,onClose:u}){const d={title:n.title||"",body:n.body||"",direction:n.position||"right"},f=xe.useMemo(()=>qc(d.body)||"",[d.body]);return V.jsx("div",{className:"ux-canvas-navigation fixed pointer-events-auto",style:{top:`${e.y}px`,left:`${e.x}px`,zIndex:1e4},children:V.jsxs("div",{className:"relative bg-white border border-gray-300 rounded-lg shadow-lg p-4 w-[320px] min-h-[180px]",children:[V.jsx("div",{className:"font-semibold text-sm text-gray-800 mb-2 break-words",children:d.title||""}),V.jsx("div",{className:"text-sm text-gray-600 leading-relaxed pb-12 break-words",dangerouslySetInnerHTML:{__html:f}}),V.jsx(N1,{content:d}),V.jsx(O1,{currentStep:t,totalSteps:r,onNext:o,onPrevious:l,onFinish:a,onClose:u})]})})}function OE({content:n,onConfirm:e,onCancel:t}){const r=xe.useMemo(()=>qc(n.message)||"",[n.message]);return V.jsx("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center pointer-events-auto",style:{zIndex:1e4},children:V.jsxs("div",{className:"bg-[#fff] w-[320px] h-[180px] rounded shadow-xl p-4 flex flex-col",children:[V.jsxs("div",{className:"flex-1",children:[V.jsx("h3",{className:"font-bold pb-2",children:n.title}),V.jsx("div",{dangerouslySetInnerHTML:{__html:r}})]}),V.jsxs("div",{className:"flex gap-3 justify-end",children:[V.jsx("button",{onClick:t,className:"px-4 py-2 text-sm border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:""}),V.jsx("button",{onClick:e,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:""})]})]})})}const LE=({guide:n})=>{const{navigations:e}=n,{currentStep:t,currentElement:r,getCurrentStepContent:o,showCurrentStep:l,goToNextStep:a,goToPreviousStep:u,resetSteps:d}=P1(e),{isVisible:f,hideNavigation:h}=_1(e,d),m=o(),y=L1((m==null?void 0:m.type)==="BALLOON"?r:null,f,o);xe.useEffect(()=>{f&&e&&l()},[f,e,t,l]);const w=xe.useCallback(()=>{h()},[h]);if(!e||!f||!m)return null;const k=t===e.length-1;switch(m.type){case"CONFIRMATION_DIALOG":return V.jsx(OE,{content:m.content,onConfirm:k?w:a,onCancel:h});case"BALLOON":return r?V.jsx(RE,{content:m.content,element:r,position:y,currentStep:t,totalSteps:e.length,onNext:a,onPrevious:u,onFinish:w,onClose:h}):null;default:return null}};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PE=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Vg=n=>{const e=PE(n);return e.charAt(0).toUpperCase()+e.slice(1)},$g=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),_E=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=xe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:a,...u},d)=>xe.createElement("svg",{ref:d,...FE,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:$g("lucide",o),...!l&&!_E(u)&&{"aria-hidden":"true"},...u},[...a.map(([f,h])=>xe.createElement(f,h)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=(n,e)=>{const t=xe.forwardRef(({className:r,...o},l)=>xe.createElement(zE,{ref:l,iconNode:e,className:$g(`lucide-${DE(Vg(n))}`,`lucide-${n}`,r),...o}));return t.displayName=Vg(n),t};/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=BE("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var Ti={PLASMO_PUBLIC_MODE:"production",PLASMO_PUBLIC_VIEWER_API_URL_LOCAL:"http://localhost:8080"};const Xc=(()=>{switch(Ti.PLASMO_PUBLIC_MODE){case"dev1":return Ti.PLASMO_PUBLIC_VIEWER_API_URL_DEV1;case"demo1":return Ti.PLASMO_PUBLIC_VIEWER_API_URL_DEMO1;case"stg":return Ti.PLASMO_PUBLIC_VIEWER_API_URL_STG;case"prd":return Ti.PLASMO_PUBLIC_VIEWER_API_URL_PRD;default:return Ti.PLASMO_PUBLIC_VIEWER_API_URL_LOCAL}})();async function UE(n){const{path:e,method:t,data:r}=n;try{let o=`${Xc}${e}`;if(console.log("[DEBUG] HTTP",{method:t,path:e,url:o}),t==="GET"&&r){const d=new URLSearchParams(r);o+=`?${d.toString()}`}const l=["GET","HEAD"].some(d=>d===t)?void 0:JSON.stringify({data:r}),a=await fetch(o,{method:t,headers:{"Content-Type":"application/json"},body:l});if(console.log("[DEBUG] HTTP",{status:a.status,statusText:a.statusText,ok:a.ok}),!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const u=a.status===204?{data:void 0}:await a.json();return console.log("[DEBUG] ",u),{success:!0,data:(u==null?void 0:u.data)??u}}catch(o){return{success:!1,error:o instanceof Error?o.message:"API"}}}async function Gg(n){return console.log("[DEBUG] ",""),console.log("[DEBUG] API"),UE(n)}const WE=()=>{const n=navigator.userAgent,e=()=>n.includes("Edg/")?"Edge":n.includes("Chrome")?"Chrome":n.includes("Safari")&&!n.includes("Chrome")?"Safari":"Other";return{osInfo:n.includes("Windows")?"Windows":n.includes("Mac OS X")?"macOS":/iPhone|iPad|iPod/.test(n)?"iOS":n.includes("Android")?"Android":n.includes("Linux")?"Linux":"Other",browserInfo:e()}},bt=[];for(let n=0;n<256;++n)bt.push((n+256).toString(16).slice(1));function HE(n,e=0){return(bt[n[e+0]]+bt[n[e+1]]+bt[n[e+2]]+bt[n[e+3]]+"-"+bt[n[e+4]]+bt[n[e+5]]+"-"+bt[n[e+6]]+bt[n[e+7]]+"-"+bt[n[e+8]]+bt[n[e+9]]+"-"+bt[n[e+10]]+bt[n[e+11]]+bt[n[e+12]]+bt[n[e+13]]+bt[n[e+14]]+bt[n[e+15]]).toLowerCase()}let ed;const VE=new Uint8Array(16);function $E(){if(!ed){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ed=crypto.getRandomValues.bind(crypto)}return ed(VE)}const Kg={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function GE(n,e,t){var o;if(Kg.randomUUID&&!n)return Kg.randomUUID();n=n||{};const r=n.random??((o=n.rng)==null?void 0:o.call(n))??$E();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,HE(r)}const Ai={async get(){console.log("[DEBUG] sessionStore.get","");{if(typeof localStorage>"u")return null;const n=localStorage.getItem("sessionId");return console.log("[DEBUG] sessionId ()",n),n}},async set(n){{if(typeof localStorage>"u")return;localStorage.setItem("sessionId",n)}},async ensure(){let n=await Ai.get();return n||(n=GE(),await Ai.set(n)),n}};async function KE(n){console.log("[DEBUG] npsSurveyAnswer ",n);const e=await Ai.get();if(console.log("[DEBUG] sessionId",e?" ":" "),!e)throw new Error("sessionId");const{osInfo:t,browserInfo:r}=WE();return console.log("[DEBUG] apiGateway"),Gg({path:"/user/satisfaction-surveys/answer",method:"POST",data:{sessionId:e,answer:{questionId:n.surveyId,score:n.score,textResponse:n.freeText||"",osInfo:t,browserInfo:r}}})}async function JE(n){const e=await Ai.get();if(!e)throw new Error("sessionId");return Gg({path:`/user/surveys/${n}/view`,method:"POST",data:{sessionId:e}})}function YE({guide:n}){var b;const[e,t]=xe.useState(!1),[r,o]=xe.useState(null),[l,a]=xe.useState(""),[u,d]=xe.useState(!1),[f,h]=xe.useState(!1);if(xe.useEffect(()=>{var E,T,M,_;if(((T=(E=n.survey)==null?void 0:E.userStatus)==null?void 0:T.status)!=="COMPLETED")if((M=n.survey)!=null&&M.publishStartAt&&((_=n.survey)!=null&&_.publishEndAt)){const F=new Date,z=new Date(n.survey.publishStartAt),Y=new Date(n.survey.publishEndAt);F>=z&&F<=Y&&t(!0)}else t(n.isPublished)},[n]),xe.useEffect(()=>{(async()=>{var T;if(e&&!f&&((T=n.survey)!=null&&T.id))try{await JE(n.survey.id)&&h(!0)}catch{}})()},[e,f,(b=n.survey)==null?void 0:b.id]),!e||!n.survey)return null;const{survey:m}=n,y=m.content||{question:""},w=m.satisfactionQuestion||{allowFreeTextInput:!1,freeTextInputHint:""},k=w.allowFreeTextInput===!0,x=async()=>{if(r!==null)try{const E={surveyId:n.survey.id,score:r,freeText:k?l:void 0};console.log("[DEBUG] ",E);const T=await KE(E);console.log("[DEBUG] ",T),T.success&&(d(!0),setTimeout(()=>{t(!1),d(!1),o(null),a("")},3e3))}catch{}};return V.jsxs("div",{className:"fixed bottom-0 left-0 right-0 min-h-[160px] z-[10000] bg-black/70 shadow-2xl",children:[V.jsx("button",{onClick:()=>{t(!1),d(!1),o(null),a("")},className:"absolute right-6 top-6 text-[#F2F2F2] hover:text-gray-300 transition-colors z-[10001]","aria-label":"",children:V.jsx(jE,{size:24})}),V.jsx("div",{className:"max-w-[1040px] mx-auto",children:u?V.jsxs("div",{className:"h-[160px] flex flex-col items-center justify-center",children:[V.jsx("p",{className:"text-base font-medium text-white",children:m.thankYouMessage||""}),V.jsx("button",{onClick:()=>{t(!1),d(!1),o(null),a("")},className:"mt-4 px-6 py-2 bg-[#F2F2F2] text-[#4D463A] font-bold rounded",children:""})]}):V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"text-white text-center pt-6 pb-4",children:V.jsx("p",{className:"text-sm font-medium",children:y.question})}),k&&V.jsxs("div",{className:"flex items-start",children:[V.jsxs("div",{className:"flex-1",children:[V.jsx("div",{className:"flex gap-1 justify-between",children:[...Array(11)].map((E,T)=>V.jsx("button",{onClick:()=>o(T),className:`
                          w-10 h-10 border rounded text-base font-medium transition-all
                          ${r===T?"bg-[#F2F2F2] text-[#4D463A]":"text-[#F2F2F2] hover:bg-[#F2F2F2] hover:text-[#4D463A] border-[#F2F2F2]"}
                        `,children:T},T))}),V.jsxs("div",{className:"flex justify-between mt-2",children:[V.jsx("span",{className:"text-white",children:""}),V.jsx("span",{className:"text-white",children:""})]})]}),V.jsx("div",{className:"flex-1 ml-16",children:V.jsx("textarea",{className:"w-full h-16 p-2 text-sm bg-[#F2F2F2] rounded resize-none focus:outline-none",placeholder:w.freeTextInputHint,value:l,onChange:E=>a(E.target.value),maxLength:200})}),V.jsx("div",{className:"ml-4",children:V.jsx("button",{onClick:x,disabled:r===null,className:`
                      px-6 py-2 text-base rounded transition-all
                      ${r!==null?"bg-[#F2F2F2] text-[#4D463A] font-bold":"bg-[#F2F2F2]/70 text-[#4D463A] cursor-not-allowed"}
                    `,children:""})})]}),!k&&V.jsxs("div",{className:"flex items-start justify-center",children:[V.jsxs("div",{children:[V.jsx("div",{className:"flex gap-1",children:[...Array(11)].map((E,T)=>V.jsx("button",{onClick:()=>o(T),className:`
                          w-10 h-10 border rounded text-base font-medium transition-all
                          ${r===T?"bg-[#F2F2F2] text-[#4D463A]":"text-[#F2F2F2] hover:bg-[#F2F2F2] hover:text-[#4D463A] border-[#F2F2F2]"}
                        `,children:T},T))}),V.jsxs("div",{className:"flex justify-between mt-2",children:[V.jsx("span",{className:"text-white text-sm",children:""}),V.jsx("span",{className:"text-white text-sm",children:""})]})]}),V.jsx("button",{onClick:x,disabled:r===null,className:`
                    ml-8 px-6 py-2 text-base rounded transition-all
                    ${r!==null?"bg-[#F2F2F2] text-[#4D463A] font-bold":"bg-[#F2F2F2]/70 text-[#4D463A] cursor-not-allowed"}
                  `,children:""})]})]})})]})}const QE=(n,e=24)=>{var o;const t={16:{right:{left:34,top:-65},left:{left:-278,top:-65},top:{left:-123,top:-165},bottom:{left:-123,top:33}},18:{right:{left:36,top:-64},left:{left:-276,top:-64},top:{left:-122,top:-164},bottom:{left:-122,top:35}},20:{right:{left:38,top:-63.5},left:{left:-276,top:-63.5},top:{left:-122,top:-164},bottom:{left:-121,top:37}},22:{right:{left:40,top:-62},left:{left:-278,top:-62},top:{left:-120,top:-162},bottom:{left:-120,top:39}},24:{right:{left:42,top:-61},left:{left:-280,top:-61},top:{left:-119,top:-164},bottom:{left:-119,top:41}},30:{right:{left:48,top:-58},left:{left:-280,top:-58},top:{left:-116,top:-164},bottom:{left:-116,top:46}},36:{right:{left:54,top:-55},left:{left:-278,top:-55},top:{left:-113,top:-164},bottom:{left:-113,top:52}}},r=((o=t[e])==null?void 0:o[n])||t[24][n];return{left:`${r.left}px`,top:`${r.top}px`}},ZE=n=>({left:{outer:{right:"-16px",top:"65px"},inner:{right:"-15px",top:"66px"}},right:{outer:{left:"-16px",top:"65px"},inner:{left:"-15px",top:"66px"}},top:{outer:{bottom:"-16px",left:"122px"},inner:{bottom:"-15px",left:"123px"}},bottom:{outer:{top:"-16px",left:"122px"},inner:{top:"-15px",left:"123px"}}})[n],qE=({content:n,balloonBgColor:e="#FFFFFF",balloonBorderColor:t="#D1D5DB"})=>{const r=n.position||"right",o=ZE(r),l=$p(r,t,e);return V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"absolute w-0 h-0",style:{...o.outer,...l.outer}}),V.jsx("div",{className:"absolute w-0 h-0",style:{...o.inner,...l.inner}})]})},Jg=(n,e)=>{const t=n.getBoundingClientRect(),r=T1(e);return{x:t.left+r.x,y:t.top+r.y}},XE=({fill:n,size:e=24})=>V.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[V.jsx("circle",{cx:"12",cy:"12",r:"10",fill:n||"#3b82f6",stroke:"none"}),V.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",stroke:"white",strokeWidth:"2"}),V.jsx("path",{d:"M12 17h.01",stroke:"white",strokeWidth:"2"})]}),eI=({fill:n,size:e=24})=>V.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[V.jsx("circle",{cx:"12",cy:"12",r:"10",fill:n||"#3b82f6",stroke:"none"}),V.jsx("path",{d:"M12 8v4",stroke:"white",strokeWidth:"2"}),V.jsx("path",{d:"M12 16h.01",stroke:"white",strokeWidth:"2"})]}),tI=({fill:n,size:e=24})=>V.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[V.jsx("circle",{cx:"12",cy:"12",r:"10",fill:n||"#3b82f6",stroke:"none"}),V.jsxs("g",{transform:"translate(0, 0) scale(0.6)","transform-origin":"12 12",children:[V.jsx("path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",stroke:"white",strokeWidth:"2.5"}),V.jsx("path",{d:"M9 18h6",stroke:"white",strokeWidth:"2"}),V.jsx("path",{d:"M10 22h4",stroke:"white",strokeWidth:"2"})]})]}),nI=n=>{const e=(n==null?void 0:n.font)||"gothic",t=(n==null?void 0:n.titleColor)||"#4D463A",r=(n==null?void 0:n.titleSize)||14,o=(n==null?void 0:n.bodyColor)||"#4D463A",l=(n==null?void 0:n.bodySize)||14,a=(n==null?void 0:n.iconDisplay)??!0,u=(n==null?void 0:n.iconBgColor)||"#266CE3",d=(n==null?void 0:n.iconSize)||24,f=(n==null?void 0:n.iconType)||"circle-question-mark",h=(n==null?void 0:n.balloonBgColor)||"#FFFFFF",m=(n==null?void 0:n.balloonBorderColor)||"#D1D5DB",y=(n==null?void 0:n.balloonRounded)??!0,w=(n==null?void 0:n.balloonArrow)??!0,k=xe.useMemo(()=>e==="mincho"?"'Noto Serif JP', serif":"'Noto Sans JP', sans-serif",[e]),x=xe.useMemo(()=>{const b={fill:u,size:d};switch(f){case"circle-alert":return V.jsx(eI,{...b});case"lightbulb":return V.jsx(tI,{...b});case"circle-question-mark":default:return V.jsx(XE,{...b})}},[f,u,d]);return{font:e,fontFamily:k,titleColor:t,titleSize:r,bodyColor:o,bodySize:l,iconDisplay:a,iconBgColor:u,iconSize:d,iconType:f,IconComponent:x,balloonBgColor:h,balloonBorderColor:m,balloonRounded:y,balloonArrow:w}},rI=({guide:n})=>{const[e,t]=xe.useState(!1),[r,o]=xe.useState({}),[l,a]=xe.useState(null),[u,d]=xe.useState(!1),[f,h]=xe.useState({x:0,y:0}),[m,y]=xe.useState(null),{tooltip:w}=n,{fontFamily:k,titleColor:x,titleSize:b,bodyColor:E,bodySize:T,iconDisplay:M,iconSize:_,IconComponent:F,balloonBgColor:z,balloonBorderColor:Y,balloonRounded:j,balloonArrow:ve}=nI(r),pe=(r==null?void 0:r.position)||"right",Ie=xe.useMemo(()=>qc(r.body),[r.body]),ce=()=>{m&&(clearTimeout(m),y(null)),d(!0)},fe=()=>{const te=setTimeout(()=>{d(!1)},1250);y(te)};if(xe.useEffect(()=>{if(!(w!=null&&w.selector))return;const te=document.querySelector(w.selector);if(!te)return;a(te),o(w.content||{}),t(!0);const se=Jg(te,w.content||{});h(se)},[w,n]),xe.useEffect(()=>{if(!(!l||!e||M))return l.addEventListener("mouseenter",ce),l.addEventListener("mouseleave",fe),()=>{l.removeEventListener("mouseenter",ce),l.removeEventListener("mouseleave",fe)}},[l,e,M]),xe.useEffect(()=>{if(!l||!e)return;const te=()=>{const se=Jg(l,r);h(se)};return window.addEventListener("scroll",te,!0),window.addEventListener("resize",te),()=>{window.removeEventListener("scroll",te,!0),window.removeEventListener("resize",te)}},[l,e,r]),xe.useEffect(()=>()=>{m&&clearTimeout(m)},[m]),!w||!e||!l)return null;const re={...r,position:pe};return V.jsxs("div",{className:"ux-canvas-tooltip fixed z-[2147483646]",style:{top:`${f.y}px`,left:`${f.x}px`},children:[V.jsx("div",{className:"flex items-center justify-center cursor-pointer transition-all duration-200 pointer-events-auto",onMouseEnter:ce,onMouseLeave:fe,style:{visibility:M?"visible":"hidden"},children:F}),V.jsxs("div",{className:`absolute border transition-all duration-200 p-4 w-[260px] min-h-[146px] ${j?"rounded":""} shadow-lg ${u?"opacity-100 scale-100 pointer-events-auto":"opacity-0 scale-80 pointer-events-none"}`,onMouseEnter:ce,onMouseLeave:fe,style:{...QE(pe,_),fontFamily:k,backgroundColor:z,borderColor:Y},children:[V.jsx("div",{className:"font-semibold mb-2 break-words",style:{color:x,fontSize:`${b}px`},children:r.title||""}),V.jsx("div",{className:"leading-relaxed break-words",style:{color:E,fontSize:`${T}px`},dangerouslySetInnerHTML:{__html:Ie}}),ve&&V.jsx(qE,{content:re,balloonBgColor:z,balloonBorderColor:Y})]})]})},iI=n=>n?n.replace(/^www\./,""):"",oI=n=>{if(!n)return"";try{return new URL(n).hostname}catch{return n}},Yg=n=>{const e=oI(n);return iI(e)},sI=(n,e)=>{if(!e.urlPattern||!e.urlValue)return!1;switch(e.urlPattern){case"EXACT_MATCH":return n===e.urlValue;case"DOMAIN_MATCH":{const t=Yg(e.urlValue),r=Yg(n);return t===r}case"REGEX_MATCH":if(!e.urlRegex)return!1;try{return new RegExp(e.urlRegex).test(n)}catch{return!1}default:return!1}},lI=()=>{document.querySelectorAll(".ux-canvas-tooltip").forEach(n=>{n.remove()}),document.querySelectorAll(".ux-canvas-navigation, .ux-canvas-survey, .ux-canvas-todo").forEach(n=>{n.remove()}),document.querySelectorAll(".ux-canvas-viewer").forEach(n=>{const e=document.querySelector(".ux-canvas-viewer");n!==e&&n.remove()})},aI=n=>{const e=window.location.href,t=[];for(const r of n)if(r.enabled)for(const o of r.guides||[])o.isPublished&&sI(e,o)&&t.push(o);return t},uI=n=>n.map(e=>{switch(e.type){case"TOOLTIP":return V.jsx(rI,{guide:e},`tooltip-${e.id}`);case"NAVIGATION":return V.jsx(LE,{guide:e},`navigation-${e.id}`);case"SURVEY":return V.jsx(YE,{guide:e},`survey-${e.id}`);case"TODO_LIST":return null;default:return null}}),cI=(n,e=!0)=>{xe.useEffect(()=>{var a,u,d;if(!e)return;const t=(a=chrome==null?void 0:chrome.runtime)==null?void 0:a.onMessage,r=(u=t==null?void 0:t.addListener)==null?void 0:u.bind(t),o=(d=t==null?void 0:t.removeListener)==null?void 0:d.bind(t);if(!r||!o)return;const l=(f,h,m)=>{(f==null?void 0:f.type)==="GUIDES_UPDATED"&&f.products&&(n(f.products),m==null||m({success:!0})),(f==null?void 0:f.type)==="INITIAL_PRODUCTS_DATA"&&f.products&&(n(f.products),m==null||m({success:!0}))};return r(l),()=>o(l)},[n,e])};var dI={PLASMO_PUBLIC_RUNTIME:"embed"};const Qg=dI.PLASMO_PUBLIC_RUNTIME==="extension",fI=({products:n})=>{const[e,t]=xe.useState([]),r=o=>{lI();const l=aI(o);t(l)};return xe.useEffect(()=>{n&&!Qg&&r(n)},[n]),cI(r,Qg),V.jsx("div",{className:"ux-canvas-viewer",children:uI(e)})};let Uo=null;async function pI(n){if(!n||Uo)return;const[{record:e}]=await Promise.all([Promise.resolve().then(()=>VA)]),t=[],r=Date.now(),o=await Ai.ensure();Uo=e({emit(a){t.push(a)}});const l=()=>{try{fetch(`${Xc}/user/session-replay/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:o,startedAt:r,sentAt:Date.now(),meta:{productUuid:n,href:location.href,ua:navigator.userAgent,viewport:{w:innerWidth,h:innerHeight}},events:t}),keepalive:!0})}catch{}};return window.addEventListener("beforeunload",l),()=>{if(window.removeEventListener("beforeunload",l),Uo){try{Uo()}catch{}Uo=null}}}let td=null,Wo=null;const hI=(n=[])=>{td&&td.render(V.jsx(fI,{products:n}))},mI=async(n,e)=>{var l;const t=await fetch(`${Xc}/user/embed-auth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{productUuid:e,sessionId:n}})});if(!t.ok)throw new Error(`HTTP ${t.status}`);const r=await t.json();return Array.isArray((l=r==null?void 0:r.data)==null?void 0:l.products)?r.data.products:[]},gI=(n=3e3)=>new Promise(e=>{if(document.readyState!=="loading"&&document.body){e();return}const t=()=>{window.removeEventListener("load",t),e()};window.addEventListener("load",t,{once:!0}),setTimeout(()=>{window.removeEventListener("load",t),e()},n)}),yI={init:async n=>{if(!Wo&&n)try{await gI();const e=await Ai.ensure();Wo=document.createElement("div"),Wo.className="ux-canvas-viewer",document.body.appendChild(Wo);const t=Wo.attachShadow({mode:"open"}),r=document.createElement("style");r.textContent=b1,t.appendChild(r);const o=document.createElement("div");t.appendChild(o),td=Hp(o);const l=await mI(e,n);l.length&&hI(l),pI(n)}catch{}}};var Re;(function(n){n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment"})(Re||(Re={}));function Zg(n){return n.nodeType===n.ELEMENT_NODE}function Ho(n){var e=n==null?void 0:n.host;return(e==null?void 0:e.shadowRoot)===n}function Vo(n){return Object.prototype.toString.call(n)==="[object ShadowRoot]"}function vI(n){return n.includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n}function nd(n){try{var e=n.rules||n.cssRules;return e?vI(Array.from(e).map(qg).join("")):null}catch{return null}}function qg(n){var e=n.cssText;if(wI(n))try{e=nd(n.styleSheet)||e}catch{}return e}function wI(n){return"styleSheet"in n}var rd=function(){function n(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return n.prototype.getId=function(e){var t;if(!e)return-1;var r=(t=this.getMeta(e))===null||t===void 0?void 0:t.id;return r??-1},n.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},n.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},n.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},n.prototype.removeNodeFromMap=function(e){var t=this,r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach(function(o){return t.removeNodeFromMap(o)})},n.prototype.has=function(e){return this.idNodeMap.has(e)},n.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},n.prototype.add=function(e,t){var r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)},n.prototype.replace=function(e,t){var r=this.getNode(e);if(r){var o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(t,o)}this.idNodeMap.set(e,t)},n.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},n}();function Xg(){return new rd}function id(n){var e=n.maskInputOptions,t=n.tagName,r=n.type,o=n.value,l=n.maskInputFn,a=o||"";return(e[t.toLowerCase()]||e[r])&&(l?a=l(a):a="*".repeat(a.length)),a}var ey="__rrweb_original__";function kI(n){var e=n.getContext("2d");if(!e)return!0;for(var t=50,r=0;r<n.width;r+=t)for(var o=0;o<n.height;o+=t){var l=e.getImageData,a=ey in l?l[ey]:l,u=new Uint32Array(a.call(e,r,o,Math.min(t,n.width-r),Math.min(t,n.height-o)).data.buffer);if(u.some(function(d){return d!==0}))return!1}return!0}var SI=1,xI=new RegExp("[^a-z0-9-_:]"),$o=-2;function ty(){return SI++}function CI(n){if(n instanceof HTMLFormElement)return"form";var e=n.tagName.toLowerCase().trim();return xI.test(e)?"div":e}function bI(n){return n.cssRules?Array.from(n.cssRules).map(function(e){return e.cssText||""}).join(""):""}function EI(n){var e="";return n.indexOf("//")>-1?e=n.split("/").slice(0,3).join("/"):e=n.split("/")[0],e=e.split("?")[0],e}var Ni,ny,II=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,TI=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,AI=/^(data:)([^,]*),(.*)/i;function ql(n,e){return(n||"").replace(II,function(t,r,o,l,a,u){var d=o||a||u,f=r||l||"";if(!d)return t;if(!TI.test(d)||AI.test(d))return"url(".concat(f).concat(d).concat(f,")");if(d[0]==="/")return"url(".concat(f).concat(EI(e)+d).concat(f,")");var h=e.split("/"),m=d.split("/");h.pop();for(var y=0,w=m;y<w.length;y++){var k=w[y];k!=="."&&(k===".."?h.pop():h.push(k))}return"url(".concat(f).concat(h.join("/")).concat(f,")")})}var NI=/^[^ \t\n\r\u000c]+/,MI=/^[, \t\n\r\u000c]+/;function RI(n,e){if(e.trim()==="")return e;var t=0;function r(f){var h,m=f.exec(e.substring(t));return m?(h=m[0],t+=h.length,h):""}for(var o=[];r(MI),!(t>=e.length);){var l=r(NI);if(l.slice(-1)===",")l=Mi(n,l.substring(0,l.length-1)),o.push(l);else{var a="";l=Mi(n,l);for(var u=!1;;){var d=e.charAt(t);if(d===""){o.push((l+a).trim());break}else if(u)d===")"&&(u=!1);else if(d===","){t+=1,o.push((l+a).trim());break}else d==="("&&(u=!0);a+=d,t+=1}}}return o.join(", ")}function Mi(n,e){if(!e||e.trim()==="")return e;var t=n.createElement("a");return t.href=e,t.href}function OI(n){return!!(n.tagName==="svg"||n.ownerSVGElement)}function od(){var n=document.createElement("a");return n.href="",n.href}function ry(n,e,t,r){return t==="src"||t==="href"&&r&&!(e==="use"&&r[0]==="#")||t==="xlink:href"&&r&&r[0]!=="#"||t==="background"&&r&&(e==="table"||e==="td"||e==="th")?Mi(n,r):t==="srcset"&&r?RI(n,r):t==="style"&&r?ql(r,od()):e==="object"&&t==="data"&&r?Mi(n,r):r}function LI(n,e,t){if(typeof e=="string"){if(n.classList.contains(e))return!0}else for(var r=n.classList.length;r--;){var o=n.classList[r];if(e.test(o))return!0}return t?n.matches(t):!1}function Xl(n,e,t){if(!n)return!1;if(n.nodeType!==n.ELEMENT_NODE)return t?Xl(n.parentNode,e,t):!1;for(var r=n.classList.length;r--;){var o=n.classList[r];if(e.test(o))return!0}return t?Xl(n.parentNode,e,t):!1}function iy(n,e,t){var r=n.nodeType===n.ELEMENT_NODE?n:n.parentElement;if(r===null)return!1;if(typeof e=="string"){if(r.classList.contains(e)||r.closest(".".concat(e)))return!0}else if(Xl(r,e,!0))return!0;return!!(t&&(r.matches(t)||r.closest(t)))}function DI(n,e,t){var r=n.contentWindow;if(r){var o=!1,l;try{l=r.document.readyState}catch{return}if(l!=="complete"){var a=setTimeout(function(){o||(e(),o=!0)},t);n.addEventListener("load",function(){clearTimeout(a),o=!0,e()});return}var u="about:blank";if(r.location.href!==u||n.src===u||n.src==="")return setTimeout(e,0),n.addEventListener("load",e);n.addEventListener("load",e)}}function PI(n,e,t){var r=!1,o;try{o=n.sheet}catch{return}if(!o){var l=setTimeout(function(){r||(e(),r=!0)},t);n.addEventListener("load",function(){clearTimeout(l),r=!0,e()})}}function _I(n,e){var t=e.doc,r=e.mirror,o=e.blockClass,l=e.blockSelector,a=e.maskTextClass,u=e.maskTextSelector,d=e.inlineStylesheet,f=e.maskInputOptions,h=f===void 0?{}:f,m=e.maskTextFn,y=e.maskInputFn,w=e.dataURLOptions,k=w===void 0?{}:w,x=e.inlineImages,b=e.recordCanvas,E=e.keepIframeSrcFn,T=e.newlyAddedElement,M=T===void 0?!1:T,_=FI(t,r);switch(n.nodeType){case n.DOCUMENT_NODE:return n.compatMode!=="CSS1Compat"?{type:Re.Document,childNodes:[],compatMode:n.compatMode}:{type:Re.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:Re.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:_};case n.ELEMENT_NODE:return BI(n,{doc:t,blockClass:o,blockSelector:l,inlineStylesheet:d,maskInputOptions:h,maskInputFn:y,dataURLOptions:k,inlineImages:x,recordCanvas:b,keepIframeSrcFn:E,newlyAddedElement:M,rootId:_});case n.TEXT_NODE:return zI(n,{maskTextClass:a,maskTextSelector:u,maskTextFn:m,rootId:_});case n.CDATA_SECTION_NODE:return{type:Re.CDATA,textContent:"",rootId:_};case n.COMMENT_NODE:return{type:Re.Comment,textContent:n.textContent||"",rootId:_};default:return!1}}function FI(n,e){if(e.hasNode(n)){var t=e.getId(n);return t===1?void 0:t}}function zI(n,e){var t,r=e.maskTextClass,o=e.maskTextSelector,l=e.maskTextFn,a=e.rootId,u=n.parentNode&&n.parentNode.tagName,d=n.textContent,f=u==="STYLE"?!0:void 0,h=u==="SCRIPT"?!0:void 0;if(f&&d){try{n.nextSibling||n.previousSibling||!((t=n.parentNode.sheet)===null||t===void 0)&&t.cssRules&&(d=bI(n.parentNode.sheet))}catch(m){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(m),n)}d=ql(d,od())}return h&&(d="SCRIPT_PLACEHOLDER"),!f&&!h&&d&&iy(n,r,o)&&(d=l?l(d):d.replace(/[\S]/g,"*")),{type:Re.Text,textContent:d||"",isStyle:f,rootId:a}}function BI(n,e){for(var t=e.doc,r=e.blockClass,o=e.blockSelector,l=e.inlineStylesheet,a=e.maskInputOptions,u=a===void 0?{}:a,d=e.maskInputFn,f=e.dataURLOptions,h=f===void 0?{}:f,m=e.inlineImages,y=e.recordCanvas,w=e.keepIframeSrcFn,k=e.newlyAddedElement,x=k===void 0?!1:k,b=e.rootId,E=LI(n,r,o),T=CI(n),M={},_=n.attributes.length,F=0;F<_;F++){var z=n.attributes[F];M[z.name]=ry(t,T,z.name,z.value)}if(T==="link"&&l){var Y=Array.from(t.styleSheets).find(function(C){return C.href===n.href}),j=null;Y&&(j=nd(Y)),j&&(delete M.rel,delete M.href,M._cssText=ql(j,Y.href))}if(T==="style"&&n.sheet&&!(n.innerText||n.textContent||"").trim().length){var j=nd(n.sheet);j&&(M._cssText=ql(j,od()))}if(T==="input"||T==="textarea"||T==="select"){var ve=n.value,pe=n.checked;M.type!=="radio"&&M.type!=="checkbox"&&M.type!=="submit"&&M.type!=="button"&&ve?M.value=id({type:M.type,tagName:T,value:ve,maskInputOptions:u,maskInputFn:d}):pe&&(M.checked=pe)}if(T==="option"&&(n.selected&&!u.select?M.selected=!0:delete M.selected),T==="canvas"&&y){if(n.__context==="2d")kI(n)||(M.rr_dataURL=n.toDataURL(h.type,h.quality));else if(!("__context"in n)){var Ie=n.toDataURL(h.type,h.quality),ce=document.createElement("canvas");ce.width=n.width,ce.height=n.height;var fe=ce.toDataURL(h.type,h.quality);Ie!==fe&&(M.rr_dataURL=Ie)}}if(T==="img"&&m){Ni||(Ni=t.createElement("canvas"),ny=Ni.getContext("2d"));var re=n,te=re.crossOrigin;re.crossOrigin="anonymous";var se=function(){try{Ni.width=re.naturalWidth,Ni.height=re.naturalHeight,ny.drawImage(re,0,0),M.rr_dataURL=Ni.toDataURL(h.type,h.quality)}catch(C){console.warn("Cannot inline img src=".concat(re.currentSrc,"! Error: ").concat(C))}te?M.crossOrigin=te:re.removeAttribute("crossorigin")};re.complete&&re.naturalWidth!==0?se():re.onload=se}if((T==="audio"||T==="video")&&(M.rr_mediaState=n.paused?"paused":"played",M.rr_mediaCurrentTime=n.currentTime),x||(n.scrollLeft&&(M.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(M.rr_scrollTop=n.scrollTop)),E){var Z=n.getBoundingClientRect(),W=Z.width,P=Z.height;M={class:M.class,rr_width:"".concat(W,"px"),rr_height:"".concat(P,"px")}}return T==="iframe"&&!w(M.src)&&(n.contentDocument||(M.rr_src=M.src),delete M.src),{type:Re.Element,tagName:T,attributes:M,childNodes:[],isSVG:OI(n)||void 0,needBlock:E,rootId:b}}function ze(n){return n===void 0?"":n.toLowerCase()}function jI(n,e){if(e.comment&&n.type===Re.Comment)return!0;if(n.type===Re.Element){if(e.script&&(n.tagName==="script"||n.tagName==="link"&&n.attributes.rel==="preload"&&n.attributes.as==="script"||n.tagName==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&n.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&(n.tagName==="link"&&n.attributes.rel==="shortcut icon"||n.tagName==="meta"&&(ze(n.attributes.name).match(/^msapplication-tile(image|color)$/)||ze(n.attributes.name)==="application-name"||ze(n.attributes.rel)==="icon"||ze(n.attributes.rel)==="apple-touch-icon"||ze(n.attributes.rel)==="shortcut icon")))return!0;if(n.tagName==="meta"){if(e.headMetaDescKeywords&&ze(n.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(ze(n.attributes.property).match(/^(og|twitter|fb):/)||ze(n.attributes.name).match(/^(og|twitter):/)||ze(n.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(ze(n.attributes.name)==="robots"||ze(n.attributes.name)==="googlebot"||ze(n.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&n.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(ze(n.attributes.name)==="author"||ze(n.attributes.name)==="generator"||ze(n.attributes.name)==="framework"||ze(n.attributes.name)==="publisher"||ze(n.attributes.name)==="progid"||ze(n.attributes.property).match(/^article:/)||ze(n.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(ze(n.attributes.name)==="google-site-verification"||ze(n.attributes.name)==="yandex-verification"||ze(n.attributes.name)==="csrf-token"||ze(n.attributes.name)==="p:domain_verify"||ze(n.attributes.name)==="verify-v1"||ze(n.attributes.name)==="verification"||ze(n.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ri(n,e){var t=e.doc,r=e.mirror,o=e.blockClass,l=e.blockSelector,a=e.maskTextClass,u=e.maskTextSelector,d=e.skipChild,f=d===void 0?!1:d,h=e.inlineStylesheet,m=h===void 0?!0:h,y=e.maskInputOptions,w=y===void 0?{}:y,k=e.maskTextFn,x=e.maskInputFn,b=e.slimDOMOptions,E=e.dataURLOptions,T=E===void 0?{}:E,M=e.inlineImages,_=M===void 0?!1:M,F=e.recordCanvas,z=F===void 0?!1:F,Y=e.onSerialize,j=e.onIframeLoad,ve=e.iframeLoadTimeout,pe=ve===void 0?5e3:ve,Ie=e.onStylesheetLoad,ce=e.stylesheetLoadTimeout,fe=ce===void 0?5e3:ce,re=e.keepIframeSrcFn,te=re===void 0?function(){return!1}:re,se=e.newlyAddedElement,Z=se===void 0?!1:se,W=e.preserveWhiteSpace,P=W===void 0?!0:W,C=_I(n,{doc:t,mirror:r,blockClass:o,blockSelector:l,maskTextClass:a,maskTextSelector:u,inlineStylesheet:m,maskInputOptions:w,maskTextFn:k,maskInputFn:x,dataURLOptions:T,inlineImages:_,recordCanvas:z,keepIframeSrcFn:te,newlyAddedElement:Z});if(!C)return console.warn(n,"not serialized"),null;var O;r.hasNode(n)?O=r.getId(n):jI(C,b)||!P&&C.type===Re.Text&&!C.isStyle&&!C.textContent.replace(/^\s+|\s+$/gm,"").length?O=$o:O=ty();var B=Object.assign(C,{id:O});if(r.add(n,B),O===$o)return null;Y&&Y(n);var X=!f;if(B.type===Re.Element){X=X&&!B.needBlock,delete B.needBlock;var ne=n.shadowRoot;ne&&Vo(ne)&&(B.isShadowHost=!0)}if((B.type===Re.Document||B.type===Re.Element)&&X){b.headWhitespace&&B.type===Re.Element&&B.tagName==="head"&&(P=!1);for(var we={doc:t,mirror:r,blockClass:o,blockSelector:l,maskTextClass:a,maskTextSelector:u,skipChild:f,inlineStylesheet:m,maskInputOptions:w,maskTextFn:k,maskInputFn:x,slimDOMOptions:b,dataURLOptions:T,inlineImages:_,recordCanvas:z,preserveWhiteSpace:P,onSerialize:Y,onIframeLoad:j,iframeLoadTimeout:pe,onStylesheetLoad:Ie,stylesheetLoadTimeout:fe,keepIframeSrcFn:te},Q=0,ke=Array.from(n.childNodes);Q<ke.length;Q++){var me=ke[Q],Ee=Ri(me,we);Ee&&B.childNodes.push(Ee)}if(Zg(n)&&n.shadowRoot)for(var vt=0,Te=Array.from(n.shadowRoot.childNodes);vt<Te.length;vt++){var me=Te[vt],Ee=Ri(me,we);Ee&&(Vo(n.shadowRoot)&&(Ee.isShadow=!0),B.childNodes.push(Ee))}}return n.parentNode&&Ho(n.parentNode)&&Vo(n.parentNode)&&(B.isShadow=!0),B.type===Re.Element&&B.tagName==="iframe"&&DI(n,function(){var st=n.contentDocument;if(st&&j){var Mn=Ri(st,{doc:st,mirror:r,blockClass:o,blockSelector:l,maskTextClass:a,maskTextSelector:u,skipChild:!1,inlineStylesheet:m,maskInputOptions:w,maskTextFn:k,maskInputFn:x,slimDOMOptions:b,dataURLOptions:T,inlineImages:_,recordCanvas:z,preserveWhiteSpace:P,onSerialize:Y,onIframeLoad:j,iframeLoadTimeout:pe,onStylesheetLoad:Ie,stylesheetLoadTimeout:fe,keepIframeSrcFn:te});Mn&&j(n,Mn)}},pe),B.type===Re.Element&&B.tagName==="link"&&B.attributes.rel==="stylesheet"&&PI(n,function(){if(Ie){var st=Ri(n,{doc:t,mirror:r,blockClass:o,blockSelector:l,maskTextClass:a,maskTextSelector:u,skipChild:!1,inlineStylesheet:m,maskInputOptions:w,maskTextFn:k,maskInputFn:x,slimDOMOptions:b,dataURLOptions:T,inlineImages:_,recordCanvas:z,preserveWhiteSpace:P,onSerialize:Y,onIframeLoad:j,iframeLoadTimeout:pe,onStylesheetLoad:Ie,stylesheetLoadTimeout:fe,keepIframeSrcFn:te});st&&Ie(n,st)}},fe),B}function UI(n,e){var t=e||{},r=t.mirror,o=r===void 0?new rd:r,l=t.blockClass,a=l===void 0?"rr-block":l,u=t.blockSelector,d=u===void 0?null:u,f=t.maskTextClass,h=f===void 0?"rr-mask":f,m=t.maskTextSelector,y=m===void 0?null:m,w=t.inlineStylesheet,k=w===void 0?!0:w,x=t.inlineImages,b=x===void 0?!1:x,E=t.recordCanvas,T=E===void 0?!1:E,M=t.maskAllInputs,_=M===void 0?!1:M,F=t.maskTextFn,z=t.maskInputFn,Y=t.slimDOM,j=Y===void 0?!1:Y,ve=t.dataURLOptions,pe=t.preserveWhiteSpace,Ie=t.onSerialize,ce=t.onIframeLoad,fe=t.iframeLoadTimeout,re=t.onStylesheetLoad,te=t.stylesheetLoadTimeout,se=t.keepIframeSrcFn,Z=se===void 0?function(){return!1}:se,W=_===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:_===!1?{password:!0}:_,P=j===!0||j==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:j==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:j===!1?{}:j;return Ri(n,{doc:n,mirror:o,blockClass:a,blockSelector:d,maskTextClass:h,maskTextSelector:y,skipChild:!1,inlineStylesheet:k,maskInputOptions:W,maskTextFn:F,maskInputFn:z,slimDOMOptions:P,dataURLOptions:ve,inlineImages:b,recordCanvas:T,preserveWhiteSpace:pe,onSerialize:Ie,onIframeLoad:ce,iframeLoadTimeout:fe,onStylesheetLoad:re,stylesheetLoadTimeout:te,keepIframeSrcFn:Z,newlyAddedElement:!1})}var oy=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function WI(n,e){e===void 0&&(e={});var t=1,r=1;function o(P){var C=P.match(/\n/g);C&&(t+=C.length);var O=P.lastIndexOf(`
`);r=O===-1?r+P.length:P.length-O}function l(){var P={line:t,column:r};return function(C){return C.position=new a(P),k(),C}}var a=function(){function P(C){this.start=C,this.end={line:t,column:r},this.source=e.source}return P}();a.prototype.content=n;var u=[];function d(P){var C=new Error("".concat(e.source||"",":").concat(t,":").concat(r,": ").concat(P));if(C.reason=P,C.filename=e.source,C.line=t,C.column=r,C.source=n,e.silent)u.push(C);else throw C}function f(){var P=y();return{type:"stylesheet",stylesheet:{source:e.source,rules:P,parsingErrors:u}}}function h(){return w(/^{\s*/)}function m(){return w(/^}/)}function y(){var P,C=[];for(k(),x(C);n.length&&n.charAt(0)!=="}"&&(P=Z()||W());)P!==!1&&(C.push(P),x(C));return C}function w(P){var C=P.exec(n);if(C){var O=C[0];return o(O),n=n.slice(O.length),C}}function k(){w(/^\s*/)}function x(P){P===void 0&&(P=[]);for(var C;C=b();)C!==!1&&P.push(C),C=b();return P}function b(){var P=l();if(!(n.charAt(0)!=="/"||n.charAt(1)!=="*")){for(var C=2;n.charAt(C)!==""&&(n.charAt(C)!=="*"||n.charAt(C+1)!=="/");)++C;if(C+=2,n.charAt(C-1)==="")return d("End of comment missing");var O=n.slice(2,C-2);return r+=2,o(O),n=n.slice(C),r+=2,P({type:"comment",comment:O})}}function E(){var P=w(/^([^{]+)/);if(P)return jn(P[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(C){return C.replace(/,/g,"")}).split(/\s*(?![^(]*\)),\s*/).map(function(C){return C.replace(/\u200C/g,",")})}function T(){var P=l(),C=w(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(C){var O=jn(C[0]);if(!w(/^:\s*/))return d("property missing ':'");var B=w(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),X=P({type:"declaration",property:O.replace(oy,""),value:B?jn(B[0]).replace(oy,""):""});return w(/^[;\s]*/),X}}function M(){var P=[];if(!h())return d("missing '{'");x(P);for(var C;C=T();)C!==!1&&(P.push(C),x(P)),C=T();return m()?P:d("missing '}'")}function _(){for(var P,C=[],O=l();P=w(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)C.push(P[1]),w(/^,\s*/);if(C.length)return O({type:"keyframe",values:C,declarations:M()})}function F(){var P=l(),C=w(/^@([-\w]+)?keyframes\s*/);if(C){var O=C[1];if(C=w(/^([-\w]+)\s*/),!C)return d("@keyframes missing name");var B=C[1];if(!h())return d("@keyframes missing '{'");for(var X,ne=x();X=_();)ne.push(X),ne=ne.concat(x());return m()?P({type:"keyframes",name:B,vendor:O,keyframes:ne}):d("@keyframes missing '}'")}}function z(){var P=l(),C=w(/^@supports *([^{]+)/);if(C){var O=jn(C[1]);if(!h())return d("@supports missing '{'");var B=x().concat(y());return m()?P({type:"supports",supports:O,rules:B}):d("@supports missing '}'")}}function Y(){var P=l(),C=w(/^@host\s*/);if(C){if(!h())return d("@host missing '{'");var O=x().concat(y());return m()?P({type:"host",rules:O}):d("@host missing '}'")}}function j(){var P=l(),C=w(/^@media *([^{]+)/);if(C){var O=jn(C[1]);if(!h())return d("@media missing '{'");var B=x().concat(y());return m()?P({type:"media",media:O,rules:B}):d("@media missing '}'")}}function ve(){var P=l(),C=w(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(C)return P({type:"custom-media",name:jn(C[1]),media:jn(C[2])})}function pe(){var P=l(),C=w(/^@page */);if(C){var O=E()||[];if(!h())return d("@page missing '{'");for(var B=x(),X;X=T();)B.push(X),B=B.concat(x());return m()?P({type:"page",selectors:O,declarations:B}):d("@page missing '}'")}}function Ie(){var P=l(),C=w(/^@([-\w]+)?document *([^{]+)/);if(C){var O=jn(C[1]),B=jn(C[2]);if(!h())return d("@document missing '{'");var X=x().concat(y());return m()?P({type:"document",document:B,vendor:O,rules:X}):d("@document missing '}'")}}function ce(){var P=l(),C=w(/^@font-face\s*/);if(C){if(!h())return d("@font-face missing '{'");for(var O=x(),B;B=T();)O.push(B),O=O.concat(x());return m()?P({type:"font-face",declarations:O}):d("@font-face missing '}'")}}var fe=se("import"),re=se("charset"),te=se("namespace");function se(P){var C=new RegExp("^@"+P+"\\s*([^;]+);");return function(){var O=l(),B=w(C);if(B){var X={type:P};return X[P]=B[1].trim(),O(X)}}}function Z(){if(n[0]==="@")return F()||j()||ve()||z()||fe()||re()||te()||Ie()||pe()||Y()||ce()}function W(){var P=l(),C=E();return C?(x(),P({type:"rule",selectors:C,declarations:M()})):d("selector missing")}return sd(f())}function jn(n){return n?n.replace(/^\s+|\s+$/g,""):""}function sd(n,e){for(var t=n&&typeof n.type=="string",r=t?n:e,o=0,l=Object.keys(n);o<l.length;o++){var a=l[o],u=n[a];Array.isArray(u)?u.forEach(function(d){sd(d,r)}):u&&typeof u=="object"&&sd(u,r)}return t&&Object.defineProperty(n,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null}),n}var sy={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function HI(n){var e=sy[n.tagName]?sy[n.tagName]:n.tagName;return e==="link"&&n.attributes._cssText&&(e="style"),e}function VI(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var ly=/([^\\]):hover/,$I=new RegExp(ly.source,"g");function ay(n,e){var t=e==null?void 0:e.stylesWithHoverClass.get(n);if(t)return t;var r=WI(n,{silent:!0});if(!r.stylesheet)return n;var o=[];if(r.stylesheet.rules.forEach(function(u){"selectors"in u&&(u.selectors||[]).forEach(function(d){ly.test(d)&&o.push(d)})}),o.length===0)return n;var l=new RegExp(o.filter(function(u,d){return o.indexOf(u)===d}).sort(function(u,d){return d.length-u.length}).map(function(u){return VI(u)}).join("|"),"g"),a=n.replace(l,function(u){var d=u.replace($I,"$1.\\:hover");return"".concat(u,", ").concat(d)});return e==null||e.stylesWithHoverClass.set(n,a),a}function uy(){var n=new Map;return{stylesWithHoverClass:n}}function GI(n,e){var t=e.doc,r=e.hackCss,o=e.cache;switch(n.type){case Re.Document:return t.implementation.createDocument(null,"",null);case Re.DocumentType:return t.implementation.createDocumentType(n.name||"html",n.publicId,n.systemId);case Re.Element:{var l=HI(n),a;n.isSVG?a=t.createElementNS("http://www.w3.org/2000/svg",l):a=t.createElement(l);var u={};for(var d in n.attributes)if(Object.prototype.hasOwnProperty.call(n.attributes,d)){var f=n.attributes[d];if(!(l==="option"&&d==="selected"&&f===!1)){if(f===!0&&(f=""),d.startsWith("rr_")){u[d]=f;continue}var h=l==="textarea"&&d==="value",m=l==="style"&&d==="_cssText";if(m&&r&&typeof f=="string"&&(f=ay(f,o)),(h||m)&&typeof f=="string"){for(var y=t.createTextNode(f),w=0,k=Array.from(a.childNodes);w<k.length;w++){var x=k[w];x.nodeType===a.TEXT_NODE&&a.removeChild(x)}a.appendChild(y);continue}try{if(n.isSVG&&d==="xlink:href")a.setAttributeNS("http://www.w3.org/1999/xlink",d,f.toString());else if(d==="onload"||d==="onclick"||d.substring(0,7)==="onmouse")a.setAttribute("_"+d,f.toString());else if(l==="meta"&&n.attributes["http-equiv"]==="Content-Security-Policy"&&d==="content"){a.setAttribute("csp-content",f.toString());continue}else l==="link"&&n.attributes.rel==="preload"&&n.attributes.as==="script"||l==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&n.attributes.href.endsWith(".js")||(l==="img"&&n.attributes.srcset&&n.attributes.rr_dataURL?a.setAttribute("rrweb-original-srcset",n.attributes.srcset):a.setAttribute(d,f.toString()))}catch{}}}var b=function(T){var M=u[T];if(l==="canvas"&&T==="rr_dataURL"){var _=document.createElement("img");_.onload=function(){var z=a.getContext("2d");z&&z.drawImage(_,0,0,_.width,_.height)},_.src=M.toString(),a.RRNodeType&&(a.rr_dataURL=M.toString())}else if(l==="img"&&T==="rr_dataURL"){var F=a;F.currentSrc.startsWith("data:")||(F.setAttribute("rrweb-original-src",n.attributes.src),F.src=M.toString())}if(T==="rr_width")a.style.width=M.toString();else if(T==="rr_height")a.style.height=M.toString();else if(T==="rr_mediaCurrentTime"&&typeof M=="number")a.currentTime=M;else if(T==="rr_mediaState")switch(M){case"played":a.play().catch(function(z){return console.warn("media playback error",z)});break;case"paused":a.pause();break}};for(var E in u)b(E);if(n.isShadowHost)if(!a.shadowRoot)a.attachShadow({mode:"open"});else for(;a.shadowRoot.firstChild;)a.shadowRoot.removeChild(a.shadowRoot.firstChild);return a}case Re.Text:return t.createTextNode(n.isStyle&&r?ay(n.textContent,o):n.textContent);case Re.CDATA:return t.createCDATASection(n.textContent);case Re.Comment:return t.createComment(n.textContent);default:return null}}function Go(n,e){var t=e.doc,r=e.mirror,o=e.skipChild,l=o===void 0?!1:o,a=e.hackCss,u=a===void 0?!0:a,d=e.afterAppend,f=e.cache,h=GI(n,{doc:t,hackCss:u,cache:f});if(!h)return null;if(n.rootId&&r.getNode(n.rootId)!==t&&r.replace(n.rootId,t),n.type===Re.Document&&(t.close(),t.open(),n.compatMode==="BackCompat"&&n.childNodes&&n.childNodes[0].type!==Re.DocumentType&&(n.childNodes[0].type===Re.Element&&"xmlns"in n.childNodes[0].attributes&&n.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),h=t),r.add(h,n),(n.type===Re.Document||n.type===Re.Element)&&!l)for(var m=0,y=n.childNodes;m<y.length;m++){var w=y[m],k=Go(w,{doc:t,mirror:r,skipChild:!1,hackCss:u,afterAppend:d,cache:f});if(!k){console.warn("Failed to rebuild",w);continue}w.isShadow&&Zg(h)&&h.shadowRoot?h.shadowRoot.appendChild(k):h.appendChild(k),d&&d(k,w.id)}return h}function KI(n,e){function t(a){e(a)}for(var r=0,o=n.getIds();r<o.length;r++){var l=o[r];n.has(l)&&t(n.getNode(l))}}function JI(n,e){var t=e.getMeta(n);if((t==null?void 0:t.type)===Re.Element){var r=n;for(var o in t.attributes)if(Object.prototype.hasOwnProperty.call(t.attributes,o)&&o.startsWith("rr_")){var l=t.attributes[o];o==="rr_scrollLeft"&&(r.scrollLeft=l),o==="rr_scrollTop"&&(r.scrollTop=l)}}}function YI(n,e){var t=e.doc,r=e.onVisit,o=e.hackCss,l=o===void 0?!0:o,a=e.afterAppend,u=e.cache,d=e.mirror,f=d===void 0?new rd:d,h=Go(n,{doc:t,mirror:f,skipChild:!1,hackCss:l,afterAppend:a,cache:u});return KI(f,function(m){r&&r(m),JI(m,f)}),h}function At(n,e,t=document){const r={capture:!0,passive:!0};return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}const Oi=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let ea={map:{},getId(){return console.error(Oi),-1},getNode(){return console.error(Oi),null},removeNodeFromMap(){console.error(Oi)},has(){return console.error(Oi),!1},reset(){console.error(Oi)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(ea=new Proxy(ea,{get(n,e,t){return e==="map"&&console.error(Oi),Reflect.get(n,e,t)}}));function Li(n,e,t={}){let r=null,o=0;return function(...l){const a=Date.now();!o&&t.leading===!1&&(o=a);const u=e-(a-o),d=this;u<=0||u>e?(r&&(clearTimeout(r),r=null),o=a,n.apply(d,l)):!r&&t.trailing!==!1&&(r=setTimeout(()=>{o=t.leading===!1?0:Date.now(),r=null,n.apply(d,l)},u))}}function Ko(n,e,t,r,o=window){const l=o.Object.getOwnPropertyDescriptor(n,e);return o.Object.defineProperty(n,e,r?t:{set(a){setTimeout(()=>{t.set.call(this,a)},0),l&&l.set&&l.set.call(this,a)}}),()=>Ko(n,e,l||{},!0)}function fr(n,e,t){try{if(!(e in n))return()=>{};const r=n[e],o=t(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),n[e]=o,()=>{n[e]=r}}catch{return()=>{}}}function ld(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ad(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Nt(n,e,t,r){if(!n)return!1;const o=n.nodeType===n.ELEMENT_NODE?n:n.parentElement;if(!o)return!1;if(typeof e=="string"){if(o.classList.contains(e)||r&&o.closest("."+e)!==null)return!0}else if(Xl(o,e,r))return!0;return!!(t&&(n.matches(t)||r&&o.closest(t)!==null))}function cy(n,e){return e.getId(n)!==-1}function ta(n,e){return e.getId(n)===$o}function ud(n,e){if(Ho(n))return!1;const t=e.getId(n);return e.has(t)?n.parentNode&&n.parentNode.nodeType===n.DOCUMENT_NODE?!1:n.parentNode?ud(n.parentNode,e):!0:!0}function cd(n){return!!n.changedTouches}function dd(n=window){"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===t)return!0;while(t=t&&t.parentNode);return!1})}function dy(n){const e={},t=(o,l)=>{const a={value:o,parent:l,children:[]};return e[o.node.id]=a,a},r=[];for(const o of n){const{nextId:l,parentId:a}=o;if(l&&l in e){const u=e[l];if(u.parent){const d=u.parent.children.indexOf(u);u.parent.children.splice(d,0,t(o,u.parent))}else{const d=r.indexOf(u);r.splice(d,0,t(o,null))}continue}if(a in e){const u=e[a];u.children.push(t(o,u));continue}r.push(t(o,null))}return r}function fd(n,e){e(n.value);for(let t=n.children.length-1;t>=0;t--)fd(n.children[t],e)}function Di(n,e){return!!(n.nodeName==="IFRAME"&&e.getMeta(n))}function pd(n,e){return!!(n.nodeName==="LINK"&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&n.getAttribute("rel")==="stylesheet"&&e.getMeta(n))}function hd(n,e){var t,r;const o=(r=(t=n.ownerDocument)===null||t===void 0?void 0:t.defaultView)===null||r===void 0?void 0:r.frameElement;if(!o||o===e)return{x:0,y:0,relativeScale:1,absoluteScale:1};const l=o.getBoundingClientRect(),a=hd(o,e),u=l.height/o.clientHeight;return{x:l.x*a.relativeScale+a.x,y:l.y*a.relativeScale+a.y,relativeScale:u,absoluteScale:a.absoluteScale*u}}function qr(n){return!!(n!=null&&n.shadowRoot)}function Pi(n,e){const t=n[e[0]];return e.length===1?t:Pi(t.cssRules[e[1]].cssRules,e.slice(2))}function md(n){const e=[...n],t=e.pop();return{positions:e,index:t}}function fy(n){const e=new Set,t=[];for(let r=n.length;r--;){const o=n[r];e.has(o.id)||(t.push(o),e.add(o.id))}return t}class gd{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return(t=this.styleIDMap.get(e))!==null&&t!==void 0?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return t===void 0?r=this.id++:r=t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}const QI=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:gd,get _mirror(){return ea},getBaseDimension:hd,getNestedRule:Pi,getPositionsAndIndex:md,getWindowHeight:ld,getWindowWidth:ad,hasShadowRoot:qr,hookSetter:Ko,isAncestorRemoved:ud,isBlocked:Nt,isIgnored:ta,isSerialized:cy,isSerializedIframe:Di,isSerializedStylesheet:pd,isTouchEvent:cd,iterateResolveTree:fd,on:At,patch:fr,polyfill:dd,queueToResolveTrees:dy,throttle:Li,uniqueTextMutations:fy},Symbol.toStringTag,{value:"Module"}));var de=(n=>(n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n))(de||{}),oe=(n=>(n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n))(oe||{}),yt=(n=>(n[n.MouseUp=0]="MouseUp",n[n.MouseDown=1]="MouseDown",n[n.Click=2]="Click",n[n.ContextMenu=3]="ContextMenu",n[n.DblClick=4]="DblClick",n[n.Focus=5]="Focus",n[n.Blur=6]="Blur",n[n.TouchStart=7]="TouchStart",n[n.TouchMove_Departed=8]="TouchMove_Departed",n[n.TouchEnd=9]="TouchEnd",n[n.TouchCancel=10]="TouchCancel",n))(yt||{}),Un=(n=>(n[n["2D"]=0]="2D",n[n.WebGL=1]="WebGL",n[n.WebGL2=2]="WebGL2",n))(Un||{}),Pe=(n=>(n.Start="start",n.Pause="pause",n.Resume="resume",n.Resize="resize",n.Finish="finish",n.FullsnapshotRebuilded="fullsnapshot-rebuilded",n.LoadStylesheetStart="load-stylesheet-start",n.LoadStylesheetEnd="load-stylesheet-end",n.SkipStart="skip-start",n.SkipEnd="skip-end",n.MouseInteraction="mouse-interaction",n.EventCast="event-cast",n.CustomEvent="custom-event",n.Flush="flush",n.StateChange="state-change",n.PlayBack="play-back",n.Destroy="destroy",n))(Pe||{});function py(n){return"__ln"in n}class ZI{constructor(){this.length=0,this.head=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let r=0;r<e;r++)t=(t==null?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&py(e.previousSibling)){const r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&py(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)}}const hy=(n,e)=>`${n}@${e}`;class qI{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new ZI,r=u=>{let d=u,f=$o;for(;f===$o;)d=d&&d.nextSibling,f=d&&this.mirror.getId(d);return f},o=u=>{var d,f,h,m;let y=null;((f=(d=u.getRootNode)===null||d===void 0?void 0:d.call(u))===null||f===void 0?void 0:f.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&u.getRootNode().host&&(y=u.getRootNode().host);let w=y;for(;((m=(h=w==null?void 0:w.getRootNode)===null||h===void 0?void 0:h.call(w))===null||m===void 0?void 0:m.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&w.getRootNode().host;)w=w.getRootNode().host;const k=!this.doc.contains(u)&&(!w||!this.doc.contains(w));if(!u.parentNode||k)return;const x=Ho(u.parentNode)?this.mirror.getId(y):this.mirror.getId(u.parentNode),b=r(u);if(x===-1||b===-1)return t.addNode(u);const E=Ri(u,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:T=>{Di(T,this.mirror)&&this.iframeManager.addIframe(T),pd(T,this.mirror)&&this.stylesheetManager.trackLinkElement(T),qr(u)&&this.shadowDomManager.addShadowRoot(u.shadowRoot,this.doc)},onIframeLoad:(T,M)=>{this.iframeManager.attachIframe(T,M),this.shadowDomManager.observeAttachShadow(T)},onStylesheetLoad:(T,M)=>{this.stylesheetManager.attachLinkElement(T,M)}});E&&e.push({parentId:x,nextId:b,node:E})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const u of Array.from(this.movedSet.values()))my(this.removes,u,this.mirror)&&!this.movedSet.has(u.parentNode)||o(u);for(const u of Array.from(this.addedSet.values()))!yy(this.droppedSet,u)&&!my(this.removes,u,this.mirror)||yy(this.movedSet,u)?o(u):this.droppedSet.add(u);let l=null;for(;t.length;){let u=null;if(l){const d=this.mirror.getId(l.value.parentNode),f=r(l.value);d!==-1&&f!==-1&&(u=l)}if(!u)for(let d=t.length-1;d>=0;d--){const f=t.get(d);if(f){const h=this.mirror.getId(f.value.parentNode);if(r(f.value)===-1)continue;if(h!==-1){u=f;break}else{const y=f.value;if(y.parentNode&&y.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const w=y.parentNode.host;if(this.mirror.getId(w)!==-1){u=f;break}}}}}if(!u){for(;t.head;)t.removeNode(t.head.value);break}l=u.previous,t.removeNode(u.value),o(u.value)}const a={texts:this.texts.map(u=>({id:this.mirror.getId(u.node),value:u.value})).filter(u=>this.mirror.has(u.id)),attributes:this.attributes.map(u=>({id:this.mirror.getId(u.node),attributes:u.attributes})).filter(u=>this.mirror.has(u.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!ta(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;!Nt(e.target,this.blockClass,this.blockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:iy(e.target,this.maskTextClass,this.maskTextSelector)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let r=e.target.getAttribute(e.attributeName);if(e.attributeName==="value"&&(r=id({maskInputOptions:this.maskInputOptions,tagName:e.target.tagName,type:e.target.getAttribute("type"),value:r,maskInputFn:this.maskInputFn})),Nt(e.target,this.blockClass,this.blockSelector,!1)||r===e.oldValue)return;let o=this.attributes.find(l=>l.node===e.target);if(t.tagName==="IFRAME"&&e.attributeName==="src"&&!this.keepIframeSrcFn(r))if(!t.contentDocument)e.attributeName="rr_src";else return;if(o||(o={node:e.target,attributes:{}},this.attributes.push(o)),e.attributeName==="style"){const l=this.doc.createElement("span");e.oldValue&&l.setAttribute("style",e.oldValue),(o.attributes.style===void 0||o.attributes.style===null)&&(o.attributes.style={});const a=o.attributes.style;for(const u of Array.from(t.style)){const d=t.style.getPropertyValue(u),f=t.style.getPropertyPriority(u);(d!==l.style.getPropertyValue(u)||f!==l.style.getPropertyPriority(u))&&(f===""?a[u]=d:a[u]=[d,f])}for(const u of Array.from(l.style))t.style.getPropertyValue(u)===""&&(a[u]=!1)}else o.attributes[e.attributeName]=ry(this.doc,t.tagName,e.attributeName,r);break}case"childList":{if(Nt(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const r=this.mirror.getId(t),o=Ho(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Nt(e.target,this.blockClass,this.blockSelector,!1)||ta(t,this.mirror)||!cy(t,this.mirror)||(this.addedSet.has(t)?(yd(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&r===-1||ud(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[hy(r,o)]?yd(this.movedSet,t):this.removes.push({parentId:o,id:r,isShadow:Ho(e.target)&&Vo(e.target)?!0:void 0})),this.mapRemoves.push(t))});break}}},this.genAdds=(e,t)=>{if(this.mirror.hasNode(e)){if(ta(e,this.mirror))return;this.movedSet.add(e);let r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&r!==-1&&(this.movedMap[hy(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Nt(e,this.blockClass,this.blockSelector,!1)||e.childNodes.forEach(r=>this.genAdds(r))}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function yd(n,e){n.delete(e),e.childNodes.forEach(t=>yd(n,t))}function my(n,e,t){return n.length===0?!1:gy(n,e,t)}function gy(n,e,t){const{parentNode:r}=e;if(!r)return!1;const o=t.getId(r);return n.some(l=>l.id===o)?!0:gy(n,r,t)}function yy(n,e){return n.size===0?!1:vy(n,e)}function vy(n,e){const{parentNode:t}=e;return t?n.has(t)?!0:vy(n,t):!1}const Xr=[],wy=typeof CSSGroupingRule<"u",ky=typeof CSSMediaRule<"u",Sy=typeof CSSSupportsRule<"u",xy=typeof CSSConditionRule<"u";function Jo(n){try{if("composedPath"in n){const e=n.composedPath();if(e.length)return e[0]}else if("path"in n&&n.path.length)return n.path[0];return n.target}catch{return n.target}}function Cy(n,e){var t,r;const o=new qI;Xr.push(o),o.init(n);let l=window.MutationObserver||window.__rrMutationObserver;const a=(r=(t=window==null?void 0:window.Zone)===null||t===void 0?void 0:t.__symbol__)===null||r===void 0?void 0:r.call(t,"MutationObserver");a&&window[a]&&(l=window[a]);const u=new l(o.processMutations.bind(o));return u.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),u}function XI({mousemoveCb:n,sampling:e,doc:t,mirror:r}){if(e.mousemove===!1)return()=>{};const o=typeof e.mousemove=="number"?e.mousemove:50,l=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let a=[],u;const d=Li(m=>{const y=Date.now()-u;n(a.map(w=>(w.timeOffset-=y,w)),m),a=[],u=null},l),f=Li(m=>{const y=Jo(m),{clientX:w,clientY:k}=cd(m)?m.changedTouches[0]:m;u||(u=Date.now()),a.push({x:w,y:k,id:r.getId(y),timeOffset:Date.now()-u}),d(typeof DragEvent<"u"&&m instanceof DragEvent?oe.Drag:m instanceof MouseEvent?oe.MouseMove:oe.TouchMove)},o,{trailing:!1}),h=[At("mousemove",f,t),At("touchmove",f,t),At("drag",f,t)];return()=>{h.forEach(m=>m())}}function eT({mouseInteractionCb:n,doc:e,mirror:t,blockClass:r,blockSelector:o,sampling:l}){if(l.mouseInteraction===!1)return()=>{};const a=l.mouseInteraction===!0||l.mouseInteraction===void 0?{}:l.mouseInteraction,u=[],d=f=>h=>{const m=Jo(h);if(Nt(m,r,o,!0))return;const y=cd(h)?h.changedTouches[0]:h;if(!y)return;const w=t.getId(m),{clientX:k,clientY:x}=y;n({type:yt[f],id:w,x:k,y:x})};return Object.keys(yt).filter(f=>Number.isNaN(Number(f))&&!f.endsWith("_Departed")&&a[f]!==!1).forEach(f=>{const h=f.toLowerCase(),m=d(f);u.push(At(h,m,e))}),()=>{u.forEach(f=>f())}}function by({scrollCb:n,doc:e,mirror:t,blockClass:r,blockSelector:o,sampling:l}){const a=Li(u=>{const d=Jo(u);if(!d||Nt(d,r,o,!0))return;const f=t.getId(d);if(d===e){const h=e.scrollingElement||e.documentElement;n({id:f,x:h.scrollLeft,y:h.scrollTop})}else n({id:f,x:d.scrollLeft,y:d.scrollTop})},l.scroll||100);return At("scroll",a,e)}function tT({viewportResizeCb:n}){let e=-1,t=-1;const r=Li(()=>{const o=ld(),l=ad();(e!==o||t!==l)&&(n({width:Number(l),height:Number(o)}),e=o,t=l)},200);return At("resize",r,window)}function Ey(n,e){const t=Object.assign({},n);return e||delete t.userTriggered,t}const nT=["INPUT","TEXTAREA","SELECT"],Iy=new WeakMap;function rT({inputCb:n,doc:e,mirror:t,blockClass:r,blockSelector:o,ignoreClass:l,maskInputOptions:a,maskInputFn:u,sampling:d,userTriggeredOnInput:f}){function h(E){let T=Jo(E);const M=E.isTrusted;if(T&&T.tagName==="OPTION"&&(T=T.parentElement),!T||!T.tagName||nT.indexOf(T.tagName)<0||Nt(T,r,o,!0))return;const _=T.type;if(T.classList.contains(l))return;let F=T.value,z=!1;_==="radio"||_==="checkbox"?z=T.checked:(a[T.tagName.toLowerCase()]||a[_])&&(F=id({maskInputOptions:a,tagName:T.tagName,type:_,value:F,maskInputFn:u})),m(T,Ey({text:F,isChecked:z,userTriggered:M},f));const Y=T.name;_==="radio"&&Y&&z&&e.querySelectorAll(`input[type="radio"][name="${Y}"]`).forEach(j=>{j!==T&&m(j,Ey({text:j.value,isChecked:!z,userTriggered:!1},f))})}function m(E,T){const M=Iy.get(E);if(!M||M.text!==T.text||M.isChecked!==T.isChecked){Iy.set(E,T);const _=t.getId(E);n(Object.assign(Object.assign({},T),{id:_}))}}const w=(d.input==="last"?["change"]:["input","change"]).map(E=>At(E,h,e)),k=e.defaultView;if(!k)return()=>{w.forEach(E=>E())};const x=k.Object.getOwnPropertyDescriptor(k.HTMLInputElement.prototype,"value"),b=[[k.HTMLInputElement.prototype,"value"],[k.HTMLInputElement.prototype,"checked"],[k.HTMLSelectElement.prototype,"value"],[k.HTMLTextAreaElement.prototype,"value"],[k.HTMLSelectElement.prototype,"selectedIndex"],[k.HTMLOptionElement.prototype,"selected"]];return x&&x.set&&w.push(...b.map(E=>Ko(E[0],E[1],{set(){h({target:this})}},!1,k))),()=>{w.forEach(E=>E())}}function na(n){const e=[];function t(r,o){if(wy&&r.parentRule instanceof CSSGroupingRule||ky&&r.parentRule instanceof CSSMediaRule||Sy&&r.parentRule instanceof CSSSupportsRule||xy&&r.parentRule instanceof CSSConditionRule){const a=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(a)}else if(r.parentStyleSheet){const a=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(a)}return o}return t(n,e)}function pr(n,e,t){let r,o;return n?(n.ownerNode?r=e.getId(n.ownerNode):o=t.getId(n),{styleId:o,id:r}):{}}function iT({styleSheetRuleCb:n,mirror:e,stylesheetManager:t},{win:r}){const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=function(h,m){const{id:y,styleId:w}=pr(this,e,t.styleMirror);return(y&&y!==-1||w&&w!==-1)&&n({id:y,styleId:w,adds:[{rule:h,index:m}]}),o.apply(this,[h,m])};const l=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=function(h){const{id:m,styleId:y}=pr(this,e,t.styleMirror);return(m&&m!==-1||y&&y!==-1)&&n({id:m,styleId:y,removes:[{index:h}]}),l.apply(this,[h])};let a;r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=function(h){const{id:m,styleId:y}=pr(this,e,t.styleMirror);return(m&&m!==-1||y&&y!==-1)&&n({id:m,styleId:y,replace:h}),a.apply(this,[h])});let u;r.CSSStyleSheet.prototype.replaceSync&&(u=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=function(h){const{id:m,styleId:y}=pr(this,e,t.styleMirror);return(m&&m!==-1||y&&y!==-1)&&n({id:m,styleId:y,replaceSync:h}),u.apply(this,[h])});const d={};wy?d.CSSGroupingRule=r.CSSGroupingRule:(ky&&(d.CSSMediaRule=r.CSSMediaRule),xy&&(d.CSSConditionRule=r.CSSConditionRule),Sy&&(d.CSSSupportsRule=r.CSSSupportsRule));const f={};return Object.entries(d).forEach(([h,m])=>{f[h]={insertRule:m.prototype.insertRule,deleteRule:m.prototype.deleteRule},m.prototype.insertRule=function(y,w){const{id:k,styleId:x}=pr(this.parentStyleSheet,e,t.styleMirror);return(k&&k!==-1||x&&x!==-1)&&n({id:k,styleId:x,adds:[{rule:y,index:[...na(this),w||0]}]}),f[h].insertRule.apply(this,[y,w])},m.prototype.deleteRule=function(y){const{id:w,styleId:k}=pr(this.parentStyleSheet,e,t.styleMirror);return(w&&w!==-1||k&&k!==-1)&&n({id:w,styleId:k,removes:[{index:[...na(this),y]}]}),f[h].deleteRule.apply(this,[y])}}),()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=l,a&&(r.CSSStyleSheet.prototype.replace=a),u&&(r.CSSStyleSheet.prototype.replaceSync=u),Object.entries(d).forEach(([h,m])=>{m.prototype.insertRule=f[h].insertRule,m.prototype.deleteRule=f[h].deleteRule})}}function Ty({mirror:n,stylesheetManager:e},t){var r,o,l;let a=null;t.nodeName==="#document"?a=n.getId(t):a=n.getId(t.host);const u=t.nodeName==="#document"?(r=t.defaultView)===null||r===void 0?void 0:r.Document:(l=(o=t.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||l===void 0?void 0:l.ShadowRoot,d=Object.getOwnPropertyDescriptor(u==null?void 0:u.prototype,"adoptedStyleSheets");return a===null||a===-1||!u||!d?()=>{}:(Object.defineProperty(t,"adoptedStyleSheets",{configurable:d.configurable,enumerable:d.enumerable,get(){var f;return(f=d.get)===null||f===void 0?void 0:f.call(this)},set(f){var h;const m=(h=d.set)===null||h===void 0?void 0:h.call(this,f);if(a!==null&&a!==-1)try{e.adoptStyleSheets(f,a)}catch{}return m}}),()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:d.configurable,enumerable:d.enumerable,get:d.get,set:d.set})})}function oT({styleDeclarationCb:n,mirror:e,ignoreCSSAttributes:t,stylesheetManager:r},{win:o}){const l=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(u,d,f){var h;if(t.has(u))return l.apply(this,[u,d,f]);const{id:m,styleId:y}=pr((h=this.parentRule)===null||h===void 0?void 0:h.parentStyleSheet,e,r.styleMirror);return(m&&m!==-1||y&&y!==-1)&&n({id:m,styleId:y,set:{property:u,value:d,priority:f},index:na(this.parentRule)}),l.apply(this,[u,d,f])};const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(u){var d;if(t.has(u))return a.apply(this,[u]);const{id:f,styleId:h}=pr((d=this.parentRule)===null||d===void 0?void 0:d.parentStyleSheet,e,r.styleMirror);return(f&&f!==-1||h&&h!==-1)&&n({id:f,styleId:h,remove:{property:u},index:na(this.parentRule)}),a.apply(this,[u])},()=>{o.CSSStyleDeclaration.prototype.setProperty=l,o.CSSStyleDeclaration.prototype.removeProperty=a}}function sT({mediaInteractionCb:n,blockClass:e,blockSelector:t,mirror:r,sampling:o}){const l=u=>Li(d=>{const f=Jo(d);if(!f||Nt(f,e,t,!0))return;const{currentTime:h,volume:m,muted:y,playbackRate:w}=f;n({type:u,id:r.getId(f),currentTime:h,volume:m,muted:y,playbackRate:w})},o.media||500),a=[At("play",l(0)),At("pause",l(1)),At("seeked",l(2)),At("volumechange",l(3)),At("ratechange",l(4))];return()=>{a.forEach(u=>u())}}function lT({fontCb:n,doc:e}){const t=e.defaultView;if(!t)return()=>{};const r=[],o=new WeakMap,l=t.FontFace;t.FontFace=function(d,f,h){const m=new l(d,f,h);return o.set(m,{family:d,buffer:typeof f!="string",descriptors:h,fontSource:typeof f=="string"?f:JSON.stringify(Array.from(new Uint8Array(f)))}),m};const a=fr(e.fonts,"add",function(u){return function(d){return setTimeout(()=>{const f=o.get(d);f&&(n(f),o.delete(d))},0),u.apply(this,[d])}});return r.push(()=>{t.FontFace=l}),r.push(a),()=>{r.forEach(u=>u())}}function aT(n){const{doc:e,mirror:t,blockClass:r,blockSelector:o,selectionCb:l}=n;let a=!0;const u=()=>{const d=e.getSelection();if(!d||a&&(d!=null&&d.isCollapsed))return;a=d.isCollapsed||!1;const f=[],h=d.rangeCount||0;for(let m=0;m<h;m++){const y=d.getRangeAt(m),{startContainer:w,startOffset:k,endContainer:x,endOffset:b}=y;Nt(w,r,o,!0)||Nt(x,r,o,!0)||f.push({start:t.getId(w),startOffset:k,end:t.getId(x),endOffset:b})}l({ranges:f})};return u(),At("selectionchange",u)}function uT(n,e){const{mutationCb:t,mousemoveCb:r,mouseInteractionCb:o,scrollCb:l,viewportResizeCb:a,inputCb:u,mediaInteractionCb:d,styleSheetRuleCb:f,styleDeclarationCb:h,canvasMutationCb:m,fontCb:y,selectionCb:w}=n;n.mutationCb=(...k)=>{e.mutation&&e.mutation(...k),t(...k)},n.mousemoveCb=(...k)=>{e.mousemove&&e.mousemove(...k),r(...k)},n.mouseInteractionCb=(...k)=>{e.mouseInteraction&&e.mouseInteraction(...k),o(...k)},n.scrollCb=(...k)=>{e.scroll&&e.scroll(...k),l(...k)},n.viewportResizeCb=(...k)=>{e.viewportResize&&e.viewportResize(...k),a(...k)},n.inputCb=(...k)=>{e.input&&e.input(...k),u(...k)},n.mediaInteractionCb=(...k)=>{e.mediaInteaction&&e.mediaInteaction(...k),d(...k)},n.styleSheetRuleCb=(...k)=>{e.styleSheetRule&&e.styleSheetRule(...k),f(...k)},n.styleDeclarationCb=(...k)=>{e.styleDeclaration&&e.styleDeclaration(...k),h(...k)},n.canvasMutationCb=(...k)=>{e.canvasMutation&&e.canvasMutation(...k),m(...k)},n.fontCb=(...k)=>{e.font&&e.font(...k),y(...k)},n.selectionCb=(...k)=>{e.selection&&e.selection(...k),w(...k)}}function cT(n,e={}){const t=n.doc.defaultView;if(!t)return()=>{};uT(n,e);const r=Cy(n,n.doc),o=XI(n),l=eT(n),a=by(n),u=tT(n),d=rT(n),f=sT(n),h=iT(n,{win:t}),m=Ty(n,n.doc),y=oT(n,{win:t}),w=n.collectFonts?lT(n):()=>{},k=aT(n),x=[];for(const b of n.plugins)x.push(b.observer(b.callback,t,b.options));return()=>{Xr.forEach(b=>b.reset()),r.disconnect(),o(),l(),a(),u(),d(),f(),h(),m(),y(),w(),k(),x.forEach(b=>b())}}class Ay{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,r,o){const l=r||this.getIdToRemoteIdMap(e),a=o||this.getRemoteIdToIdMap(e);let u=l.get(t);return u||(u=this.generateIdFn(),l.set(t,u),a.set(u,t)),u}getIds(e,t){const r=this.getIdToRemoteIdMap(e),o=this.getRemoteIdToIdMap(e);return t.map(l=>this.getId(e,l,r,o))}getRemoteId(e,t,r){const o=r||this.getRemoteIdToIdMap(e);if(typeof t!="number")return t;const l=o.get(t);return l||-1}getRemoteIds(e,t){const r=this.getRemoteIdToIdMap(e);return t.map(o=>this.getRemoteId(e,o,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class dT{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Ay(ty),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Ay(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(r=this.loadListener)===null||r===void 0||r.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){if(e.data.type==="rrweb"){if(!e.source)return;const r=this.crossOriginIframeMap.get(e.source);if(!r)return;const o=this.transformCrossOriginEvent(r,e.data.event);o&&this.wrappedEmit(o,e.data.isCheckout)}}transformCrossOriginEvent(e,t){var r;switch(t.type){case de.FullSnapshot:return this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e),{timestamp:t.timestamp,type:de.IncrementalSnapshot,data:{source:oe.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case de.Meta:case de.Load:case de.DomContentLoaded:return!1;case de.Plugin:return t;case de.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case de.IncrementalSnapshot:switch(t.data.source){case oe.Mutation:return t.data.adds.forEach(o=>{this.replaceIds(o,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,e)}),t.data.removes.forEach(o=>{this.replaceIds(o,e,["parentId","id"])}),t.data.attributes.forEach(o=>{this.replaceIds(o,e,["id"])}),t.data.texts.forEach(o=>{this.replaceIds(o,e,["id"])}),t;case oe.Drag:case oe.TouchMove:case oe.MouseMove:return t.data.positions.forEach(o=>{this.replaceIds(o,e,["id"])}),t;case oe.ViewportResize:return!1;case oe.MediaInteraction:case oe.MouseInteraction:case oe.Scroll:case oe.CanvasMutation:case oe.Input:return this.replaceIds(t.data,e,["id"]),t;case oe.StyleSheetRule:case oe.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case oe.Font:return t;case oe.Selection:return t.data.ranges.forEach(o=>{this.replaceIds(o,e,["start","end"])}),t;case oe.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),(r=t.data.styles)===null||r===void 0||r.forEach(o=>{this.replaceStyleIds(o,e,["styleId"])}),t}}}replace(e,t,r,o){for(const l of o)!Array.isArray(t[l])&&typeof t[l]!="number"||(Array.isArray(t[l])?t[l]=e.getIds(r,t[l]):t[l]=e.getId(r,t[l]));return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,t)})}}class fT{constructor(e){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;const t=this;this.restorePatches.push(fr(Element.prototype,"attachShadow",function(r){return function(o){const l=r.call(this,o);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),l}}))}addShadowRoot(e,t){Vo(e)&&(this.shadowDoms.has(e)||(this.shadowDoms.add(e),Cy(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),by(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),Ty({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e)},0)))}observeAttachShadow(e){if(e.contentWindow){const t=this;this.restorePatches.push(fr(e.contentWindow.HTMLElement.prototype,"attachShadow",function(r){return function(o){const l=r.call(this,o);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),l}}))}}reset(){this.restorePatches.forEach(e=>e()),this.shadowDoms=new WeakSet}}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function pT(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function hr(n,e,t,r){function o(l){return l instanceof t?l:new t(function(a){a(l)})}return new(t||(t=Promise))(function(l,a){function u(h){try{f(r.next(h))}catch(m){a(m)}}function d(h){try{f(r.throw(h))}catch(m){a(m)}}function f(h){h.done?l(h.value):o(h.value).then(u,d)}f((r=r.apply(n,[])).next())})}for(var _i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yo=typeof Uint8Array>"u"?[]:new Uint8Array(256),ra=0;ra<_i.length;ra++)Yo[_i.charCodeAt(ra)]=ra;var hT=function(n){var e=new Uint8Array(n),t,r=e.length,o="";for(t=0;t<r;t+=3)o+=_i[e[t]>>2],o+=_i[(e[t]&3)<<4|e[t+1]>>4],o+=_i[(e[t+1]&15)<<2|e[t+2]>>6],o+=_i[e[t+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},mT=function(n){var e=n.length*.75,t=n.length,r,o=0,l,a,u,d;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var f=new ArrayBuffer(e),h=new Uint8Array(f);for(r=0;r<t;r+=4)l=Yo[n.charCodeAt(r)],a=Yo[n.charCodeAt(r+1)],u=Yo[n.charCodeAt(r+2)],d=Yo[n.charCodeAt(r+3)],h[o++]=l<<2|a>>4,h[o++]=(a&15)<<4|u>>2,h[o++]=(u&3)<<6|d&63;return f};const Ny=new Map;function gT(n,e){let t=Ny.get(n);return t||(t=new Map,Ny.set(n,t)),t.has(e)||t.set(e,[]),t.get(e)}const My=(n,e,t)=>{if(!n||!(Oy(n,e)||typeof n=="object"))return;const r=n.constructor.name,o=gT(t,r);let l=o.indexOf(n);return l===-1&&(l=o.length,o.push(n)),l};function ia(n,e,t){if(n instanceof Array)return n.map(r=>ia(r,e,t));if(n===null)return n;if(n instanceof Float32Array||n instanceof Float64Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Uint8Array||n instanceof Uint16Array||n instanceof Int16Array||n instanceof Int8Array||n instanceof Uint8ClampedArray)return{rr_type:n.constructor.name,args:[Object.values(n)]};if(n instanceof ArrayBuffer){const r=n.constructor.name,o=hT(n);return{rr_type:r,base64:o}}else{if(n instanceof DataView)return{rr_type:n.constructor.name,args:[ia(n.buffer,e,t),n.byteOffset,n.byteLength]};if(n instanceof HTMLImageElement){const r=n.constructor.name,{src:o}=n;return{rr_type:r,src:o}}else if(n instanceof HTMLCanvasElement){const r="HTMLImageElement",o=n.toDataURL();return{rr_type:r,src:o}}else{if(n instanceof ImageData)return{rr_type:n.constructor.name,args:[ia(n.data,e,t),n.width,n.height]};if(Oy(n,e)||typeof n=="object"){const r=n.constructor.name,o=My(n,e,t);return{rr_type:r,index:o}}}}return n}const Ry=(n,e,t)=>[...n].map(r=>ia(r,e,t)),Oy=(n,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof e[o]=="function").find(o=>n instanceof e[o]);function yT(n,e,t,r){const o=[],l=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const a of l)try{if(typeof e.CanvasRenderingContext2D.prototype[a]!="function")continue;const u=fr(e.CanvasRenderingContext2D.prototype,a,function(d){return function(...f){return Nt(this.canvas,t,r,!0)||setTimeout(()=>{const h=Ry([...f],e,this);n(this.canvas,{type:Un["2D"],property:a,args:h})},0),d.apply(this,f)}});o.push(u)}catch{const d=Ko(e.CanvasRenderingContext2D.prototype,a,{set(f){n(this.canvas,{type:Un["2D"],property:a,args:[f],setter:!0})}});o.push(d)}return()=>{o.forEach(a=>a())}}function Ly(n,e,t){const r=[];try{const o=fr(n.HTMLCanvasElement.prototype,"getContext",function(l){return function(a,...u){return Nt(this,e,t,!0)||"__context"in this||(this.__context=a),l.apply(this,[a,...u])}});r.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{r.forEach(o=>o())}}function Dy(n,e,t,r,o,l,a){const u=[],d=Object.getOwnPropertyNames(n);for(const f of d)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(f))try{if(typeof n[f]!="function")continue;const h=fr(n,f,function(m){return function(...y){const w=m.apply(this,y);if(My(w,a,this),!Nt(this.canvas,r,o,!0)){const k=Ry([...y],a,this),x={type:e,property:f,args:k};t(this.canvas,x)}return w}});u.push(h)}catch{const m=Ko(n,f,{set(y){t(this.canvas,{type:e,property:f,args:[y],setter:!0})}});u.push(m)}return u}function vT(n,e,t,r,o){const l=[];return l.push(...Dy(e.WebGLRenderingContext.prototype,Un.WebGL,n,t,r,o,e)),typeof e.WebGL2RenderingContext<"u"&&l.push(...Dy(e.WebGL2RenderingContext.prototype,Un.WebGL2,n,t,r,o,e)),()=>{l.forEach(a=>a())}}var Py=null;try{var wT=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof require=="function"&&require("worker_threads");Py=wT.Worker}catch{}function kT(n,e){return Buffer.from(n,"base64").toString("utf8")}function ST(n,e,t){var r=kT(n),o=r.indexOf(`
`,10)+1,l=r.substring(o)+"";return function(u){return new Py(l,Object.assign({},u,{eval:!0}))}}function xT(n,e){var t=atob(n);return t}function CT(n,e,t){var r=xT(n),o=r.indexOf(`
`,10)+1,l=r.substring(o)+"",a=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(a)}function bT(n,e,t){var r;return function(l){return r=r||CT(n),new Worker(r,l)}}var ET=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function IT(){return ET}function TT(n,e,t){return IT()?ST(n):bT(n)}var AT=TT("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=");class NT{constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(d,f)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(d)||this.pendingCanvasMutations.set(d,[]),this.pendingCanvasMutations.get(d).push(f)};const{sampling:t="all",win:r,blockClass:o,blockSelector:l,recordCanvas:a,dataURLOptions:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,a&&t==="all"&&this.initCanvasMutationObserver(r,o,l),a&&typeof t=="number"&&this.initCanvasFPSObserver(t,r,o,l,{dataURLOptions:u})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,r,o,l){const a=Ly(t,r,o),u=new Map,d=new AT;d.onmessage=k=>{const{id:x}=k.data;if(u.set(x,!1),!("base64"in k.data))return;const{base64:b,type:E,width:T,height:M}=k.data;this.mutationCb({id:x,type:Un["2D"],commands:[{property:"clearRect",args:[0,0,T,M]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:b}],type:E}]},0,0]}]})};const f=1e3/e;let h=0,m;const y=()=>{const k=[];return t.document.querySelectorAll("canvas").forEach(x=>{Nt(x,r,o,!0)||k.push(x)}),k},w=k=>{if(h&&k-h<f){m=requestAnimationFrame(w);return}h=k,y().forEach(x=>hr(this,void 0,void 0,function*(){var b;const E=this.mirror.getId(x);if(u.get(E))return;if(u.set(E,!0),["webgl","webgl2"].includes(x.__context)){const M=x.getContext(x.__context);((b=M==null?void 0:M.getContextAttributes())===null||b===void 0?void 0:b.preserveDrawingBuffer)===!1&&(M==null||M.clear(M.COLOR_BUFFER_BIT))}const T=yield createImageBitmap(x);d.postMessage({id:E,bitmap:T,width:x.width,height:x.height,dataURLOptions:l.dataURLOptions},[T])})),m=requestAnimationFrame(w)};m=requestAnimationFrame(w),this.resetObservers=()=>{a(),cancelAnimationFrame(m)}}initCanvasMutationObserver(e,t,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=Ly(e,t,r),l=yT(this.processMutation.bind(this),e,t,r),a=vT(this.processMutation.bind(this),e,t,r,this.mirror);this.resetObservers=()=>{o(),l(),a()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{const r=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,r)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(e);if(!r||t===-1)return;const o=r.map(a=>pT(a,["type"])),{type:l}=r[0];this.mutationCb({id:t,type:l,commands:o}),this.pendingCanvasMutations.delete(e)}}class MT{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new gd,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;const r={id:t,styleIds:[]},o=[];for(const l of e){let a;if(this.styleMirror.has(l))a=this.styleMirror.getId(l);else{a=this.styleMirror.add(l);const u=Array.from(l.rules||CSSRule);o.push({styleId:a,rules:u.map((d,f)=>({rule:qg(d),index:f}))})}r.styleIds.push(a)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}function ct(n){return Object.assign(Object.assign({},n),{timestamp:Date.now()})}let et,oa,vd,sa=!1;const hn=Xg();function ei(n={}){const{emit:e,checkoutEveryNms:t,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:l=null,ignoreClass:a="rr-ignore",maskTextClass:u="rr-mask",maskTextSelector:d=null,inlineStylesheet:f=!0,maskAllInputs:h,maskInputOptions:m,slimDOMOptions:y,maskInputFn:w,maskTextFn:k,hooks:x,packFn:b,sampling:E={},dataURLOptions:T={},mousemoveWait:M,recordCanvas:_=!1,recordCrossOriginIframes:F=!1,userTriggeredOnInput:z=!1,collectFonts:Y=!1,inlineImages:j=!1,plugins:ve,keepIframeSrcFn:pe=()=>!1,ignoreCSSAttributes:Ie=new Set([])}=n,ce=F?window.parent===window:!0;let fe=!1;if(!ce)try{window.parent.document,fe=!1}catch{fe=!0}if(ce&&!e)throw new Error("emit function is required");M!==void 0&&E.mousemove===void 0&&(E.mousemove=M),hn.reset();const re=h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:m!==void 0?m:{password:!0},te=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};dd();let se,Z=0;const W=Q=>{for(const ke of ve||[])ke.eventProcessor&&(Q=ke.eventProcessor(Q));return b&&(Q=b(Q)),Q};et=(Q,ke)=>{var me;if(!((me=Xr[0])===null||me===void 0)&&me.isFrozen()&&Q.type!==de.FullSnapshot&&!(Q.type===de.IncrementalSnapshot&&Q.data.source===oe.Mutation)&&Xr.forEach(Ee=>Ee.unfreeze()),ce)e==null||e(W(Q),ke);else if(fe){const Ee={type:"rrweb",event:W(Q),isCheckout:ke};window.parent.postMessage(Ee,"*")}if(Q.type===de.FullSnapshot)se=Q,Z=0;else if(Q.type===de.IncrementalSnapshot){if(Q.data.source===oe.Mutation&&Q.data.isAttachIframe)return;Z++;const Ee=r&&Z>=r,vt=t&&Q.timestamp-se.timestamp>t;(Ee||vt)&&oa(!0)}};const P=Q=>{et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.Mutation},Q)}))},C=Q=>et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.Scroll},Q)})),O=Q=>et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.CanvasMutation},Q)})),B=Q=>et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.AdoptedStyleSheet},Q)})),X=new MT({mutationCb:P,adoptedStyleSheetCb:B}),ne=new dT({mirror:hn,mutationCb:P,stylesheetManager:X,recordCrossOriginIframes:F,wrappedEmit:et});for(const Q of ve||[])Q.getMirror&&Q.getMirror({nodeMirror:hn,crossOriginIframeMirror:ne.crossOriginIframeMirror,crossOriginIframeStyleMirror:ne.crossOriginIframeStyleMirror});vd=new NT({recordCanvas:_,mutationCb:O,win:window,blockClass:o,blockSelector:l,mirror:hn,sampling:E.canvas,dataURLOptions:T});const we=new fT({mutationCb:P,scrollCb:C,bypassOptions:{blockClass:o,blockSelector:l,maskTextClass:u,maskTextSelector:d,inlineStylesheet:f,maskInputOptions:re,dataURLOptions:T,maskTextFn:k,maskInputFn:w,recordCanvas:_,inlineImages:j,sampling:E,slimDOMOptions:te,iframeManager:ne,stylesheetManager:X,canvasManager:vd,keepIframeSrcFn:pe},mirror:hn});oa=(Q=!1)=>{var ke,me,Ee,vt,Te,st;et(ct({type:de.Meta,data:{href:window.location.href,width:ad(),height:ld()}}),Q),X.reset(),Xr.forEach(Ge=>Ge.lock());const Mn=UI(document,{mirror:hn,blockClass:o,blockSelector:l,maskTextClass:u,maskTextSelector:d,inlineStylesheet:f,maskAllInputs:re,maskTextFn:k,slimDOM:te,dataURLOptions:T,recordCanvas:_,inlineImages:j,onSerialize:Ge=>{Di(Ge,hn)&&ne.addIframe(Ge),pd(Ge,hn)&&X.trackLinkElement(Ge),qr(Ge)&&we.addShadowRoot(Ge.shadowRoot,document)},onIframeLoad:(Ge,Ui)=>{ne.attachIframe(Ge,Ui),we.observeAttachShadow(Ge)},onStylesheetLoad:(Ge,Ui)=>{X.attachLinkElement(Ge,Ui)},keepIframeSrcFn:pe});if(!Mn)return console.warn("Failed to snapshot the document");et(ct({type:de.FullSnapshot,data:{node:Mn,initialOffset:{left:window.pageXOffset!==void 0?window.pageXOffset:(document==null?void 0:document.documentElement.scrollLeft)||((me=(ke=document==null?void 0:document.body)===null||ke===void 0?void 0:ke.parentElement)===null||me===void 0?void 0:me.scrollLeft)||((Ee=document==null?void 0:document.body)===null||Ee===void 0?void 0:Ee.scrollLeft)||0,top:window.pageYOffset!==void 0?window.pageYOffset:(document==null?void 0:document.documentElement.scrollTop)||((Te=(vt=document==null?void 0:document.body)===null||vt===void 0?void 0:vt.parentElement)===null||Te===void 0?void 0:Te.scrollTop)||((st=document==null?void 0:document.body)===null||st===void 0?void 0:st.scrollTop)||0}}})),Xr.forEach(Ge=>Ge.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&X.adoptStyleSheets(document.adoptedStyleSheets,hn.getId(document))};try{const Q=[];Q.push(At("DOMContentLoaded",()=>{et(ct({type:de.DomContentLoaded,data:{}}))}));const ke=Ee=>{var vt;return cT({mutationCb:P,mousemoveCb:(Te,st)=>et(ct({type:de.IncrementalSnapshot,data:{source:st,positions:Te}})),mouseInteractionCb:Te=>et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.MouseInteraction},Te)})),scrollCb:C,viewportResizeCb:Te=>et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.ViewportResize},Te)})),inputCb:Te=>et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.Input},Te)})),mediaInteractionCb:Te=>et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.MediaInteraction},Te)})),styleSheetRuleCb:Te=>et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.StyleSheetRule},Te)})),styleDeclarationCb:Te=>et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.StyleDeclaration},Te)})),canvasMutationCb:O,fontCb:Te=>et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.Font},Te)})),selectionCb:Te=>{et(ct({type:de.IncrementalSnapshot,data:Object.assign({source:oe.Selection},Te)}))},blockClass:o,ignoreClass:a,maskTextClass:u,maskTextSelector:d,maskInputOptions:re,inlineStylesheet:f,sampling:E,recordCanvas:_,inlineImages:j,userTriggeredOnInput:z,collectFonts:Y,doc:Ee,maskInputFn:w,maskTextFn:k,keepIframeSrcFn:pe,blockSelector:l,slimDOMOptions:te,dataURLOptions:T,mirror:hn,iframeManager:ne,stylesheetManager:X,shadowDomManager:we,canvasManager:vd,ignoreCSSAttributes:Ie,plugins:((vt=ve==null?void 0:ve.filter(Te=>Te.observer))===null||vt===void 0?void 0:vt.map(Te=>({observer:Te.observer,options:Te.options,callback:st=>et(ct({type:de.Plugin,data:{plugin:Te.name,payload:st}}))})))||[]},x)};ne.addLoadListener(Ee=>{Q.push(ke(Ee.contentDocument))});const me=()=>{oa(),Q.push(ke(document)),sa=!0};return document.readyState==="interactive"||document.readyState==="complete"?me():Q.push(At("load",()=>{et(ct({type:de.Load,data:{}})),me()},window)),()=>{Q.forEach(Ee=>Ee()),sa=!1}}catch(Q){console.warn(Q)}}ei.addCustomEvent=(n,e)=>{if(!sa)throw new Error("please add custom event after start recording");et(ct({type:de.Custom,data:{tag:n,payload:e}}))},ei.freezePage=()=>{Xr.forEach(n=>n.freeze())},ei.takeFullSnapshot=n=>{if(!sa)throw new Error("please take full snapshot after start recording");oa(n)},ei.mirror=hn;var Oe;(function(n){n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment"})(Oe||(Oe={}));var RT=function(){function n(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return n.prototype.getId=function(e){var t;if(!e)return-1;var r=(t=this.getMeta(e))===null||t===void 0?void 0:t.id;return r??-1},n.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},n.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},n.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},n.prototype.removeNodeFromMap=function(e){var t=this,r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach(function(o){return t.removeNodeFromMap(o)})},n.prototype.has=function(e){return this.idNodeMap.has(e)},n.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},n.prototype.add=function(e,t){var r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)},n.prototype.replace=function(e,t){var r=this.getNode(e);if(r){var o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(t,o)}this.idNodeMap.set(e,t)},n.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},n}();function OT(){return new RT}function LT(n){const e={},t=/;(?![^(]*\))/g,r=/:(.+)/,o=/\/\*.*?\*\//g;return n.replace(o,"").split(t).forEach(function(l){if(l){const a=l.split(r);a.length>1&&(e[wd(a[0].trim())]=a[1].trim())}}),e}function _y(n){const e=[];for(const t in n){const r=n[t];if(typeof r!="string")continue;const o=FT(t);e.push(`${o}: ${r};`)}return e.join(" ")}const DT=/-([a-z])/g,PT=/^--[a-zA-Z0-9-]+$/,wd=n=>PT.test(n)?n:n.replace(DT,(e,t)=>t?t.toUpperCase():""),_T=/\B([A-Z])/g,FT=n=>n.replace(_T,"-$1").toLowerCase();class mn{constructor(...e){this.childNodes=[],this.parentElement=null,this.parentNode=null,this.ELEMENT_NODE=qe.ELEMENT_NODE,this.TEXT_NODE=qe.TEXT_NODE}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){const e=this.parentNode;if(!e)return null;const t=e.childNodes,r=t.indexOf(this);return t[r+1]||null}contains(e){if(e===this)return!0;for(const t of this.childNodes)if(t.contains(e))return!0;return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function zT(n){return class y1 extends n{constructor(){super(...arguments),this.nodeType=qe.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=Oe.Document,this.textContent=null}get documentElement(){return this.childNodes.find(t=>t.RRNodeType===Oe.Element&&t.tagName==="HTML")||null}get body(){var t;return((t=this.documentElement)===null||t===void 0?void 0:t.childNodes.find(r=>r.RRNodeType===Oe.Element&&r.tagName==="BODY"))||null}get head(){var t;return((t=this.documentElement)===null||t===void 0?void 0:t.childNodes.find(r=>r.RRNodeType===Oe.Element&&r.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(t){const r=t.RRNodeType;if((r===Oe.Element||r===Oe.DocumentType)&&this.childNodes.some(o=>o.RRNodeType===r))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${r===Oe.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);return t.parentElement=null,t.parentNode=this,this.childNodes.push(t),t}insertBefore(t,r){const o=t.RRNodeType;if((o===Oe.Element||o===Oe.DocumentType)&&this.childNodes.some(a=>a.RRNodeType===o))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${o===Oe.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);if(r===null)return this.appendChild(t);const l=this.childNodes.indexOf(r);if(l==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(l,0,t),t.parentElement=null,t.parentNode=this,t}removeChild(t){const r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(r,1),t.parentElement=null,t.parentNode=null,t}open(){this.childNodes=[]}close(){}write(t){let r;if(t==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?r="-//W3C//DTD XHTML 1.0 Transitional//EN":t==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(r="-//W3C//DTD HTML 4.0 Transitional//EN"),r){const o=this.createDocumentType("html",r,"");this.open(),this.appendChild(o)}}createDocument(t,r,o){return new y1}createDocumentType(t,r,o){const l=new(Fy(mn))(t,r,o);return l.ownerDocument=this,l}createElement(t){const r=new(zy(mn))(t);return r.ownerDocument=this,r}createElementNS(t,r){return this.createElement(r)}createTextNode(t){const r=new(By(mn))(t);return r.ownerDocument=this,r}createComment(t){const r=new(jy(mn))(t);return r.ownerDocument=this,r}createCDATASection(t){const r=new(Uy(mn))(t);return r.ownerDocument=this,r}toString(){return"RRDocument"}}}function Fy(n){return class extends n{constructor(t,r,o){super(),this.nodeType=qe.DOCUMENT_TYPE_NODE,this.RRNodeType=Oe.DocumentType,this.textContent=null,this.name=t,this.publicId=r,this.systemId=o,this.nodeName=t}toString(){return"RRDocumentType"}}}function zy(n){return class extends n{constructor(t){super(),this.nodeType=qe.ELEMENT_NODE,this.RRNodeType=Oe.Element,this.attributes={},this.shadowRoot=null,this.tagName=t.toUpperCase(),this.nodeName=t.toUpperCase()}get textContent(){let t="";return this.childNodes.forEach(r=>t+=r.textContent),t}set textContent(t){this.childNodes=[this.ownerDocument.createTextNode(t)]}get classList(){return new jT(this.attributes.class,t=>{this.attributes.class=t})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const t=this.attributes.style?LT(this.attributes.style):{},r=/\B([A-Z])/g;return t.setProperty=(o,l,a)=>{if(r.test(o))return;const u=wd(o);l?t[u]=l:delete t[u],a==="important"&&(t[u]+=" !important"),this.attributes.style=_y(t)},t.removeProperty=o=>{if(r.test(o))return"";const l=wd(o),a=t[l]||"";return delete t[l],this.attributes.style=_y(t),a},t}getAttribute(t){return this.attributes[t]||null}setAttribute(t,r){this.attributes[t]=r}setAttributeNS(t,r,o){this.setAttribute(r,o)}removeAttribute(t){delete this.attributes[t]}appendChild(t){return this.childNodes.push(t),t.parentNode=this,t.parentElement=this,t}insertBefore(t,r){if(r===null)return this.appendChild(t);const o=this.childNodes.indexOf(r);if(o==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(o,0,t),t.parentElement=this,t.parentNode=this,t}removeChild(t){const r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(r,1),t.parentElement=null,t.parentNode=null,t}attachShadow(t){const r=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=r,r}dispatchEvent(t){return!0}toString(){let t="";for(const r in this.attributes)t+=`${r}="${this.attributes[r]}" `;return`${this.tagName} ${t}`}}}function BT(n){return class extends n{attachShadow(t){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}function By(n){return class extends n{constructor(t){super(),this.nodeType=qe.TEXT_NODE,this.nodeName="#text",this.RRNodeType=Oe.Text,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function jy(n){return class extends n{constructor(t){super(),this.nodeType=qe.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=Oe.Comment,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function Uy(n){return class extends n{constructor(t){super(),this.nodeName="#cdata-section",this.nodeType=qe.CDATA_SECTION_NODE,this.RRNodeType=Oe.CDATA,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class jT{constructor(e,t){if(this.classes=[],this.add=(...r)=>{for(const o of r){const l=String(o);this.classes.indexOf(l)>=0||this.classes.push(l)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...r)=>{this.classes=this.classes.filter(o=>r.indexOf(o)===-1),this.onChange&&this.onChange(this.classes.join(" "))},e){const r=e.trim().split(/\s+/);this.classes.push(...r)}this.onChange=t}}var qe;(function(n){n[n.PLACEHOLDER=0]="PLACEHOLDER",n[n.ELEMENT_NODE=1]="ELEMENT_NODE",n[n.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",n[n.TEXT_NODE=3]="TEXT_NODE",n[n.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",n[n.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",n[n.ENTITY_NODE=6]="ENTITY_NODE",n[n.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",n[n.COMMENT_NODE=8]="COMMENT_NODE",n[n.DOCUMENT_NODE=9]="DOCUMENT_NODE",n[n.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",n[n.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"})(qe||(qe={}));const kd={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},UT={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function An(n,e,t,r){const o=n.childNodes,l=e.childNodes;r=r||e.mirror||e.ownerDocument.mirror,(o.length>0||l.length>0)&&Wy(Array.from(o),l,n,t,r);let a=null,u=null;switch(e.RRNodeType){case Oe.Document:{u=e.scrollData;break}case Oe.Element:{const d=n,f=e;switch(WT(d,f,r),u=f.scrollData,a=f.inputData,f.tagName){case"AUDIO":case"VIDEO":{const h=n,m=f;m.paused!==void 0&&(m.paused?h.pause():h.play()),m.muted!==void 0&&(h.muted=m.muted),m.volume!==void 0&&(h.volume=m.volume),m.currentTime!==void 0&&(h.currentTime=m.currentTime),m.playbackRate!==void 0&&(h.playbackRate=m.playbackRate);break}case"CANVAS":{const h=e;if(h.rr_dataURL!==null){const m=document.createElement("img");m.onload=()=>{const y=d.getContext("2d");y&&y.drawImage(m,0,0,m.width,m.height)},m.src=h.rr_dataURL}h.canvasMutations.forEach(m=>t.applyCanvas(m.event,m.mutation,n))}break;case"STYLE":{const h=d.sheet;h&&e.rules.forEach(m=>t.applyStyleSheetMutation(m,h))}break}if(f.shadowRoot){d.shadowRoot||d.attachShadow({mode:"open"});const h=d.shadowRoot.childNodes,m=f.shadowRoot.childNodes;(h.length>0||m.length>0)&&Wy(Array.from(h),m,d.shadowRoot,t,r)}break}case Oe.Text:case Oe.Comment:case Oe.CDATA:n.textContent!==e.data&&(n.textContent=e.data);break}if(u&&t.applyScroll(u,!0),a&&t.applyInput(a),e.nodeName==="IFRAME"){const d=n.contentDocument,f=e;if(d){const h=r.getMeta(f.contentDocument);h&&t.mirror.add(d,Object.assign({},h)),An(d,f.contentDocument,t,r)}}}function WT(n,e,t){const r=n.attributes,o=e.attributes;for(const l in o){const a=o[l],u=t.getMeta(e);if(u&&"isSVG"in u&&u.isSVG&&kd[l])n.setAttributeNS(kd[l],l,a);else if(e.tagName==="CANVAS"&&l==="rr_dataURL"){const d=document.createElement("img");d.src=a,d.onload=()=>{const f=n.getContext("2d");f&&f.drawImage(d,0,0,d.width,d.height)}}else n.setAttribute(l,a)}for(const{name:l}of Array.from(r))l in o||n.removeAttribute(l);e.scrollLeft&&(n.scrollLeft=e.scrollLeft),e.scrollTop&&(n.scrollTop=e.scrollTop)}function Wy(n,e,t,r,o){var l;let a=0,u=n.length-1,d=0,f=e.length-1,h=n[a],m=n[u],y=e[d],w=e[f],k,x;for(;a<=u&&d<=f;){const b=r.mirror.getId(h),E=r.mirror.getId(m),T=o.getId(y),M=o.getId(w);if(h===void 0)h=n[++a];else if(m===void 0)m=n[--u];else if(b!==-1&&b===T)An(h,y,r,o),h=n[++a],y=e[++d];else if(E!==-1&&E===M)An(m,w,r,o),m=n[--u],w=e[--f];else if(b!==-1&&b===M)t.insertBefore(h,m.nextSibling),An(h,w,r,o),h=n[++a],w=e[--f];else if(E!==-1&&E===T)t.insertBefore(m,h),An(m,y,r,o),m=n[--u],y=e[++d];else{if(!k){k={};for(let _=a;_<=u;_++){const F=n[_];F&&r.mirror.hasNode(F)&&(k[r.mirror.getId(F)]=_)}}if(x=k[o.getId(y)],x){const _=n[x];t.insertBefore(_,h),An(_,y,r,o),n[x]=void 0}else{const _=Sd(y,r.mirror,o);t.nodeName==="#document"&&((l=r.mirror.getMeta(_))===null||l===void 0?void 0:l.type)===Oe.Element&&t.documentElement&&(t.removeChild(t.documentElement),n[a]=void 0,h=void 0),t.insertBefore(_,h||null),An(_,y,r,o)}y=e[++d]}}if(a>u){const b=e[f+1];let E=null;for(b&&t.childNodes.forEach(T=>{r.mirror.getId(T)===o.getId(b)&&(E=T)});d<=f;++d){const T=Sd(e[d],r.mirror,o);t.insertBefore(T,E),An(T,e[d],r,o)}}else if(d>f)for(;a<=u;a++){const b=n[a];b&&(t.removeChild(b),r.mirror.removeNodeFromMap(b))}}function Sd(n,e,t){const r=t.getId(n),o=t.getMeta(n);let l=null;if(r>-1&&(l=e.getNode(r)),l!==null)return l;switch(n.RRNodeType){case Oe.Document:l=new Document;break;case Oe.DocumentType:l=document.implementation.createDocumentType(n.name,n.publicId,n.systemId);break;case Oe.Element:{let a=n.tagName.toLowerCase();a=UT[a]||a,o&&"isSVG"in o&&(o!=null&&o.isSVG)?l=document.createElementNS(kd.svg,a):l=document.createElement(n.tagName);break}case Oe.Text:l=document.createTextNode(n.data);break;case Oe.Comment:l=document.createComment(n.data);break;case Oe.CDATA:l=document.createCDATASection(n.data);break}return o&&e.add(l,Object.assign({},o)),l}class Fi extends zT(mn){constructor(e){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=XT(),this.scrollData=null,e&&(this.mirror=e)}get unserializedId(){return this._unserializedId--}createDocument(e,t,r){return new Fi}createDocumentType(e,t,r){const o=new HT(e,t,r);return o.ownerDocument=this,o}createElement(e){const t=e.toUpperCase();let r;switch(t){case"AUDIO":case"VIDEO":r=new VT(t);break;case"IFRAME":r=new KT(t,this.mirror);break;case"CANVAS":r=new $T(t);break;case"STYLE":r=new GT(t);break;default:r=new Qo(t);break}return r.ownerDocument=this,r}createComment(e){const t=new YT(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new QT(e);return t.ownerDocument=this,t}createTextNode(e){const t=new JT(e);return t.ownerDocument=this,t}destroyTree(){this.childNodes=[],this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const HT=Fy(mn);class Qo extends zy(mn){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class VT extends BT(Qo){}class $T extends Qo{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class GT extends Qo{constructor(){super(...arguments),this.rules=[]}}class KT extends Qo{constructor(e,t){super(e),this.contentDocument=new Fi,this.contentDocument.mirror=t}}const JT=By(mn),YT=jy(mn),QT=Uy(mn);function ZT(n){return n instanceof HTMLFormElement?"FORM":n.tagName.toUpperCase()}function Hy(n,e,t,r){let o;switch(n.nodeType){case qe.DOCUMENT_NODE:r&&r.nodeName==="IFRAME"?o=r.contentDocument:(o=e,o.compatMode=n.compatMode);break;case qe.DOCUMENT_TYPE_NODE:{const a=n;o=e.createDocumentType(a.name,a.publicId,a.systemId);break}case qe.ELEMENT_NODE:{const a=n,u=ZT(a);o=e.createElement(u);const d=o;for(const{name:f,value:h}of Array.from(a.attributes))d.attributes[f]=h;a.scrollLeft&&(d.scrollLeft=a.scrollLeft),a.scrollTop&&(d.scrollTop=a.scrollTop);break}case qe.TEXT_NODE:o=e.createTextNode(n.textContent||"");break;case qe.CDATA_SECTION_NODE:o=e.createCDATASection(n.data);break;case qe.COMMENT_NODE:o=e.createComment(n.textContent||"");break;case qe.DOCUMENT_FRAGMENT_NODE:o=r.attachShadow({mode:"open"});break;default:return null}let l=t.getMeta(n);return e instanceof Fi&&(l||(l=Vy(o,e.unserializedId),t.add(n,l)),e.mirror.add(o,Object.assign({},l))),o}function qT(n,e=OT(),t=new Fi){function r(o,l){const a=Hy(o,t,e,l);if(a!==null)if((l==null?void 0:l.nodeName)!=="IFRAME"&&o.nodeType!==qe.DOCUMENT_FRAGMENT_NODE&&(l==null||l.appendChild(a),a.parentNode=l,a.parentElement=l),o.nodeName==="IFRAME"){const u=o.contentDocument;u&&r(u,a)}else(o.nodeType===qe.DOCUMENT_NODE||o.nodeType===qe.ELEMENT_NODE||o.nodeType===qe.DOCUMENT_FRAGMENT_NODE)&&(o.nodeType===qe.ELEMENT_NODE&&o.shadowRoot&&r(o.shadowRoot,a),o.childNodes.forEach(u=>r(u,a)))}return r(n,null),t}function XT(){return new eA}class eA{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var t;if(!e)return-1;const r=(t=this.getMeta(e))===null||t===void 0?void 0:t.id;return r??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){const r=this.getNode(e);if(r){const o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(t,o)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Vy(n,e){switch(n.RRNodeType){case Oe.Document:return{id:e,type:n.RRNodeType,childNodes:[]};case Oe.DocumentType:{const t=n;return{id:e,type:n.RRNodeType,name:t.name,publicId:t.publicId,systemId:t.systemId}}case Oe.Element:return{id:e,type:n.RRNodeType,tagName:n.tagName.toLowerCase(),attributes:{},childNodes:[]};case Oe.Text:return{id:e,type:n.RRNodeType,textContent:n.textContent||""};case Oe.Comment:return{id:e,type:n.RRNodeType,textContent:n.textContent||""};case Oe.CDATA:return{id:e,type:n.RRNodeType,textContent:""}}}const{addCustomEvent:tA}=ei,{freezePage:nA}=ei;var Mt=Uint8Array,_t=Uint16Array,Zo=Uint32Array,la=new Mt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),aa=new Mt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xd=new Mt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$y=function(n,e){for(var t=new _t(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var o=new Zo(t[30]),r=1;r<30;++r)for(var l=t[r];l<t[r+1];++l)o[l]=l-t[r]<<5|r;return[t,o]},Gy=$y(la,2),Ky=Gy[0],Cd=Gy[1];Ky[28]=258,Cd[258]=28;for(var Jy=$y(aa,0),rA=Jy[0],Yy=Jy[1],bd=new _t(32768),Ue=0;Ue<32768;++Ue){var mr=(Ue&43690)>>>1|(Ue&21845)<<1;mr=(mr&52428)>>>2|(mr&13107)<<2,mr=(mr&61680)>>>4|(mr&3855)<<4,bd[Ue]=((mr&65280)>>>8|(mr&255)<<8)>>>1}for(var Nn=function(n,e,t){for(var r=n.length,o=0,l=new _t(e);o<r;++o)++l[n[o]-1];var a=new _t(e);for(o=0;o<e;++o)a[o]=a[o-1]+l[o-1]<<1;var u;if(t){u=new _t(1<<e);var d=15-e;for(o=0;o<r;++o)if(n[o])for(var f=o<<4|n[o],h=e-n[o],m=a[n[o]-1]++<<h,y=m|(1<<h)-1;m<=y;++m)u[bd[m]>>>d]=f}else for(u=new _t(r),o=0;o<r;++o)u[o]=bd[a[n[o]-1]++]>>>15-n[o];return u},gr=new Mt(288),Ue=0;Ue<144;++Ue)gr[Ue]=8;for(var Ue=144;Ue<256;++Ue)gr[Ue]=9;for(var Ue=256;Ue<280;++Ue)gr[Ue]=7;for(var Ue=280;Ue<288;++Ue)gr[Ue]=8;for(var qo=new Mt(32),Ue=0;Ue<32;++Ue)qo[Ue]=5;var iA=Nn(gr,9,0),oA=Nn(gr,9,1),sA=Nn(qo,5,0),lA=Nn(qo,5,1),Ed=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},gn=function(n,e,t){var r=e/8>>0;return(n[r]|n[r+1]<<8)>>>(e&7)&t},Id=function(n,e){var t=e/8>>0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>>(e&7)},Td=function(n){return(n/8>>0)+(n&7&&1)},Ad=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof _t?_t:n instanceof Zo?Zo:Mt)(t-e);return r.set(n.subarray(e,t)),r},aA=function(n,e,t){var r=n.length,o=!e||t,l=!t||t.i;t||(t={}),e||(e=new Mt(r*3));var a=function(Q){var ke=e.length;if(Q>ke){var me=new Mt(Math.max(ke*2,Q));me.set(e),e=me}},u=t.f||0,d=t.p||0,f=t.b||0,h=t.l,m=t.d,y=t.m,w=t.n,k=r*8;do{if(!h){t.f=u=gn(n,d,1);var x=gn(n,d+1,3);if(d+=3,x)if(x==1)h=oA,m=lA,y=9,w=5;else if(x==2){var M=gn(n,d,31)+257,_=gn(n,d+10,15)+4,F=M+gn(n,d+5,31)+1;d+=14;for(var z=new Mt(F),Y=new Mt(19),j=0;j<_;++j)Y[xd[j]]=gn(n,d+j*3,7);d+=_*3;var ve=Ed(Y),pe=(1<<ve)-1;if(!l&&d+F*(ve+7)>k)break;for(var Ie=Nn(Y,ve,1),j=0;j<F;){var ce=Ie[gn(n,d,pe)];d+=ce&15;var b=ce>>>4;if(b<16)z[j++]=b;else{var fe=0,re=0;for(b==16?(re=3+gn(n,d,3),d+=2,fe=z[j-1]):b==17?(re=3+gn(n,d,7),d+=3):b==18&&(re=11+gn(n,d,127),d+=7);re--;)z[j++]=fe}}var te=z.subarray(0,M),se=z.subarray(M);y=Ed(te),w=Ed(se),h=Nn(te,y,1),m=Nn(se,w,1)}else throw"invalid block type";else{var b=Td(d)+4,E=n[b-4]|n[b-3]<<8,T=b+E;if(T>r){if(l)throw"unexpected EOF";break}o&&a(f+E),e.set(n.subarray(b,T),f),t.b=f+=E,t.p=d=T*8;continue}if(d>k)throw"unexpected EOF"}o&&a(f+131072);for(var Z=(1<<y)-1,W=(1<<w)-1,P=y+w+18;l||d+P<k;){var fe=h[Id(n,d)&Z],C=fe>>>4;if(d+=fe&15,d>k)throw"unexpected EOF";if(!fe)throw"invalid length/literal";if(C<256)e[f++]=C;else if(C==256){h=null;break}else{var O=C-254;if(C>264){var j=C-257,B=la[j];O=gn(n,d,(1<<B)-1)+Ky[j],d+=B}var X=m[Id(n,d)&W],ne=X>>>4;if(!X)throw"invalid distance";d+=X&15;var se=rA[ne];if(ne>3){var B=aa[ne];se+=Id(n,d)&(1<<B)-1,d+=B}if(d>k)throw"unexpected EOF";o&&a(f+131072);for(var we=f+O;f<we;f+=4)e[f]=e[f-se],e[f+1]=e[f+1-se],e[f+2]=e[f+2-se],e[f+3]=e[f+3-se];f=we}}t.l=h,t.p=d,t.b=f,h&&(u=1,t.m=y,t.d=m,t.n=w)}while(!u);return f==e.length?e:Ad(e,0,f)},Wn=function(n,e,t){t<<=e&7;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8},Xo=function(n,e,t){t<<=e&7;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},Nd=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var o=t.length,l=t.slice();if(!o)return[new Mt(0),0];if(o==1){var a=new Mt(t[0].s+1);return a[t[0].s]=1,[a,1]}t.sort(function(F,z){return F.f-z.f}),t.push({s:-1,f:25001});var u=t[0],d=t[1],f=0,h=1,m=2;for(t[0]={s:-1,f:u.f+d.f,l:u,r:d};h!=o-1;)u=t[t[f].f<t[m].f?f++:m++],d=t[f!=h&&t[f].f<t[m].f?f++:m++],t[h++]={s:-1,f:u.f+d.f,l:u,r:d};for(var y=l[0].s,r=1;r<o;++r)l[r].s>y&&(y=l[r].s);var w=new _t(y+1),k=Md(t[h-1],w,0);if(k>e){var r=0,x=0,b=k-e,E=1<<b;for(l.sort(function(z,Y){return w[Y.s]-w[z.s]||z.f-Y.f});r<o;++r){var T=l[r].s;if(w[T]>e)x+=E-(1<<k-w[T]),w[T]=e;else break}for(x>>>=b;x>0;){var M=l[r].s;w[M]<e?x-=1<<e-w[M]++-1:++r}for(;r>=0&&x;--r){var _=l[r].s;w[_]==e&&(--w[_],++x)}k=e}return[new Mt(w),k]},Md=function(n,e,t){return n.s==-1?Math.max(Md(n.l,e,t+1),Md(n.r,e,t+1)):e[n.s]=t},Qy=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new _t(++e),r=0,o=n[0],l=1,a=function(d){t[r++]=d},u=1;u<=e;++u)if(n[u]==o&&u!=e)++l;else{if(!o&&l>2){for(;l>138;l-=138)a(32754);l>2&&(a(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(a(o),--l;l>6;l-=6)a(8304);l>2&&(a(l-3<<5|8208),l=0)}for(;l--;)a(o);l=1,o=n[u]}return[t.subarray(0,r),e]},es=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Rd=function(n,e,t){var r=t.length,o=Td(e+2);n[o]=r&255,n[o+1]=r>>>8,n[o+2]=n[o]^255,n[o+3]=n[o+1]^255;for(var l=0;l<r;++l)n[o+l+4]=t[l];return(o+4+r)*8},Zy=function(n,e,t,r,o,l,a,u,d,f,h){Wn(e,h++,t),++o[256];for(var m=Nd(o,15),y=m[0],w=m[1],k=Nd(l,15),x=k[0],b=k[1],E=Qy(y),T=E[0],M=E[1],_=Qy(x),F=_[0],z=_[1],Y=new _t(19),j=0;j<T.length;++j)Y[T[j]&31]++;for(var j=0;j<F.length;++j)Y[F[j]&31]++;for(var ve=Nd(Y,7),pe=ve[0],Ie=ve[1],ce=19;ce>4&&!pe[xd[ce-1]];--ce);var fe=f+5<<3,re=es(o,gr)+es(l,qo)+a,te=es(o,y)+es(l,x)+a+14+3*ce+es(Y,pe)+(2*Y[16]+3*Y[17]+7*Y[18]);if(fe<=re&&fe<=te)return Rd(e,h,n.subarray(d,d+f));var se,Z,W,P;if(Wn(e,h,1+(te<re)),h+=2,te<re){se=Nn(y,w,0),Z=y,W=Nn(x,b,0),P=x;var C=Nn(pe,Ie,0);Wn(e,h,M-257),Wn(e,h+5,z-1),Wn(e,h+10,ce-4),h+=14;for(var j=0;j<ce;++j)Wn(e,h+3*j,pe[xd[j]]);h+=3*ce;for(var O=[T,F],B=0;B<2;++B)for(var X=O[B],j=0;j<X.length;++j){var ne=X[j]&31;Wn(e,h,C[ne]),h+=pe[ne],ne>15&&(Wn(e,h,X[j]>>>5&127),h+=X[j]>>>12)}}else se=iA,Z=gr,W=sA,P=qo;for(var j=0;j<u;++j)if(r[j]>255){var ne=r[j]>>>18&31;Xo(e,h,se[ne+257]),h+=Z[ne+257],ne>7&&(Wn(e,h,r[j]>>>23&31),h+=la[ne]);var we=r[j]&31;Xo(e,h,W[we]),h+=P[we],we>3&&(Xo(e,h,r[j]>>>5&8191),h+=aa[we])}else Xo(e,h,se[r[j]]),h+=Z[r[j]];return Xo(e,h,se[256]),h+Z[256]},uA=new Zo([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),cA=function(n,e,t,r,o,l){var a=n.length,u=new Mt(r+a+5*(1+Math.floor(a/7e3))+o),d=u.subarray(r,u.length-o),f=0;if(!e||a<8)for(var h=0;h<=a;h+=65535){var m=h+65535;m<a?f=Rd(d,f,n.subarray(h,m)):(d[h]=l,f=Rd(d,f,n.subarray(h,a)))}else{for(var y=uA[e-1],w=y>>>13,k=y&8191,x=(1<<t)-1,b=new _t(32768),E=new _t(x+1),T=Math.ceil(t/3),M=2*T,_=function(Ge){return(n[Ge]^n[Ge+1]<<T^n[Ge+2]<<M)&x},F=new Zo(25e3),z=new _t(288),Y=new _t(32),j=0,ve=0,h=0,pe=0,Ie=0,ce=0;h<a;++h){var fe=_(h),re=h&32767,te=E[fe];if(b[re]=te,E[fe]=re,Ie<=h){var se=a-h;if((j>7e3||pe>24576)&&se>423){f=Zy(n,d,0,F,z,Y,ve,pe,ce,h-ce,f),pe=j=ve=0,ce=h;for(var Z=0;Z<286;++Z)z[Z]=0;for(var Z=0;Z<30;++Z)Y[Z]=0}var W=2,P=0,C=k,O=re-te&32767;if(se>2&&fe==_(h-O))for(var B=Math.min(w,se)-1,X=Math.min(32767,h),ne=Math.min(258,se);O<=X&&--C&&re!=te;){if(n[h+W]==n[h+W-O]){for(var we=0;we<ne&&n[h+we]==n[h+we-O];++we);if(we>W){if(W=we,P=O,we>B)break;for(var Q=Math.min(O,we-2),ke=0,Z=0;Z<Q;++Z){var me=h-O+Z+32768&32767,Ee=b[me],vt=me-Ee+32768&32767;vt>ke&&(ke=vt,te=me)}}}re=te,te=b[re],O+=re-te+32768&32767}if(P){F[pe++]=268435456|Cd[W]<<18|Yy[P];var Te=Cd[W]&31,st=Yy[P]&31;ve+=la[Te]+aa[st],++z[257+Te],++Y[st],Ie=h+W,++j}else F[pe++]=n[h],++z[n[h]]}}f=Zy(n,d,l,F,z,Y,ve,pe,ce,h-ce,f)}return Ad(u,0,r+Td(f)+o)},dA=function(){var n=1,e=0;return{p:function(t){for(var r=n,o=e,l=t.length,a=0;a!=l;){for(var u=Math.min(a+5552,l);a<u;++a)r+=t[a],o+=r;r%=65521,o%=65521}n=r,e=o},d:function(){return(n>>>8<<16|(e&255)<<8|e>>>8)+((n&255)<<23)*2}}},fA=function(n,e,t,r,o){return cA(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,r,!0)},pA=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},hA=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)},mA=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function gA(n,e){e===void 0&&(e={});var t=dA();t.p(n);var r=fA(n,e,2,4);return hA(r,e),pA(r,r.length-4,t.d()),r}function yA(n,e){return aA((mA(n),n.subarray(2,-4)),e)}function qy(n,e){var t=n.length;if(!e&&typeof TextEncoder<"u")return new TextEncoder().encode(n);for(var r=new Mt(n.length+(n.length>>>1)),o=0,l=function(f){r[o++]=f},a=0;a<t;++a){if(o+5>r.length){var u=new Mt(o+8+(t-a<<1));u.set(r),r=u}var d=n.charCodeAt(a);d<128||e?l(d):d<2048?(l(192|d>>>6),l(128|d&63)):d>55295&&d<57344?(d=65536+(d&1047552)|n.charCodeAt(++a)&1023,l(240|d>>>18),l(128|d>>>12&63),l(128|d>>>6&63),l(128|d&63)):(l(224|d>>>12),l(128|d>>>6&63),l(128|d&63))}return Ad(r,0,o)}function Xy(n,e){var t="";if(!e&&typeof TextDecoder<"u")return new TextDecoder().decode(n);for(var r=0;r<n.length;){var o=n[r++];o<128||e?t+=String.fromCharCode(o):o<224?t+=String.fromCharCode((o&31)<<6|n[r++]&63):o<240?t+=String.fromCharCode((o&15)<<12|(n[r++]&63)<<6|n[r++]&63):(o=((o&15)<<18|(n[r++]&63)<<12|(n[r++]&63)<<6|n[r++]&63)-65536,t+=String.fromCharCode(55296|o>>10,56320|o&1023))}return t}const Od="v1",vA=n=>{const e=Object.assign(Object.assign({},n),{v:Od});return Xy(gA(qy(JSON.stringify(e))),!0)},wA=n=>{if(typeof n!="string")return n;try{const e=JSON.parse(n);if(e.timestamp)return e}catch{}try{const e=JSON.parse(Xy(yA(qy(n,!0))));if(e.v===Od)return e;throw new Error(`These events were packed with packer ${e.v} which is incompatible with current packer ${Od}.`)}catch(e){throw console.error(e),new Error("Unknown data format.")}};class zi{constructor(e){this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}toString(){const e=this.lineNumber||"",t=this.columnNumber||"";return this.functionName?`${this.functionName} (${this.fileName}:${e}:${t})`:`${this.fileName}:${e}:${t}`}}const kA=/(^|@)\S+:\d+/,e0=/^\s*at .*(\S+:\d+|\(native\))/m,SA=/^(eval@)?(\[native code])?$/,t0={parse:function(n){if(!n)return[];if(typeof n.stacktrace<"u"||typeof n["opera#sourceloc"]<"u")return this.parseOpera(n);if(n.stack&&n.stack.match(e0))return this.parseV8OrIE(n);if(n.stack)return this.parseFFOrSafari(n);throw new Error("Cannot parse given Error object")},extractLocation:function(n){if(n.indexOf(":")===-1)return[n];const t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(n.replace(/[()]/g,""));if(!t)throw new Error(`Cannot parse given url: ${n}`);return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(n){return n.stack.split(`
`).filter(function(t){return!!t.match(e0)},this).map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(");const o=r.match(/ (\((.+):(\d+):(\d+)\)$)/);r=o?r.replace(o[0],""):r;const l=r.split(/\s+/).slice(1),a=this.extractLocation(o?o[1]:l.pop()),u=l.join(" ")||void 0,d=["eval","<anonymous>"].indexOf(a[0])>-1?void 0:a[0];return new zi({functionName:u,fileName:d,lineNumber:a[1],columnNumber:a[2]})},this)},parseFFOrSafari:function(n){return n.stack.split(`
`).filter(function(t){return!t.match(SA)},this).map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new zi({functionName:t});{const r=/((.*".+"[^@]*)?[^@]*)(?:@)/,o=t.match(r),l=o&&o[1]?o[1]:void 0,a=this.extractLocation(t.replace(r,""));return new zi({functionName:l,fileName:a[0],lineNumber:a[1],columnNumber:a[2]})}},this)},parseOpera:function(n){return!n.stacktrace||n.message.indexOf(`
`)>-1&&n.message.split(`
`).length>n.stacktrace.split(`
`).length?this.parseOpera9(n):n.stack?this.parseOpera11(n):this.parseOpera10(n)},parseOpera9:function(n){const e=/Line (\d+).*script (?:in )?(\S+)/i,t=n.message.split(`
`),r=[];for(let o=2,l=t.length;o<l;o+=2){const a=e.exec(t[o]);a&&r.push(new zi({fileName:a[2],lineNumber:parseFloat(a[1])}))}return r},parseOpera10:function(n){const e=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,t=n.stacktrace.split(`
`),r=[];for(let o=0,l=t.length;o<l;o+=2){const a=e.exec(t[o]);a&&r.push(new zi({functionName:a[3]||void 0,fileName:a[2],lineNumber:parseFloat(a[1])}))}return r},parseOpera11:function(n){return n.stack.split(`
`).filter(function(t){return!!t.match(kA)&&!t.match(/^Error created at/)},this).map(function(t){const r=t.split("@"),o=this.extractLocation(r.pop()),a=(r.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new zi({functionName:a,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})},this)}};function xA(n){if(!n||!n.outerHTML)return"";let e="";for(;n.parentElement;){let t=n.localName;if(!t)break;t=t.toLowerCase();const r=n.parentElement,o=[];if(r.children&&r.children.length>0)for(let l=0;l<r.children.length;l++){const a=r.children[l];a.localName&&a.localName.toLowerCase&&a.localName.toLowerCase()===t&&o.push(a)}o.length>1&&(t+=`:eq(${o.indexOf(n)})`),e=t+(e?">"+e:""),n=r}return e}function Ld(n){return Object.prototype.toString.call(n)==="[object Object]"}function n0(n,e){if(e===0)return!0;const t=Object.keys(n);for(const r of t)if(Ld(n[r])&&n0(n[r],e-1))return!0;return!1}function Dd(n,e){const t={numOfKeysLimit:50,depthOfLimit:4};Object.assign(t,e);const r=[],o=[];return JSON.stringify(n,function(u,d){if(r.length>0){const f=r.indexOf(this);~f?r.splice(f+1):r.push(this),~f?o.splice(f,1/0,u):o.push(u),~r.indexOf(d)&&(r[0]===d?d="[Circular ~]":d="[Circular ~."+o.slice(0,r.indexOf(d)).join(".")+"]")}else r.push(d);if(d===null)return d;if(d===void 0)return"undefined";if(l(d))return a(d);if(d instanceof Event){const f={};for(const h in d){const m=d[h];Array.isArray(m)?f[h]=xA(m.length?m[0]:null):f[h]=m}return f}else{if(d instanceof Node)return d instanceof HTMLElement?d?d.outerHTML:"":d.nodeName;if(d instanceof Error)return d.stack?d.stack+`
End of stack for Error object`:d.name+": "+d.message}return d});function l(u){return!!(Ld(u)&&Object.keys(u).length>t.numOfKeysLimit||typeof u=="function"||Ld(u)&&n0(u,t.depthOfLimit))}function a(u){let d=u.toString();return t.stringLengthLimit&&d.length>t.stringLengthLimit&&(d=`${d.slice(0,t.stringLengthLimit)}...`),d}}const r0={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function CA(n,e,t){const r=t?Object.assign({},r0,t):r0,o=r.logger;if(!o)return()=>{};let l;typeof o=="string"?l=e[o]:l=o;let a=0;const u=[];if(r.level.includes("error")&&window){const f=h=>{const m=h.message,y=h.error,w=t0.parse(y).map(x=>x.toString()),k=[Dd(m,r.stringifyOptions)];n({level:"error",trace:w,payload:k})};window.addEventListener("error",f),u.push(()=>{window&&window.removeEventListener("error",f)})}for(const f of r.level)u.push(d(l,f));return()=>{u.forEach(f=>f())};function d(f,h){return f[h]?fr(f,h,m=>(...y)=>{m.apply(this,y);try{const w=t0.parse(new Error).map(x=>x.toString()).splice(1),k=y.map(x=>Dd(x,r.stringifyOptions));a++,a<r.lengthThreshold?n({level:h,trace:w,payload:k}):a===r.lengthThreshold&&n({level:"warn",trace:[],payload:[Dd("The number of log records reached the threshold.")]})}catch(w){m("rrweb logger error:",w,...y)}}):()=>{}}}const Pd="rrweb/console@1",bA=n=>({name:Pd,observer:CA,options:n}),ua="__rrweb_original__",EA={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],replayLogger:void 0};class IA{constructor(e){this.config=Object.assign(EA,e)}getConsoleLogger(){const e={};for(const t of this.config.level)t==="trace"?e[t]=r=>{(console.log[ua]?console.log[ua]:console.log)(...r.payload.map(l=>JSON.parse(l)),this.formatMessage(r))}:e[t]=r=>{(console[t][ua]?console[t][ua]:console[t])(...r.payload.map(l=>JSON.parse(l)),this.formatMessage(r))};return e}formatMessage(e){if(e.trace.length===0)return"";const t=`
	at `;let r=t;return r+=e.trace.join(t),r}}const TA=n=>{const e=(n==null?void 0:n.replayLogger)||new IA(n).getConsoleLogger();return{handler(t,r,o){let l=null;if(t.type===de.IncrementalSnapshot&&t.data.source===oe.Log?l=t.data:t.type===de.Plugin&&t.data.plugin===Pd&&(l=t.data.payload),l)try{typeof e[l.level]=="function"&&e[l.level](l)}catch(a){o.replayer.config.showWarning&&console.warn(a)}}}};function i0(n){return{all:n=n||new Map,on:function(e,t){var r=n.get(e);r?r.push(t):n.set(e,[t])},off:function(e,t){var r=n.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var r=n.get(e);r&&r.slice().map(function(o){o(t)}),(r=n.get("*"))&&r.slice().map(function(o){o(e,t)})}}}const AA=Object.freeze(Object.defineProperty({__proto__:null,default:i0},Symbol.toStringTag,{value:"Module"}));function NA(n=window,e=document){if("scrollBehavior"in e.documentElement.style&&n.__forceSmoothScrollPolyfill__!==!0)return;const t=n.HTMLElement||n.Element,r=468,o={scroll:n.scroll||n.scrollTo,scrollBy:n.scrollBy,elementScroll:t.prototype.scroll||d,scrollIntoView:t.prototype.scrollIntoView},l=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now;function a(E){const T=["MSIE ","Trident/","Edge/"];return new RegExp(T.join("|")).test(E)}const u=a(n.navigator.userAgent)?1:0;function d(E,T){this.scrollLeft=E,this.scrollTop=T}function f(E){return .5*(1-Math.cos(Math.PI*E))}function h(E){if(E===null||typeof E!="object"||E.behavior===void 0||E.behavior==="auto"||E.behavior==="instant")return!0;if(typeof E=="object"&&E.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+E.behavior+" is not a valid value for enumeration ScrollBehavior.")}function m(E,T){if(T==="Y")return E.clientHeight+u<E.scrollHeight;if(T==="X")return E.clientWidth+u<E.scrollWidth}function y(E,T){const M=n.getComputedStyle(E,null)["overflow"+T];return M==="auto"||M==="scroll"}function w(E){const T=m(E,"Y")&&y(E,"Y"),M=m(E,"X")&&y(E,"X");return T||M}function k(E){for(;E!==e.body&&w(E)===!1;)E=E.parentNode||E.host;return E}function x(E){const T=l();let M,_,F,z=(T-E.startTime)/r;z=z>1?1:z,M=f(z),_=E.startX+(E.x-E.startX)*M,F=E.startY+(E.y-E.startY)*M,E.method.call(E.scrollable,_,F),(_!==E.x||F!==E.y)&&n.requestAnimationFrame(x.bind(n,E))}function b(E,T,M){let _,F,z,Y;const j=l();E===e.body?(_=n,F=n.scrollX||n.pageXOffset,z=n.scrollY||n.pageYOffset,Y=o.scroll):(_=E,F=E.scrollLeft,z=E.scrollTop,Y=d),x({scrollable:_,method:Y,startTime:j,startX:F,startY:z,x:T,y:M})}n.scroll=n.scrollTo=function(){if(arguments[0]!==void 0){if(h(arguments[0])===!0){o.scroll.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:n.scrollY||n.pageYOffset);return}b.call(n,e.body,arguments[0].left!==void 0?~~arguments[0].left:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:n.scrollY||n.pageYOffset)}},n.scrollBy=function(){if(arguments[0]!==void 0){if(h(arguments[0])){o.scrollBy.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}b.call(n,e.body,~~arguments[0].left+(n.scrollX||n.pageXOffset),~~arguments[0].top+(n.scrollY||n.pageYOffset))}},t.prototype.scroll=t.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(h(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}const E=arguments[0].left,T=arguments[0].top;b.call(this,this,typeof E>"u"?this.scrollLeft:~~E,typeof T>"u"?this.scrollTop:~~T)},t.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(h(arguments[0])===!0){o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},t.prototype.scrollIntoView=function(){if(h(arguments[0])===!0){o.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}const E=k(this),T=E.getBoundingClientRect(),M=this.getBoundingClientRect();E!==e.body?(b.call(this,E,E.scrollLeft+M.left-T.left,E.scrollTop+M.top-T.top),n.getComputedStyle(E).position!=="fixed"&&n.scrollBy({left:T.left,top:T.top,behavior:"smooth"})):n.scrollBy({left:M.left,top:M.top,behavior:"smooth"})}}class MA{constructor(e=[],t){this.timeOffset=0,this.raf=null,this.actions=e,this.speed=t.speed,this.liveMode=t.liveMode}addAction(e){if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay){this.actions.push(e);return}const t=this.findActionIndex(e);this.actions.splice(t,0,e)}start(){this.timeOffset=0;let e=performance.now();const t=()=>{const r=performance.now();for(this.timeOffset+=(r-e)*this.speed,e=r;this.actions.length;){const o=this.actions[0];if(this.timeOffset>=o.delay)this.actions.shift(),o.doAction();else break}(this.actions.length>0||this.liveMode)&&(this.raf=requestAnimationFrame(t))};this.raf=requestAnimationFrame(t)}clear(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}toggleLiveMode(e){this.liveMode=e}isActive(){return this.raf!==null}findActionIndex(e){let t=0,r=this.actions.length-1;for(;t<=r;){const o=Math.floor((t+r)/2);if(this.actions[o].delay<e.delay)t=o+1;else if(this.actions[o].delay>e.delay)r=o-1;else return o+1}return t}}function o0(n,e){if(n.type===de.IncrementalSnapshot&&n.data.source===oe.MouseMove&&n.data.positions&&n.data.positions.length){const t=n.data.positions[0].timeOffset,r=n.timestamp+t;return n.delay=r-e,r-e}return n.delay=n.timestamp-e,n.delay}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function s0(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r,o,l=t.call(n),a=[];try{for(;(e===void 0||e-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(t=l.return)&&t.call(l)}finally{if(o)throw o.error}}return a}var Bi;(function(n){n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"})(Bi||(Bi={}));var l0={type:"xstate.init"};function _d(n){return n===void 0?[]:[].concat(n)}function ji(n){return{type:"xstate.assign",assignment:n}}function a0(n,e){return typeof(n=typeof n=="string"&&e&&e[n]?e[n]:n)=="string"?{type:n}:typeof n=="function"?{type:n.name,exec:n}:n}function ca(n){return function(e){return n===e}}function u0(n){return typeof n=="string"?{type:n}:n}function c0(n,e){return{value:n,context:e,actions:[],changed:!1,matches:ca(n)}}function d0(n,e,t){var r=e,o=!1;return[n.filter(function(l){if(l.type==="xstate.assign"){o=!0;var a=Object.assign({},r);return typeof l.assignment=="function"?a=l.assignment(r,t):Object.keys(l.assignment).forEach(function(u){a[u]=typeof l.assignment[u]=="function"?l.assignment[u](r,t):l.assignment[u]}),r=a,!1}return!0}),r,o]}function f0(n,e){e===void 0&&(e={});var t=s0(d0(_d(n.states[n.initial].entry).map(function(a){return a0(a,e.actions)}),n.context,l0),2),r=t[0],o=t[1],l={config:n,_options:e,initialState:{value:n.initial,actions:r,context:o,matches:ca(n.initial)},transition:function(a,u){var d,f,h=typeof a=="string"?{value:a,context:n.context}:a,m=h.value,y=h.context,w=u0(u),k=n.states[m];if(k.on){var x=_d(k.on[w.type]);try{for(var b=function(Z){var W=typeof Symbol=="function"&&Symbol.iterator,P=W&&Z[W],C=0;if(P)return P.call(Z);if(Z&&typeof Z.length=="number")return{next:function(){return Z&&C>=Z.length&&(Z=void 0),{value:Z&&Z[C++],done:!Z}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")}(x),E=b.next();!E.done;E=b.next()){var T=E.value;if(T===void 0)return c0(m,y);var M=typeof T=="string"?{target:T}:T,_=M.target,F=M.actions,z=F===void 0?[]:F,Y=M.cond,j=Y===void 0?function(){return!0}:Y,ve=_===void 0,pe=_??m,Ie=n.states[pe];if(j(y,w)){var ce=s0(d0((ve?_d(z):[].concat(k.exit,z,Ie.entry).filter(function(Z){return Z})).map(function(Z){return a0(Z,l._options.actions)}),y,w),3),fe=ce[0],re=ce[1],te=ce[2],se=_??m;return{value:se,context:re,actions:fe,changed:_!==m||fe.length>0||te,matches:ca(se)}}}}catch(Z){d={error:Z}}finally{try{E&&!E.done&&(f=b.return)&&f.call(b)}finally{if(d)throw d.error}}}return c0(m,y)}};return l}var p0=function(n,e){return n.actions.forEach(function(t){var r=t.exec;return r&&r(n.context,e)})};function h0(n){var e=n.initialState,t=Bi.NotStarted,r=new Set,o={_machine:n,send:function(l){t===Bi.Running&&(e=n.transition(e,l),p0(e,u0(l)),r.forEach(function(a){return a(e)}))},subscribe:function(l){return r.add(l),l(e),{unsubscribe:function(){return r.delete(l)}}},start:function(l){if(l){var a=typeof l=="object"?l:{context:n.config.context,value:l};e={value:a.value,actions:[],context:a.context,matches:ca(a.value)}}return t=Bi.Running,p0(e,l0),o},stop:function(){return t=Bi.Stopped,r.clear(),o},get state(){return e},get status(){return t}};return o}function RA(n,e){for(let t=n.length-1;t>=0;t--){const r=n[t];if(r.type===de.Meta&&r.timestamp<=e)return n.slice(t)}return n}function OA(n,{getCastFn:e,applyEventsSynchronously:t,emitter:r}){const o=f0({id:"player",context:n,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:ji({lastPlayedEvent:(l,a)=>a.type==="CAST_EVENT"?a.payload.event:l.lastPlayedEvent}),recordTimeOffset:ji((l,a)=>{let u=l.timeOffset;return"payload"in a&&"timeOffset"in a.payload&&(u=a.payload.timeOffset),Object.assign(Object.assign({},l),{timeOffset:u,baselineTime:l.events[0].timestamp+u})}),play(l){var a;const{timer:u,events:d,baselineTime:f,lastPlayedEvent:h}=l;u.clear();for(const k of d)o0(k,f);const m=RA(d,f);let y=h==null?void 0:h.timestamp;(h==null?void 0:h.type)===de.IncrementalSnapshot&&h.data.source===oe.MouseMove&&(y=h.timestamp+((a=h.data.positions[0])===null||a===void 0?void 0:a.timeOffset)),f<(y||0)&&r.emit(Pe.PlayBack);const w=new Array;for(const k of m)if(!(y&&y<f&&(k.timestamp<=y||k===h)))if(k.timestamp<f)w.push(k);else{const x=e(k,!1);u.addAction({doAction:()=>{x()},delay:k.delay})}t(w),r.emit(Pe.Flush),u.start()},pause(l){l.timer.clear()},resetLastPlayedEvent:ji(l=>Object.assign(Object.assign({},l),{lastPlayedEvent:null})),startLive:ji({baselineTime:(l,a)=>(l.timer.toggleLiveMode(!0),l.timer.start(),a.type==="TO_LIVE"&&a.payload.baselineTime?a.payload.baselineTime:Date.now())}),addEvent:ji((l,a)=>{const{baselineTime:u,timer:d,events:f}=l;if(a.type==="ADD_EVENT"){const{event:h}=a.payload;o0(h,u);let m=f.length-1;if(!f[m]||f[m].timestamp<=h.timestamp)f.push(h);else{let k=-1,x=0;for(;x<=m;){const b=Math.floor((x+m)/2);f[b].timestamp<=h.timestamp?x=b+1:m=b-1}k===-1&&(k=x),f.splice(k,0,h)}const y=h.timestamp<u,w=e(h,y);y?w():d.isActive()&&d.addAction({doAction:()=>{w()},delay:h.delay})}return Object.assign(Object.assign({},l),{events:f})})}});return h0(o)}function LA(n){const e=f0({id:"speed",context:n,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(t,r)=>{"payload"in r&&t.timer.setSpeed(r.payload.speed)},recordSpeed:ji({normalSpeed:t=>t.timer.speed}),restoreSpeed:t=>{t.timer.setSpeed(t.normalSpeed)}}});return h0(e)}const DA=n=>[`.${n} { background: currentColor }`,"noscript { display: none !important; }"],m0=new Map;function g0(n,e){let t=m0.get(n);return t||(t=new Map,m0.set(n,t)),t.has(e)||t.set(e,[]),t.get(e)}function yr(n,e,t){return r=>hr(this,void 0,void 0,function*(){if(r&&typeof r=="object"&&"rr_type"in r)if(t&&(t.isUnchanged=!1),r.rr_type==="ImageBitmap"&&"args"in r){const o=yield yr(n,e,t)(r.args);return yield createImageBitmap.apply(null,o)}else if("index"in r){if(t||e===null)return r;const{rr_type:o,index:l}=r;return g0(e,o)[l]}else if("args"in r){const{rr_type:o,args:l}=r,a=window[o];return new a(...yield Promise.all(l.map(yr(n,e,t))))}else{if("base64"in r)return mT(r.base64);if("src"in r){const o=n.get(r.src);if(o)return o;{const l=new Image;return l.src=r.src,n.set(r.src,l),l}}else if("data"in r&&r.rr_type==="Blob"){const o=yield Promise.all(r.data.map(yr(n,e,t)));return new Blob(o,{type:r.type})}}else if(Array.isArray(r))return yield Promise.all(r.map(yr(n,e,t)));return r})}function PA(n,e){try{return e===Un.WebGL?n.getContext("webgl")||n.getContext("experimental-webgl"):n.getContext("webgl2")}catch{return null}}const _A=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function FA(n,e){if(!(e!=null&&e.constructor))return;const{name:t}=e.constructor;if(!_A.includes(t))return;const r=g0(n,t);r.includes(e)||r.push(e)}function zA({mutation:n,target:e,type:t,imageMap:r,errorHandler:o}){return hr(this,void 0,void 0,function*(){try{const l=PA(e,t);if(!l)return;if(n.setter){l[n.property]=n.args[0];return}const a=l[n.property],u=yield Promise.all(n.args.map(yr(r,l))),d=a.apply(l,u);FA(l,d);const f=!1}catch(l){o(n,l)}})}function BA({event:n,mutation:e,target:t,imageMap:r,errorHandler:o}){return hr(this,void 0,void 0,function*(){try{const l=t.getContext("2d");if(e.setter){l[e.property]=e.args[0];return}const a=l[e.property];if(e.property==="drawImage"&&typeof e.args[0]=="string")r.get(n),a.apply(l,e.args);else{const u=yield Promise.all(e.args.map(yr(r,l)));a.apply(l,u)}}catch(l){o(e,l)}})}function y0({event:n,mutation:e,target:t,imageMap:r,canvasEventMap:o,errorHandler:l}){return hr(this,void 0,void 0,function*(){try{const a=o.get(n)||e,u="commands"in a?a.commands:[a];if([Un.WebGL,Un.WebGL2].includes(e.type)){for(let d=0;d<u.length;d++){const f=u[d];yield zA({mutation:f,type:e.type,target:t,imageMap:r,errorHandler:l})}return}for(let d=0;d<u.length;d++){const f=u[d];yield BA({event:n,mutation:f,target:t,imageMap:r,errorHandler:l})}}catch(a){l(e,a)}})}const jA=10*1e3,UA=5*1e3,WA=i0||AA,Fd="[replayer]",zd={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function v0(n){return n.type==de.IncrementalSnapshot&&(n.data.source==oe.TouchMove||n.data.source==oe.MouseInteraction&&n.data.type==yt.TouchStart)}class HA{constructor(e,t){if(this.usingVirtualDom=!1,this.virtualDom=new Fi,this.mouseTail=null,this.tailPositions=[],this.emitter=WA(),this.legacy_missingNodeRetryMap={},this.cache=uy(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=Xg(),this.styleMirror=new gd,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=u=>{this.iframe.style.display="inherit";for(const d of[this.mouseTail,this.iframe])d&&(d.setAttribute("width",String(u.width)),d.setAttribute("height",String(u.height)))},this.applyEventsSynchronously=u=>{for(const d of u){switch(d.type){case de.DomContentLoaded:case de.Load:case de.Custom:continue;case de.FullSnapshot:case de.Meta:case de.Plugin:case de.IncrementalSnapshot:break}this.getCastFn(d,!0)()}this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null},this.getCastFn=(u,d=!1)=>{let f;switch(u.type){case de.DomContentLoaded:case de.Load:break;case de.Custom:f=()=>{this.emitter.emit(Pe.CustomEvent,u)};break;case de.Meta:f=()=>this.emitter.emit(Pe.Resize,{width:u.data.width,height:u.data.height});break;case de.FullSnapshot:f=()=>{var m;if(this.firstFullSnapshot){if(this.firstFullSnapshot===u){this.firstFullSnapshot=!0;return}}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(u,d),(m=this.iframe.contentWindow)===null||m===void 0||m.scrollTo(u.data.initialOffset),this.styleMirror.reset()};break;case de.IncrementalSnapshot:f=()=>{if(this.applyIncremental(u,d),!d&&(u===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const m of this.service.state.context.events)if(!(m.timestamp<=u.timestamp)&&this.isUserInteraction(m)){m.delay-u.delay>jA*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=m);break}if(this.nextUserInteractionEvent){const m=this.nextUserInteractionEvent.delay-u.delay,y={speed:Math.min(Math.round(m/UA),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:y}),this.emitter.emit(Pe.SkipStart,y)}}};break}return()=>{f&&f();for(const y of this.config.plugins||[])y.handler&&y.handler(u,d,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:u}});const m=this.service.state.context.events.length-1;if(u===this.service.state.context.events[m]){const y=()=>{m<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(Pe.Finish))};u.type===de.IncrementalSnapshot&&u.data.source===oe.MouseMove&&u.data.positions.length?setTimeout(()=>{y()},Math.max(0,-u.data.positions[0].timeOffset+50)):y()}this.emitter.emit(Pe.EventCast,u)}},!(t!=null&&t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const r={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:zd,useVirtualDom:!0};this.config=Object.assign({},r,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(Pe.Resize,this.handleResize),this.setupDom();for(const u of this.config.plugins||[])u.getMirror&&u.getMirror({nodeMirror:this.mirror});this.emitter.on(Pe.Flush,()=>{if(this.usingVirtualDom){const u={mirror:this.mirror,applyCanvas:(d,f,h)=>{y0({event:d,mutation:f,target:h,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(d,f)=>{d.source===oe.StyleSheetRule?this.applyStyleSheetRule(d,f):d.source===oe.StyleDeclaration&&this.applyStyleDeclaration(d,f)}};if(this.iframe.contentDocument&&An(this.iframe.contentDocument,this.virtualDom,u,this.virtualDom.mirror),this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const d in this.legacy_missingNodeRetryMap)try{const f=this.legacy_missingNodeRetryMap[d],h=Sd(f.node,this.mirror,this.virtualDom.mirror);An(h,f.node,u,this.virtualDom.mirror),f.node=h}catch(f){this.config.showWarning&&console.warn(f)}this.constructedStyleMutations.forEach(d=>{this.applyStyleSheetMutation(d)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(d=>{this.applyAdoptedStyleSheet(d)}),this.adoptedStyleSheets=[]}this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(Pe.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset()});const o=new MA([],{speed:this.config.speed,liveMode:this.config.liveMode});this.service=OA({events:e.map(u=>t&&t.unpackFn?t.unpackFn(u):u).sort((u,d)=>u.timestamp-d.timestamp),timer:o,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(u=>{this.emitter.emit(Pe.StateChange,{player:u})}),this.speedService=LA({normalSpeed:-1,timer:o}),this.speedService.start(),this.speedService.subscribe(u=>{this.emitter.emit(Pe.StateChange,{speed:u})});const l=this.service.state.context.events.find(u=>u.type===de.Meta),a=this.service.state.context.events.find(u=>u.type===de.FullSnapshot);if(l){const{width:u,height:d}=l.data;setTimeout(()=>{this.emitter.emit(Pe.Resize,{width:u,height:d})},0)}a&&setTimeout(()=>{var u;this.firstFullSnapshot||(this.firstFullSnapshot=a,this.rebuildFullSnapshot(a),(u=this.iframe.contentWindow)===null||u===void 0||u.scrollTo(a.data.initialOffset))},1),this.service.state.context.events.find(v0)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach(t=>{e[t],this.config[t]=e[t]}),this.config.skipInactive||this.backToNormal(),typeof e.speed<"u"&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),typeof e.mouseTail<"u"&&(e.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,r;this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:e}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}})),(r=(t=this.iframe.contentDocument)===null||t===void 0?void 0:t.getElementsByTagName("html")[0])===null||r===void 0||r.classList.remove("rrweb-paused"),this.emitter.emit(Pe.Start)}pause(e){var t,r;e===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof e=="number"&&(this.play(e),this.service.send({type:"PAUSE"})),(r=(t=this.iframe.contentDocument)===null||t===void 0?void 0:t.getElementsByTagName("html")[0])===null||r===void 0||r.classList.add("rrweb-paused"),this.emitter.emit(Pe.Pause)}resume(e=0){console.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(Pe.Resume)}destroy(){this.pause(),this.config.root.removeChild(this.wrapper),this.emitter.emit(Pe.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const t=this.config.unpackFn?this.config.unpackFn(e):e;v0(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:t}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=uy()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(NA(this.iframe.contentWindow,this.iframe.contentDocument),dd(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const r=[],o=(u,d)=>{this.collectIframeAndAttachDocument(r,u);for(const f of this.config.plugins||[])f.onBuild&&f.onBuild(u,{id:d,replayer:this})};YI(e.data.node,{doc:this.iframe.contentDocument,afterAppend:o,cache:this.cache,mirror:this.mirror}),o(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:u,builtNode:d}of r)this.attachDocumentToIframe(u,d),this.newDocumentQueue=this.newDocumentQueue.filter(f=>f!==u);const{documentElement:l,head:a}=this.iframe.contentDocument;this.insertStyleRules(l,a),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(Pe.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var r;const o=DA(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&o.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const l=this.virtualDom.createElement("style");this.virtualDom.mirror.add(l,Vy(l,this.virtualDom.unserializedId)),e.insertBefore(l,t),l.rules.push({source:oe.StyleSheetRule,adds:o.map((a,u)=>({rule:a,index:u}))})}else{const l=document.createElement("style");e.insertBefore(l,t);for(let a=0;a<o.length;a++)(r=l.sheet)===null||r===void 0||r.insertRule(o[a],a)}}attachDocumentToIframe(e,t){const r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,o=[],l=(a,u)=>{this.collectIframeAndAttachDocument(o,a);const d=r.getMeta(a);if((d==null?void 0:d.type)===Re.Element&&(d==null?void 0:d.tagName.toUpperCase())==="HTML"){const{documentElement:f,head:h}=t.contentDocument;this.insertStyleRules(f,h)}for(const f of this.config.plugins||[])f.onBuild&&f.onBuild(a,{id:u,replayer:this})};Go(e.node,{doc:t.contentDocument,mirror:r,hackCss:!0,skipChild:!1,afterAppend:l,cache:this.cache}),l(t.contentDocument,e.node.id);for(const{mutationInQueue:a,builtNode:u}of o)this.attachDocumentToIframe(a,u),this.newDocumentQueue=this.newDocumentQueue.filter(d=>d!==a)}collectIframeAndAttachDocument(e,t){if(Di(t,this.mirror)){const r=this.newDocumentQueue.find(o=>o.parentId===this.mirror.getId(t));r&&e.push({mutationInQueue:r,builtNode:t})}}waitForStylesheetLoad(){var e;const t=(e=this.iframe.contentDocument)===null||e===void 0?void 0:e.head;if(t){const r=new Set;let o,l=this.service.state;const a=()=>{l=this.service.state};this.emitter.on(Pe.Start,a),this.emitter.on(Pe.Pause,a);const u=()=>{this.emitter.off(Pe.Start,a),this.emitter.off(Pe.Pause,a)};t.querySelectorAll('link[rel="stylesheet"]').forEach(d=>{d.sheet||(r.add(d),d.addEventListener("load",()=>{r.delete(d),r.size===0&&o!==-1&&(l.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(Pe.LoadStylesheetEnd),o&&clearTimeout(o),u())}))}),r.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(Pe.LoadStylesheetStart),o=setTimeout(()=>{l.matches("playing")&&this.play(this.getCurrentTime()),o=-1,u()},this.config.loadTimeout))}}preloadAllImages(){return hr(this,void 0,void 0,function*(){this.service.state;const e=()=>{this.service.state};this.emitter.on(Pe.Start,e),this.emitter.on(Pe.Pause,e);const t=[];for(const r of this.service.state.context.events)r.type===de.IncrementalSnapshot&&r.data.source===oe.CanvasMutation&&(t.push(this.deserializeAndPreloadCanvasEvents(r.data,r)),("commands"in r.data?r.data.commands:[r.data]).forEach(l=>{this.preloadImages(l,r)}));return Promise.all(t)})}preloadImages(e,t){if(e.property==="drawImage"&&typeof e.args[0]=="string"&&!this.imageMap.has(t)){const r=document.createElement("canvas"),o=r.getContext("2d"),l=o==null?void 0:o.createImageData(r.width,r.height);l==null||l.data,JSON.parse(e.args[0]),o==null||o.putImageData(l,0,0)}}deserializeAndPreloadCanvasEvents(e,t){return hr(this,void 0,void 0,function*(){if(!this.canvasEventMap.has(t)){const r={isUnchanged:!0};if("commands"in e){const o=yield Promise.all(e.commands.map(l=>hr(this,void 0,void 0,function*(){const a=yield Promise.all(l.args.map(yr(this.imageMap,null,r)));return Object.assign(Object.assign({},l),{args:a})})));r.isUnchanged===!1&&this.canvasEventMap.set(t,Object.assign(Object.assign({},e),{commands:o}))}else{const o=yield Promise.all(e.args.map(yr(this.imageMap,null,r)));r.isUnchanged===!1&&this.canvasEventMap.set(t,Object.assign(Object.assign({},e),{args:o}))}}})}applyIncremental(e,t){var r,o,l;const{data:a}=e;switch(a.source){case oe.Mutation:{try{this.applyMutation(a,t)}catch(u){this.warn(`Exception in mutation ${u.message||u}`,a)}break}case oe.Drag:case oe.TouchMove:case oe.MouseMove:if(t){const u=a.positions[a.positions.length-1];this.mousePos={x:u.x,y:u.y,id:u.id,debugData:a}}else a.positions.forEach(u=>{const d={doAction:()=>{this.moveAndHover(u.x,u.y,u.id,t,a)},delay:u.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(d)}),this.timer.addAction({doAction(){},delay:e.delay-((r=a.positions[0])===null||r===void 0?void 0:r.timeOffset)});break;case oe.MouseInteraction:{if(a.id===-1||t)break;const u=new Event(yt[a.type].toLowerCase()),d=this.mirror.getNode(a.id);if(!d)return this.debugNodeNotFound(a,a.id);this.emitter.emit(Pe.MouseInteraction,{type:a.type,target:d});const{triggerFocus:f}=this.config;switch(a.type){case yt.Blur:"blur"in d&&d.blur();break;case yt.Focus:f&&d.focus&&d.focus({preventScroll:!0});break;case yt.Click:case yt.TouchStart:case yt.TouchEnd:t?(a.type===yt.TouchStart?this.touchActive=!0:a.type===yt.TouchEnd&&(this.touchActive=!1),this.mousePos={x:a.x,y:a.y,id:a.id,debugData:a}):(a.type===yt.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(a.x,a.y,a.id,t,a),a.type===yt.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):a.type===yt.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):a.type===yt.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case yt.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:d.dispatchEvent(u)}break}case oe.Scroll:{if(a.id===-1)break;if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(a.id);if(!u)return this.debugNodeNotFound(a,a.id);u.scrollData=a;break}this.applyScroll(a,t);break}case oe.ViewportResize:this.emitter.emit(Pe.Resize,{width:a.width,height:a.height});break;case oe.Input:{if(a.id===-1)break;if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(a.id);if(!u)return this.debugNodeNotFound(a,a.id);u.inputData=a;break}this.applyInput(a);break}case oe.MediaInteraction:{const u=this.usingVirtualDom?this.virtualDom.mirror.getNode(a.id):this.mirror.getNode(a.id);if(!u)return this.debugNodeNotFound(a,a.id);const d=u;try{a.currentTime&&(d.currentTime=a.currentTime),a.volume&&(d.volume=a.volume),a.muted&&(d.muted=a.muted),a.type===1&&d.pause(),a.type===0&&d.play(),a.type===4&&(d.playbackRate=a.playbackRate)}catch(f){this.config.showWarning&&console.warn(`Failed to replay media interactions: ${f.message||f}`)}break}case oe.StyleSheetRule:case oe.StyleDeclaration:{this.usingVirtualDom?a.styleId?this.constructedStyleMutations.push(a):a.id&&((o=this.virtualDom.mirror.getNode(a.id))===null||o===void 0||o.rules.push(a)):this.applyStyleSheetMutation(a);break}case oe.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(a.id);if(!u)return this.debugNodeNotFound(a,a.id);u.canvasMutations.push({event:e,mutation:a})}else{const u=this.mirror.getNode(a.id);if(!u)return this.debugNodeNotFound(a,a.id);y0({event:e,mutation:a,target:u,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break}case oe.Font:{try{const u=new FontFace(a.family,a.buffer?new Uint8Array(JSON.parse(a.fontSource)):a.fontSource,a.descriptors);(l=this.iframe.contentDocument)===null||l===void 0||l.fonts.add(u)}catch(u){this.config.showWarning&&console.warn(u)}break}case oe.Selection:{if(t){this.lastSelectionData=a;break}this.applySelection(a);break}case oe.AdoptedStyleSheet:{this.usingVirtualDom?this.adoptedStyleSheets.push(a):this.applyAdoptedStyleSheet(a);break}}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,qT(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const f in this.legacy_missingNodeRetryMap)try{const h=this.legacy_missingNodeRetryMap[f],m=Hy(h.node,this.virtualDom,this.mirror);m&&(h.node=m)}catch(h){this.config.showWarning&&console.warn(h)}const r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes.forEach(f=>{var h;const m=r.getNode(f.id);if(!m)return e.removes.find(w=>w.id===f.parentId)?void 0:this.warnNodeNotFound(e,f.id);let y=r.getNode(f.parentId);if(!y)return this.warnNodeNotFound(e,f.parentId);if(f.isShadow&&qr(y)&&(y=y.shadowRoot),r.removeNodeFromMap(m),y)try{y.removeChild(m),this.usingVirtualDom&&m.nodeName==="#text"&&y.nodeName==="STYLE"&&((h=y.rules)===null||h===void 0?void 0:h.length)>0&&(y.rules=[])}catch(w){if(w instanceof DOMException)this.warn("parent could not remove child in mutation",y,m,e);else throw w}});const o=Object.assign({},this.legacy_missingNodeRetryMap),l=[],a=f=>{let h=null;return f.nextId&&(h=r.getNode(f.nextId)),f.nextId!==null&&f.nextId!==void 0&&f.nextId!==-1&&!h},u=f=>{var h;if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");let m=r.getNode(f.parentId);if(!m)return f.node.type===Re.Document?this.newDocumentQueue.push(f):l.push(f);f.node.isShadow&&(qr(m)||m.attachShadow({mode:"open"}),m=m.shadowRoot);let y=null,w=null;if(f.previousId&&(y=r.getNode(f.previousId)),f.nextId&&(w=r.getNode(f.nextId)),a(f))return l.push(f);if(f.node.rootId&&!r.getNode(f.node.rootId))return;const k=f.node.rootId?r.getNode(f.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Di(m,r)){this.attachDocumentToIframe(f,m);return}const x=(T,M)=>{for(const _ of this.config.plugins||[])_.onBuild&&_.onBuild(T,{id:M,replayer:this})},b=Go(f.node,{doc:k,mirror:r,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:x});if(f.previousId===-1||f.nextId===-1){o[f.node.id]={node:b,mutation:f};return}const E=r.getMeta(m);if(E&&E.type===Re.Element&&E.tagName==="textarea"&&f.node.type===Re.Text){const T=Array.isArray(m.childNodes)?m.childNodes:Array.from(m.childNodes);for(const M of T)M.nodeType===m.TEXT_NODE&&m.removeChild(M)}if(y&&y.nextSibling&&y.nextSibling.parentNode)m.insertBefore(b,y.nextSibling);else if(w&&w.parentNode)m.contains(w)?m.insertBefore(b,w):m.insertBefore(b,null);else{if(m===k)for(;k.firstChild;)k.removeChild(k.firstChild);m.appendChild(b)}if(x(b,f.node.id),this.usingVirtualDom&&b.nodeName==="#text"&&m.nodeName==="STYLE"&&((h=m.rules)===null||h===void 0?void 0:h.length)>0&&(m.rules=[]),Di(b,this.mirror)){const T=this.mirror.getId(b),M=this.newDocumentQueue.find(_=>_.parentId===T);M&&(this.attachDocumentToIframe(M,b),this.newDocumentQueue=this.newDocumentQueue.filter(_=>_!==M))}(f.previousId||f.nextId)&&this.legacy_resolveMissingNode(o,m,b,f)};e.adds.forEach(f=>{u(f)});const d=Date.now();for(;l.length;){const f=dy(l);if(l.length=0,Date.now()-d>500){this.warn("Timeout in the loop, please check the resolve tree data:",f);break}for(const h of f)r.getNode(h.value.parentId)?fd(h,y=>{u(y)}):this.debug("Drop resolve tree since there is no parent for the root node.",h)}Object.keys(o).length&&Object.assign(this.legacy_missingNodeRetryMap,o),fy(e.texts).forEach(f=>{var h;const m=r.getNode(f.id);if(!m)return e.removes.find(y=>y.id===f.id)?void 0:this.warnNodeNotFound(e,f.id);if(m.textContent=f.value,this.usingVirtualDom){const y=m.parentNode;((h=y==null?void 0:y.rules)===null||h===void 0?void 0:h.length)>0&&(y.rules=[])}}),e.attributes.forEach(f=>{const h=r.getNode(f.id);if(!h)return e.removes.find(m=>m.id===f.id)?void 0:this.warnNodeNotFound(e,f.id);for(const m in f.attributes)if(typeof m=="string"){const y=f.attributes[m];if(y===null)h.removeAttribute(m);else if(typeof y=="string")try{if(m==="_cssText"&&(h.nodeName==="LINK"||h.nodeName==="STYLE"))try{const w=r.getMeta(h);Object.assign(w.attributes,f.attributes);const k=Go(w,{doc:h.ownerDocument,mirror:r,skipChild:!0,hackCss:!0,cache:this.cache}),x=h.nextSibling,b=h.parentNode;if(k&&b){b.removeChild(h),b.insertBefore(k,x),r.replace(f.id,k);break}}catch{}h.setAttribute(m,y)}catch(w){this.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",w)}else if(m==="style"){const w=y,k=h;for(const x in w)if(w[x]===!1)k.style.removeProperty(x);else if(w[x]instanceof Array){const b=w[x];k.style.setProperty(x,b[0],b[1])}else{const b=w[x];k.style.setProperty(x,b)}}}})}applyScroll(e,t){var r,o;const l=this.mirror.getNode(e.id);if(!l)return this.debugNodeNotFound(e,e.id);const a=this.mirror.getMeta(l);if(l===this.iframe.contentDocument)(r=this.iframe.contentWindow)===null||r===void 0||r.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if((a==null?void 0:a.type)===Re.Document)(o=l.defaultView)===null||o===void 0||o.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{l.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch{}}applyInput(e){const t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch{}}applySelection(e){try{const t=new Set,r=e.ranges.map(({start:o,startOffset:l,end:a,endOffset:u})=>{const d=this.mirror.getNode(o),f=this.mirror.getNode(a);if(!d||!f)return;const h=new Range;h.setStart(d,l),h.setEnd(f,u);const m=d.ownerDocument,y=m==null?void 0:m.getSelection();return y&&t.add(y),{range:h,selection:y}});t.forEach(o=>o.removeAllRanges()),r.forEach(o=>{var l;return o&&((l=o.selection)===null||l===void 0?void 0:l.addRange(o.range))})}catch{}}applyStyleSheetMutation(e){var t;let r=null;e.styleId?r=this.styleMirror.getStyle(e.styleId):e.id&&(r=((t=this.mirror.getNode(e.id))===null||t===void 0?void 0:t.sheet)||null),r&&(e.source===oe.StyleSheetRule?this.applyStyleSheetRule(e,r):e.source===oe.StyleDeclaration&&this.applyStyleDeclaration(e,r))}applyStyleSheetRule(e,t){var r,o,l,a;if((r=e.adds)===null||r===void 0||r.forEach(({rule:u,index:d})=>{try{if(Array.isArray(d)){const{positions:f,index:h}=md(d);Pi(t.cssRules,f).insertRule(u,h)}else{const f=d===void 0?void 0:Math.min(d,t.cssRules.length);t==null||t.insertRule(u,f)}}catch{}}),(o=e.removes)===null||o===void 0||o.forEach(({index:u})=>{try{if(Array.isArray(u)){const{positions:d,index:f}=md(u);Pi(t.cssRules,d).deleteRule(f||0)}else t==null||t.deleteRule(u)}catch{}}),e.replace)try{(l=t.replace)===null||l===void 0||l.call(t,e.replace)}catch{}if(e.replaceSync)try{(a=t.replaceSync)===null||a===void 0||a.call(t,e.replaceSync)}catch{}}applyStyleDeclaration(e,t){e.set&&Pi(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority),e.remove&&Pi(t.rules,e.index).style.removeProperty(e.remove.property)}applyAdoptedStyleSheet(e){var t;const r=this.mirror.getNode(e.id);if(!r)return;(t=e.styles)===null||t===void 0||t.forEach(u=>{var d;let f=null,h=null;if(qr(r)?h=((d=r.ownerDocument)===null||d===void 0?void 0:d.defaultView)||null:r.nodeName==="#document"&&(h=r.defaultView),!!h)try{f=new h.CSSStyleSheet,this.styleMirror.add(f,u.styleId),this.applyStyleSheetRule({source:oe.StyleSheetRule,adds:u.rules},f)}catch{}});const o=10;let l=0;const a=(u,d)=>{const f=d.map(h=>this.styleMirror.getStyle(h)).filter(h=>h!==null);qr(u)?u.shadowRoot.adoptedStyleSheets=f:u.nodeName==="#document"&&(u.adoptedStyleSheets=f),f.length!==d.length&&l<o&&(setTimeout(()=>a(u,d),0+100*l),l++)};a(r,e.styleIds)}legacy_resolveMissingNode(e,t,r,o){const{previousId:l,nextId:a}=o,u=l&&e[l],d=a&&e[a];if(u){const{node:f,mutation:h}=u;t.insertBefore(f,r),delete e[h.node.id],delete this.legacy_missingNodeRetryMap[h.node.id],(h.previousId||h.nextId)&&this.legacy_resolveMissingNode(e,t,f,h)}if(d){const{node:f,mutation:h}=d;t.insertBefore(f,r.nextSibling),delete e[h.node.id],delete this.legacy_missingNodeRetryMap[h.node.id],(h.previousId||h.nextId)&&this.legacy_resolveMissingNode(e,t,f,h)}}moveAndHover(e,t,r,o,l){const a=this.mirror.getNode(r);if(!a)return this.debugNodeNotFound(l,r);const u=hd(a,this.iframe),d=e*u.absoluteScale+u.x,f=t*u.absoluteScale+u.y;this.mouse.style.left=`${d}px`,this.mouse.style.top=`${f}px`,o||this.drawMouseTail({x:d,y:f}),this.hoverElements(a)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:t,lineWidth:r,strokeStyle:o,duration:l}=this.config.mouseTail===!0?zd:Object.assign({},zd,this.config.mouseTail),a=()=>{if(!this.mouseTail)return;const u=this.mouseTail.getContext("2d");!u||!this.tailPositions.length||(u.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),u.beginPath(),u.lineWidth=r,u.lineCap=t,u.strokeStyle=o,u.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(d=>u.lineTo(d.x,d.y)),u.stroke())};this.tailPositions.push(e),a(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(u=>u!==e),a()},l/this.speedService.state.context.timer.speed)}hoverElements(e){var t;(t=this.iframe.contentDocument)===null||t===void 0||t.querySelectorAll(".\\:hover").forEach(o=>{o.classList.remove(":hover")});let r=e;for(;r;)r.classList&&r.classList.add(":hover"),r=r.parentElement}isUserInteraction(e){return e.type!==de.IncrementalSnapshot?!1:e.data.source>oe.Mutation&&e.data.source<=oe.Input}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(Pe.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(Fd,`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&console.warn(Fd,...e)}debug(...e){this.config.showDebug&&console.log(Fd,...e)}}const VA=Object.freeze(Object.defineProperty({__proto__:null,EventType:de,IncrementalSource:oe,MouseInteractions:yt,PLUGIN_NAME:Pd,Replayer:HA,ReplayerEvents:Pe,addCustomEvent:tA,freezePage:nA,getRecordConsolePlugin:bA,getReplayConsolePlugin:TA,get mirror(){return ea},pack:vA,record:ei,unpack:wA,utils:QI},Symbol.toStringTag,{value:"Module"}));return yI}();
